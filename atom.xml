<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Skyline æŠ€æœ¯ç¬”è®°</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2020-03-01T17:35:57.831Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>John</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Lernaçš„versionå˜æ›´</title>
    <link href="http://yoursite.com/2020/03/02/Lerna%E7%9A%84version%E5%8F%98%E6%9B%B4/"/>
    <id>http://yoursite.com/2020/03/02/Lerna%E7%9A%84version%E5%8F%98%E6%9B%B4/</id>
    <published>2020-03-01T17:17:57.000Z</published>
    <updated>2020-03-01T17:35:57.831Z</updated>
    
    <content type="html"><![CDATA[<p>ä¹‹å‰å†™äº†Lernaçš„ä½¿ç”¨æ„Ÿå—æ–‡ç« ï¼Œåˆ†äº«äº†Lernaçš„æ•´ä½“ä½¿ç”¨æ„Ÿå—ã€‚è€Œä»Šå¤©æˆ‘å¤„ç†äº†ä¸€ä¸ªå› ä¸ºä¸ç†Ÿæ‚‰Lernaå¯¼è‡´çš„å°é—®é¢˜ï¼Œé‚£æˆ‘å†æ¥åˆ†äº«ä¸€ä¸‹è¿™ä¸ªå…·ä½“çš„ä½¿ç”¨æ¡ˆä¾‹ã€‚</p><h2 id="èµ·å› "><a href="#èµ·å› " class="headerlink" title="èµ·å› "></a>èµ·å› </h2><p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼ˆä¸çŸ¥é“ä½ ä¹Ÿå‡è£…ç°åœ¨çŸ¥é“äº†ï¼‰ï¼ŒLernaä¼šè‡ªåŠ¨ç»´æŠ¤å„ä¸ªpackageçš„package.jsonæ–‡ä»¶çš„versionå˜æ›´ã€‚è¿™é‡Œçœ‹ä¸Šå»éå¸¸æ™ºèƒ½ï¼Œä½†æ˜¯å¦‚æœä½ çš„éœ€æ±‚æ˜¯è¦åœ¨å…¶ä»–åœ°æ–¹ï¼ˆépackage.jsonï¼‰åŒæ­¥è¿™ä¸ªversionå˜æ›´è¦å¦‚ä½•å¤„ç†å‘¢ï¼Ÿåˆšå¥½å·¥ä½œä¸­ä¹Ÿé‡åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬çš„æ¨¡ç‰ˆæ–‡ä»¶çš„ä½¿ç”¨äº†ejs, è€Œpackage.json.ejsæ–‡ä»¶ä¸­çš„ä¾èµ–ç‰ˆæœ¬å·ï¼Œæ˜¯éœ€è¦åŒæ­¥Lernaå‘å¸ƒä¹‹åçš„ç‰ˆæœ¬å·çš„ã€‚</p><h2 id="è§£å†³"><a href="#è§£å†³" class="headerlink" title="è§£å†³"></a>è§£å†³</h2><p>æˆ‘ä»¬æ‰‹åŠ¨ä¿®æ”¹package.json.ejsä¾èµ–çš„ç‰ˆæœ¬å·å¾ˆé•¿ä¸€æ®µæ—¶é—´ï¼Œä½†æ˜¯è¿™ä¸ªåŠ¨ä½œæ˜æ˜¾ä¸åˆç†ï¼Œæ‰€æœ‰èƒ½å¤Ÿäº¤ç»™ä»£ç å»å¤„ç†çš„äº‹æƒ…ä¸èƒ½æ‰‹å·¥å®Œæˆã€‚è¿™ä¸ªä¸ä»…ä»…æ˜¯æ•ˆç‡é—®é¢˜ï¼Œæ›´æ¶‰åŠåˆ°å¯é æ€§å’Œç¨³å®šæ€§ã€‚</p><p>ä¸è¿‡äº‹æƒ…çš„æ¨è¿›å¾€å¾€æ˜¯å‡ºç°é—®é¢˜ä¹‹åï¼Œç›´åˆ°ä¸€æ¬¡æˆ‘ä»¬å¿˜è®°æ‰‹åŠ¨æ›´æ”¹è¿™ä¸ªä¾èµ–ç‰ˆæœ¬å·ä¹‹åï¼Œæˆ‘å°±ç€æ‰‹å»å¤„ç†è¿™ä¸ªé—®é¢˜ã€‚</p><p>è¿™ä¸ªå½’åŠŸäºæˆ‘ä¹‹å‰æœ‰é˜…è¯»è¿‡npmçš„éƒ¨åˆ†æºç ï¼Œå¯¹preversionå’Œversionç­‰npmè‡ªå·±çš„ç”Ÿå‘½å‘¨æœŸé’©å­æœ‰æ¨¡ç³Šçš„å°è±¡ã€‚æˆ‘é¡ºè—¤æ‘¸ç“œï¼Œæ‰¾åˆ°lerna versionçš„æ–‡æ¡£ï¼Œåœ¨æœ€ä¸‹é¢æœç„¶æ‰¾åˆ°äº†lifecycleç›¸å…³æ–‡æ¡£ã€‚lernaæ ¹ç›®å½•çš„version scriptå¯ä»¥åœ¨lernaæ›´æ”¹äº†packagesæ–‡ä»¶ä¹‹åæ‰§è¡Œã€‚é‚£æ€è·¯å°±æœ‰äº†ï¼Œåªè¦æˆ‘ä»¬å†™ä¸€ä¸ªversion.jsçš„è„šæœ¬ï¼Œå»æ›¿æ¢package.json.ejsçš„ç‰ˆæœ¬å·å°±è¡Œäº†ã€‚</p><h2 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h2><p>å†ç®€å•çš„äº‹æƒ…ï¼Œéƒ½è¦é‡è§†ï¼Œèƒ½è‡ªåŠ¨åŒ–çš„éƒ½è¦äº¤ç»™æœºå™¨ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;ä¹‹å‰å†™äº†Lernaçš„ä½¿ç”¨æ„Ÿå—æ–‡ç« ï¼Œåˆ†äº«äº†Lernaçš„æ•´ä½“ä½¿ç”¨æ„Ÿå—ã€‚è€Œä»Šå¤©æˆ‘å¤„ç†äº†ä¸€ä¸ªå› ä¸ºä¸ç†Ÿæ‚‰Lernaå¯¼è‡´çš„å°é—®é¢˜ï¼Œé‚£æˆ‘å†æ¥åˆ†äº«ä¸€ä¸‹è¿™ä¸ªå…·ä½“çš„ä½¿ç”¨æ¡ˆä¾‹ã€‚&lt;/p&gt;
&lt;h2 id=&quot;èµ·å› &quot;&gt;&lt;a href=&quot;#èµ·å› &quot; class=&quot;headerlink&quot; title=&quot;èµ·å› &quot;
      
    
    </summary>
    
    
    
      <category term="å‰ç«¯å·¥ç¨‹åŒ–" scheme="http://yoursite.com/tags/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/"/>
    
      <category term="Lerna" scheme="http://yoursite.com/tags/Lerna/"/>
    
  </entry>
  
  <entry>
    <title>å¢åŠ RSSè®¢é˜…åŠŸèƒ½</title>
    <link href="http://yoursite.com/2020/01/21/%E5%A2%9E%E5%8A%A0RSS%E8%AE%A2%E9%98%85%E5%8A%9F%E8%83%BD/"/>
    <id>http://yoursite.com/2020/01/21/%E5%A2%9E%E5%8A%A0RSS%E8%AE%A2%E9%98%85%E5%8A%9F%E8%83%BD/</id>
    <published>2020-01-21T08:49:59.000Z</published>
    <updated>2020-01-29T10:59:34.341Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šå¤©ç»™è‡ªå·±çš„åšå®¢å¢åŠ äº†RSSè®¢é˜…åŠŸèƒ½ï¼Œå¦‚æœå¯¹æˆ‘çš„åšå®¢æœ‰å…´è¶£ï¼Œæ¬¢è¿ä½¿ç”¨RSSè®¢é˜…è·å–æœ€æ–°æ–‡ç« ã€‚</p><p>åŒæ—¶å‘¢ï¼Œé¡ºä¾¿è®²è®²è‡ªå·±ä¸ºä»€ä¹ˆè¦åŠ å…¥è¿™ä¸ªRSSè®¢é˜…åŠŸèƒ½ï¼Œå½“ç„¶ä¸ä»…ä»…æ˜¯å› ä¸ºå®ƒçœ‹ä¸Šå»åƒæ˜¯ä¸€ä¸ªBlogçš„æ ‡é…æˆ‘å°±æ„¿æ„ä¸»åŠ¨åŠ è¿›å»ã€‚</p><h2 id="RSSè®¢é˜…çš„ä¸»åŠ¨æ€§"><a href="#RSSè®¢é˜…çš„ä¸»åŠ¨æ€§" class="headerlink" title="RSSè®¢é˜…çš„ä¸»åŠ¨æ€§"></a>RSSè®¢é˜…çš„ä¸»åŠ¨æ€§</h2><p>ä½¿ç”¨RSSè®¢é˜…ï¼Œå¯ä»¥æé«˜æˆ‘ä»¬è·å–èµ„è®¯çš„ä¸»åŠ¨æ€§ã€‚å¦‚æœæˆ‘ä»¬ä¹ æƒ¯äºè¢«åŠ¨æ¥æ”¶ï¼Œæ¯”å¦‚åˆ·ä¿¡æ¯æµï¼Œåˆ·çŸ­è§†é¢‘ï¼Œæˆ‘ä»¬æ€»æ˜¯ä¼šåœ¨å®è´µçš„ç¢ç‰‡æ—¶é—´é”™è¿‡é«˜è´¨é‡çŸ¥è¯†ç§¯ç´¯çš„æœºä¼šã€‚è€Œä½¿ç”¨RSSè®¢é˜…ï¼Œæ¯ä¸€ä¸ªæºéƒ½å¯èƒ½æ˜¯ä½ ç²¾æŒ‘ç»†é€‰ä¹‹åä¿ç•™ä¸‹æ¥çš„ï¼Œä¹Ÿæ˜¯ä½ é•¿å¹´ç´¯æœˆå¢åˆ æ”¹æŸ¥ä¹‹åæ²‰æ·€ä¸‹æ¥çš„ ã€‚è¿™ç§ä½¿ç”¨RSSè®¢é˜…çš„æ–¹å¼ï¼Œé¦–å…ˆä½ å¾—å…ˆå»ç§¯ç´¯ï¼Œå–„äºå‘ç°ï¼Œæ‰èƒ½åœ¨è‡ªå·±çš„é˜…è¯»å™¨ä¸­æ·»åŠ è‡ªå·±è®¤å¯çš„é«˜è´¨é‡æºï¼Œè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯ä¸€ä¸ªä¸»åŠ¨ç§¯æçš„å­¦ä¹ è¿‡ç¨‹ã€‚å½“ç”Ÿæ´»ä¸­å„ç§å„æ ·çš„æ–¹ä¾¿æ€§é™ä½æˆ‘ä»¬å¤§è„‘æˆæœ¬çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸è¦å¿˜äº†ä¸»åŠ¨æ€§æ‰æ˜¯æé«˜è‡ªèº«æˆé•¿é€Ÿåº¦çš„å…³é”®ã€‚</p><h2 id="ä¼˜è´¨çš„RSSé˜…è¯»å™¨"><a href="#ä¼˜è´¨çš„RSSé˜…è¯»å™¨" class="headerlink" title="ä¼˜è´¨çš„RSSé˜…è¯»å™¨"></a>ä¼˜è´¨çš„RSSé˜…è¯»å™¨</h2><p>ä¼˜è´¨çš„RSSé˜…è¯»å™¨ï¼Œæé«˜äº†é˜…è¯»ä½“éªŒï¼Œå¢åŠ äº†é˜…è¯»çš„ä¸“æ³¨åŠ›ã€‚åŒæ—¶RSSæºçš„ç²¾é€‰ï¼Œæœ¬èº«ä¹Ÿå¾ˆå¤§ç¨‹åº¦è¿‡æ»¤äº†åƒåœ¾ä¿¡æ¯å’Œåƒåœ¾å¹¿å‘Šçš„éªšæ‰°ã€‚</p><p>ä¸Šå›¾æ˜¯æˆ‘åœ¨macOSä¸Šé¢ä½¿ç”¨çš„Reederé˜…è¯»å™¨ï¼Œè®¢é˜…çš„æºç›¸å¯¹è¾ƒå°‘ï¼Œå¤§éƒ¨åˆ†è®¢é˜…æ”¾åœ¨äº†æ‰‹æœºã€‚æˆªå›¾å‡ºæ¥é™¤äº†åˆ†äº«è¿™ä¸ªä¼˜ç§€çš„appï¼Œè¿˜æƒ³å‘Šè¯‰å¤§å®¶ï¼Œå…¶å®ä½¿ç”¨ä¸€æ¬¾ä¼˜è´¨çš„RSSé˜…è¯»å™¨ï¼Œä¸€å®šç¨‹åº¦ä¸Šæé«˜äº†è‡ªå·±çš„é˜…è¯»å¹¸ç¦æ„Ÿã€‚</p><p>ä¼˜è´¨çš„RSSé˜…è¯»å™¨ç»™æˆ‘ä»¬å¸¦æ¥çš„å¯è§äº®ç‚¹ï¼Œæ€»ç»“ä¸‹æ¥ä¸»è¦æ˜¯ä»¥ä¸‹ä¸‰ç‚¹ï¼š</p><ul><li>ä¸“æ³¨</li><li>ä½“éªŒ</li><li>é«˜æ•ˆ</li></ul><p>ä¿¡æ¯å¤§çˆ†ç‚¸æ—¶ä»£ï¼Œå¤šäº†å¤ªå¤šéœ€è¦æˆ‘ä»¬è‡ªå·±è¿‡æ»¤çš„åƒåœ¾ä¿¡æ¯ã€‚åœ¨é€‰æ‹©é˜…è¯»æºä¸Šï¼Œæˆ‘ä»¬å…ˆåšå¥½è¿™ä¸€å±‚è¿‡æ»¤ï¼Œå°±åœ¨æˆ‘ä»¬é˜…è¯»è¿‡ç¨‹ä¸­å¤§å¤§å‡å°‘äº†è´Ÿæ‹…ã€‚RSSè®¢é˜…åªæ˜¯ä¸€ä¸ªæ›´ä¾¿æ·é«˜æ•ˆçš„æ‰‹æ®µè€Œå·²ï¼Œæ ¸å¿ƒè¿˜æ˜¯ä¸»åŠ¨è·å–çŸ¥è¯†ã€‚</p><h2 id="RSSæºæ¨è"><a href="#RSSæºæ¨è" class="headerlink" title="RSSæºæ¨è"></a>RSSæºæ¨è</h2><p>RSSæºçš„èšåˆæˆ‘åªæ¨èä¸€ä¸ªç«™ç‚¹ï¼š<a href="https://docs.rsshub.app/" target="_blank" rel="noopener">RSSHub</a>ã€‚ä¹Ÿç®—æ˜¯æˆ‘ä½¿ç”¨è¿™ä¸ªç«™ç‚¹çš„ä¸€ç‚¹å›é¦ˆå§ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;ä»Šå¤©ç»™è‡ªå·±çš„åšå®¢å¢åŠ äº†RSSè®¢é˜…åŠŸèƒ½ï¼Œå¦‚æœå¯¹æˆ‘çš„åšå®¢æœ‰å…´è¶£ï¼Œæ¬¢è¿ä½¿ç”¨RSSè®¢é˜…è·å–æœ€æ–°æ–‡ç« ã€‚&lt;/p&gt;
&lt;p&gt;åŒæ—¶å‘¢ï¼Œé¡ºä¾¿è®²è®²è‡ªå·±ä¸ºä»€ä¹ˆè¦åŠ å…¥è¿™ä¸ªRSSè®¢é˜…åŠŸèƒ½ï¼Œå½“ç„¶ä¸ä»…ä»…æ˜¯å› ä¸ºå®ƒçœ‹ä¸Šå»åƒæ˜¯ä¸€ä¸ªBlogçš„æ ‡é…æˆ‘å°±æ„¿æ„ä¸»åŠ¨åŠ è¿›å»ã€‚&lt;/p&gt;
&lt;h2 id=&quot;RSSè®¢é˜…çš„ä¸»åŠ¨æ€§&quot;&gt;
      
    
    </summary>
    
    
    
      <category term="æŠ€æœ¯æ‚è°ˆ" scheme="http://yoursite.com/tags/%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/"/>
    
  </entry>
  
  <entry>
    <title>å‰ç«¯é¡¹ç›®éƒ¨ç½²nginxåŸºç¡€é…ç½®å‚è€ƒ</title>
    <link href="http://yoursite.com/2020/01/16/%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2nginx%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE%E5%8F%82%E8%80%83/"/>
    <id>http://yoursite.com/2020/01/16/%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2nginx%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE%E5%8F%82%E8%80%83/</id>
    <published>2020-01-16T11:46:21.000Z</published>
    <updated>2020-01-29T10:59:34.340Z</updated>
    
    <content type="html"><![CDATA[<p>å‰æ®µæ—¶é—´ï¼Œé¢è¯•ä¸€äº›å‰ç«¯åŒå­¦çš„æ—¶å€™ï¼Œå‘ç°å¤§éƒ¨åˆ†å¯¹å¼€å‘å®Œæˆä¹‹åçš„éƒ¨ç½²æµç¨‹éƒ½ä¸å¤ªäº†è§£ã€‚å¬åˆ°æœ€å¤šçš„å›ç­”ï¼Œéƒ½æ˜¯npm run buildä¹‹åäº¤ç»™åç«¯æˆ–è€…å‰ç«¯è´Ÿè´£äººå°±å¯ä»¥äº†ã€‚è™½ç„¶éƒ¨ç½²çš„è¿‡ç¨‹ä¸ä¸€å®šæœ‰æœºä¼šå‚ä¸ï¼Œä½†æ˜¯ä¸€å®šè¦åšåˆ°å¿ƒä¸­æœ‰æ•°ï¼Œä¸ç„¶æ€ä¹ˆèƒ½åšåˆ°è´Ÿè´£ä¸€æ•´ä¸ªå‰ç«¯é¡¹ç›®å‘¢ï¼Ÿ</p><p>è¶ç€æœ‰ç©ºï¼Œç®€å•å†™ä¸‹å‰ç«¯éƒ¨ç½²æ—¶å€™ç”¨åˆ°çš„æœ€åŸºç¡€çš„nginxé…ç½®å‚è€ƒã€‚è¿™é‡Œä»¥vueçš„spaé¡¹ç›®ä½œä¸ºä¾‹å­ã€‚</p><h2 id="é…ç½®åˆ†ç±»"><a href="#é…ç½®åˆ†ç±»" class="headerlink" title="é…ç½®åˆ†ç±»"></a>é…ç½®åˆ†ç±»</h2><p>æ ¹æ®vue-routerçš„modeï¼Œåˆ†æˆä¸¤ç§æƒ…å†µï¼š</p><ul><li>hash</li><li>history</li></ul><p>åŒæ—¶æ ¹æ®éƒ¨ç½²çš„è·¯å¾„ï¼Œä¹Ÿåˆ†æˆä¸¤ç§æƒ…å†µï¼š</p><ul><li>æ ¹è·¯å¾„</li><li>éæ ¹è·¯å¾„</li></ul><p>æˆ‘ä»¬å‡è®¾distæ–‡ä»¶å¤¹æ”¾åœ¨/data/www/demo/dist, server_nameæ˜¯localhostã€‚</p><a id="more"></a><h3 id="hashæ¨¡å¼ï¼ˆæ ¹è·¯å¾„ï¼‰"><a href="#hashæ¨¡å¼ï¼ˆæ ¹è·¯å¾„ï¼‰" class="headerlink" title="hashæ¨¡å¼ï¼ˆæ ¹è·¯å¾„ï¼‰"></a>hashæ¨¡å¼ï¼ˆæ ¹è·¯å¾„ï¼‰</h3><p><strong>nginx é…ç½®</strong>ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">http &#123;</span><br><span class="line">  server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name localhost;</span><br><span class="line">    location &#x2F; &#123;</span><br><span class="line">      root &#x2F;data&#x2F;www&#x2F;demo&#x2F;dist&#x2F;;</span><br><span class="line">      index index.html;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="hashæ¨¡å¼ï¼ˆéæ ¹è·¯å¾„ï¼‰"><a href="#hashæ¨¡å¼ï¼ˆéæ ¹è·¯å¾„ï¼‰" class="headerlink" title="hashæ¨¡å¼ï¼ˆéæ ¹è·¯å¾„ï¼‰"></a>hashæ¨¡å¼ï¼ˆéæ ¹è·¯å¾„ï¼‰</h3><p><strong>nginx é…ç½®</strong>ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">http &#123;</span><br><span class="line">  server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name localhost;</span><br><span class="line">    location ^~ &#x2F;demo &#123;</span><br><span class="line">      alias &#x2F;data&#x2F;www&#x2F;demo&#x2F;dist&#x2F;;</span><br><span class="line">      index index.html;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>vue.config.jsé…ç½®</strong>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  publicPath: <span class="string">'/demo'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="historyæ¨¡å¼ï¼ˆæ ¹è·¯å¾„ï¼‰"><a href="#historyæ¨¡å¼ï¼ˆæ ¹è·¯å¾„ï¼‰" class="headerlink" title="historyæ¨¡å¼ï¼ˆæ ¹è·¯å¾„ï¼‰"></a>historyæ¨¡å¼ï¼ˆæ ¹è·¯å¾„ï¼‰</h3><p><strong>nginx é…ç½®</strong>ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">http &#123;</span><br><span class="line">  server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name localhost;</span><br><span class="line">    location &#x2F; &#123;</span><br><span class="line">      root  &#x2F;data&#x2F;www&#x2F;demo&#x2F;dist&#x2F;;</span><br><span class="line">      index index.html;</span><br><span class="line">      try_files $uri $uri&#x2F; &#x2F;index.html;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="historyæ¨¡å¼ï¼ˆéæ ¹è·¯å¾„ï¼‰"><a href="#historyæ¨¡å¼ï¼ˆéæ ¹è·¯å¾„ï¼‰" class="headerlink" title="historyæ¨¡å¼ï¼ˆéæ ¹è·¯å¾„ï¼‰"></a>historyæ¨¡å¼ï¼ˆéæ ¹è·¯å¾„ï¼‰</h3><p><strong>nginx é…ç½®</strong>ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">http &#123;</span><br><span class="line">  server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name localhost;</span><br><span class="line">    location ^~ &#x2F;demo &#123;</span><br><span class="line">      alias &#x2F;data&#x2F;www&#x2F;demo&#x2F;dist&#x2F;;</span><br><span class="line">      index index.html;</span><br><span class="line">      try_files $uri $uri&#x2F; &#x2F;demo&#x2F;index.html;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>vue.config.jsé…ç½®</strong>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  publicPath: <span class="string">'/demo'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>routeré…ç½®</strong>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">  mode: <span class="string">'history'</span>,</span><br><span class="line">  base: <span class="string">'demo'</span>,</span><br><span class="line">  routes <span class="comment">// (ç¼©å†™) ç›¸å½“äº routes: routes</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h2><p>ä¸è¦æŠŠ<strong>æœ¯ä¸šæœ‰ä¸“æ”»</strong>ä½œä¸ºä¸æ„¿èµ°å‡ºèˆ’é€‚åœˆçš„å€Ÿå£ï¼Œä¸è¯¸å›å…±å‹‰ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å‰æ®µæ—¶é—´ï¼Œé¢è¯•ä¸€äº›å‰ç«¯åŒå­¦çš„æ—¶å€™ï¼Œå‘ç°å¤§éƒ¨åˆ†å¯¹å¼€å‘å®Œæˆä¹‹åçš„éƒ¨ç½²æµç¨‹éƒ½ä¸å¤ªäº†è§£ã€‚å¬åˆ°æœ€å¤šçš„å›ç­”ï¼Œéƒ½æ˜¯npm run buildä¹‹åäº¤ç»™åç«¯æˆ–è€…å‰ç«¯è´Ÿè´£äººå°±å¯ä»¥äº†ã€‚è™½ç„¶éƒ¨ç½²çš„è¿‡ç¨‹ä¸ä¸€å®šæœ‰æœºä¼šå‚ä¸ï¼Œä½†æ˜¯ä¸€å®šè¦åšåˆ°å¿ƒä¸­æœ‰æ•°ï¼Œä¸ç„¶æ€ä¹ˆèƒ½åšåˆ°è´Ÿè´£ä¸€æ•´ä¸ªå‰ç«¯é¡¹ç›®å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;è¶ç€æœ‰ç©ºï¼Œç®€å•å†™ä¸‹å‰ç«¯éƒ¨ç½²æ—¶å€™ç”¨åˆ°çš„æœ€åŸºç¡€çš„nginxé…ç½®å‚è€ƒã€‚è¿™é‡Œä»¥vueçš„spaé¡¹ç›®ä½œä¸ºä¾‹å­ã€‚&lt;/p&gt;
&lt;h2 id=&quot;é…ç½®åˆ†ç±»&quot;&gt;&lt;a href=&quot;#é…ç½®åˆ†ç±»&quot; class=&quot;headerlink&quot; title=&quot;é…ç½®åˆ†ç±»&quot;&gt;&lt;/a&gt;é…ç½®åˆ†ç±»&lt;/h2&gt;&lt;p&gt;æ ¹æ®vue-routerçš„modeï¼Œåˆ†æˆä¸¤ç§æƒ…å†µï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;hash&lt;/li&gt;
&lt;li&gt;history&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åŒæ—¶æ ¹æ®éƒ¨ç½²çš„è·¯å¾„ï¼Œä¹Ÿåˆ†æˆä¸¤ç§æƒ…å†µï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ ¹è·¯å¾„&lt;/li&gt;
&lt;li&gt;éæ ¹è·¯å¾„&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æˆ‘ä»¬å‡è®¾distæ–‡ä»¶å¤¹æ”¾åœ¨/data/www/demo/dist, server_nameæ˜¯localhostã€‚&lt;/p&gt;
    
    </summary>
    
    
    
      <category term="nginx" scheme="http://yoursite.com/tags/nginx/"/>
    
  </entry>
  
  <entry>
    <title>gulpç³»åˆ—ä¹‹undertakeræºç ç¬”è®°</title>
    <link href="http://yoursite.com/2020/01/13/gulp%E7%B3%BB%E5%88%97%E4%B9%8Bundertaker%E6%BA%90%E7%A0%81%E7%AC%94%E8%AE%B0/"/>
    <id>http://yoursite.com/2020/01/13/gulp%E7%B3%BB%E5%88%97%E4%B9%8Bundertaker%E6%BA%90%E7%A0%81%E7%AC%94%E8%AE%B0/</id>
    <published>2020-01-13T12:32:19.000Z</published>
    <updated>2020-01-29T10:59:34.338Z</updated>
    
    <content type="html"><![CDATA[<p>undertakeréƒ¨åˆ†çš„ä»£ç ï¼Œæ˜¯gulpä»»åŠ¡ç®¡ç†éƒ¨åˆ†çš„æ ¸å¿ƒæºç ã€‚åœ¨è®²è§£gulpæœ¬èº«ä»“åº“æºç ä¹‹å‰ï¼Œæˆ‘ç€é‡è®²è®²undertakerã€‚è¿™ä¸ªåº“è‡ªç„¶ä¹Ÿæ¶‰åŠåˆ°ä¸€äº›ä¾èµ–ï¼Œæ²¡å…³ç³»ï¼Œè¿™æ¬¡æˆ‘ä»¬å…³æ³¨undertakeræµç¨‹æœ¬èº«ã€‚</p><p>è¯·æ³¡å¥½ğŸµæˆ–è€…â˜•ï¸æ…¢æ…¢çœ‹ï¼Œè¿™ç¯‡æ–‡ç« ç¯‡å¹…è¾ƒé•¿ã€‚ç®—æ˜¯å›åº”æŸäº›æœ‹å‹å¯¹æˆ‘çš„åšå®¢æœŸå¾…å§ï¼Œä»–ä»¬è§‰å¾—æˆ‘ä¸€å¼€å§‹å†™çš„æ–‡ç« å¤ªæ°´äº†ã€‚</p><h2 id="undertakerç®€ä»‹"><a href="#undertakerç®€ä»‹" class="headerlink" title="undertakerç®€ä»‹"></a>undertakerç®€ä»‹</h2><p>undertakeræ˜¯gulpå›¢é˜Ÿå¼€å‘å‡ºæ¥ä¸ºè§£å†³gulpçš„ä»»åŠ¡æ‰§è¡Œé—®é¢˜çš„åº“ã€‚</p><blockquote><p>Task registry that allows composition through series/parallel methods.</p></blockquote><p>undertakeræä¾›serieså’Œparallelä¸¤ç§æ–¹æ³•è§£å†³ä»»åŠ¡æµç¨‹ç®¡ç†ã€‚seriesæ˜¯ä¸²è¡Œæ‰§è¡Œä»»åŠ¡ï¼Œparallelæ–¹æ³•æ˜¯å¹¶è¡Œæ‰§è¡Œä»»åŠ¡ã€‚ä¸²è¡Œæ‰§è¡Œåº”è¯¥æ¯”è¾ƒç®€å•ç†è§£ï¼Œå°±æ˜¯æŒ‰é¡ºåºæ‰§è¡Œï¼Œåªæœ‰å‰é¢çš„ä»»åŠ¡å®Œæˆï¼Œåé¢çš„ä»»åŠ¡æ‰èƒ½æ‰§è¡Œã€‚é‚£ä¹ˆå¹¶è¡Œå‘¢ï¼Ÿå¾ˆå¯èƒ½æ˜¯é€šè¿‡forå¾ªç¯æ‰§è¡Œæ‰€æœ‰å¼‚æ­¥ä»»åŠ¡ï¼Œè¿™æ ·å°±èƒ½å®ç°å¹¶è¡Œï¼Œè¿™ä¸ªç±»ä¼¼Promise.allæ–¹æ³•ã€‚</p><p>æˆ‘éå¸¸èµå¹undertakerçš„è®¾è®¡ï¼Œå¯èƒ½æ˜¯æˆ‘å¯¹ä»£ç æµç¨‹ç®¡ç†æœ¬èº«æ²¡æœ‰å¾ˆå¥½çš„æ€è·¯ï¼Œçœ‹äº†ä¹‹åè±ç„¶å¼€æœ—ã€‚æƒ³æƒ³javascriptï¼Œå¼‚æ­¥ä»£ç ä»callbackï¼Œå†™åˆ°promiseï¼Œå†™åˆ°generatorï¼Œå†™åˆ°async/awaitã€‚å¼‚æ­¥ä»£ç çš„ä¹¦å†™éšç€æ—¶é—´çš„æ¨ç§»å˜å¾—è¶Šæ¥è¶Šå‹å¥½ï¼Œä½†æ˜¯æ¯”å¦‚Promiseçš„å®ç°æ€æƒ³ï¼Œæ›´åŠ å€¼å¾—æˆ‘ä»¬å­¦ä¹ å’Œæ€è€ƒã€‚å›åˆ°undertakerï¼Œè¿™ä¸ªä»»åŠ¡ç®¡ç†çš„æ¡†æ¶ï¼Œå…¶å®å°±æ˜¯éå¸¸å‹å¥½åœ°è§£å†³äº†å¤„ç†ä¸²è¡Œæˆ–è€…å¹¶è¡Œä»»åŠ¡çš„ä»£ç ç»„ç»‡é—®é¢˜ã€‚é€šè¿‡undertakerä¹¦å†™çš„ä»£ç å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§éƒ½å¾ˆå¼ºã€‚</p><p>ä¹‹å‰å†™åˆ°å¤æ‚ä¸šåŠ¡æµç¨‹çš„æ—¶å€™ï¼Œä¸²è¡Œæˆ–è€…å¹¶è¡Œçš„æ—¶å€™ï¼Œç›´æ¥ç”¨Promiseï¼Œæ€»æ„Ÿè§‰æœ‰æ‰€æ¬ ç¼ºï¼Œç°åœ¨çœ‹äº†undertakerï¼Œæœ‰ä¸€ç§äº²åˆ‡çš„æ„Ÿè§‰ï¼Œé‚£å°±æ˜¯è¿™ç§å®ç°å°±æ˜¯æˆ‘å†™æµç¨‹ç®¡ç†éœ€è¦çš„éå¸¸å¥½çš„å®è·µæ¨¡æ¿ã€‚</p><a id="more"></a><h2 id="undertakerç”¨æ³•"><a href="#undertakerç”¨æ³•" class="headerlink" title="undertakerç”¨æ³•"></a>undertakerç”¨æ³•</h2><h3 id="ç”¨æ³•"><a href="#ç”¨æ³•" class="headerlink" title="ç”¨æ³•"></a>ç”¨æ³•</h3><p>è¿™é‡Œå°±ä¸åºŸè¯äº†ï¼Œç›´æ¥å¤åˆ¶undertakerçš„readme:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"><span class="keyword">var</span> Undertaker = <span class="built_in">require</span>(<span class="string">'undertaker'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> taker = <span class="keyword">new</span> Undertaker();</span><br><span class="line"></span><br><span class="line">taker.task(<span class="string">'task1'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">cb</span>)</span>&#123;</span><br><span class="line">  <span class="comment">// do things</span></span><br><span class="line"></span><br><span class="line">  cb(); <span class="comment">// when everything is done</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">taker.task(<span class="string">'task2'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> fs.createReadStream(<span class="string">'./myFile.js'</span>)</span><br><span class="line">    .pipe(fs.createWriteStream(<span class="string">'./myFile.copy.js'</span>));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">taker.task(<span class="string">'task3'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// do things</span></span><br><span class="line"></span><br><span class="line">    resolve(); <span class="comment">// when everything is done</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">taker.task(<span class="string">'combined'</span>, taker.series(<span class="string">'task1'</span>, <span class="string">'task2'</span>));</span><br><span class="line"></span><br><span class="line">taker.task(<span class="string">'all'</span>, taker.parallel(<span class="string">'combined'</span>, <span class="string">'task3'</span>));</span><br></pre></td></tr></table></figure><p>åœ¨åˆ†ææºç ä¹‹å‰ï¼Œæˆ‘ç®€å•ä»ç”¨æ³•è¿™é‡Œè¯´è¯´undertakerã€‚</p><p>ç®€å•æ€»ç»“æ–¹æ³•å¦‚ä¸‹ï¼š</p><ul><li>Undertaker.task</li><li>Undertaker.series</li><li>Undertaker.parallel</li></ul><p>Undertaker.taskçœ‹ä¸Šå»æ˜¯æ³¨å†Œtaskï¼Œæ¯ä¸ªtask nameå¯¹åº”ä¸€ä¸ªéœ€è¦æ‰§è¡Œçš„æ–¹æ³•ã€‚åŒæ—¶ï¼ŒUndertaker.taskåº”è¯¥ä¹Ÿä¼šè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œä»¥ä¾›å…¶åµŒå¥—ä½¿ç”¨ã€‚Undertaker.serieså’ŒUndertaker.parallelå°±ä»åå­—ä¸Šå¯ä»¥çœ‹å‡ºæ˜¯ä¸²è¡Œå’Œå¹¶è¡Œæ‰§è¡Œä»»åŠ¡çš„æ–¹æ³•ï¼ŒåŒæ—¶ä¹Ÿæ¨æ–­å‡ºä¼šè¿”å›ä¸€ä¸ªå‡½æ•°ã€‚</p><h3 id="æ‰©å±•"><a href="#æ‰©å±•" class="headerlink" title="æ‰©å±•"></a>æ‰©å±•</h3><p>æ—¢ç„¶å¯¹äºç”¨æ³•æˆ‘åšäº†ç®€å•çš„åˆ†æï¼Œä¹Ÿç¨å¾®æ‰©å±•ä¸€ä¸‹æºç é˜…è¯»çš„é—®é¢˜ã€‚ä¸“æ³¨undertakeræºç è§£æçš„åŒå­¦å¯ä»¥<strong>è·³è¿‡</strong>è¿™éƒ¨åˆ†ã€‚</p><p>æœ‰åŒäº‹ä¸ä¹…å‰é—®æˆ‘ï¼Œéœ€è¦æ€ä¹ˆé˜…è¯»æºä»£ç ã€‚å…¶å®è¿™ä¸ªæ–¹æ³•å› äººè€Œå¼‚ï¼Œæ¯ä¸ªäººåœ¨æ¢ç´¢çš„è¿‡ç¨‹ä¸­è‚¯å®šéƒ½ä¼šå¾—å‡ºé€‚åˆè‡ªå·±çš„æ–¹æ³•ã€‚æˆ‘çš„æ–¹æ³•å°±æ˜¯å…ˆæ ¹æ®apiæˆ–è€…è¯´usageå»æ£æµ‹è¿™ä¸ªåº“çš„å¯èƒ½å®ç°ï¼Œå°¤å…¶å…³æ³¨å‚æ•°å’Œè¾“å‡ºã€‚</p><p>é€šè¿‡è‡ªå·±çš„æ€è€ƒåæ¨å®ç°ï¼Œæ˜¯ä¸€ä¸ªéå¸¸å¥½çš„æ€ç»´é”»ç‚¼è¿‡ç¨‹ã€‚ä½ å¯èƒ½ä¼šå‘ç°è‡ªå·±èƒ½çŒœæµ‹å‡ºå¤§æ¦‚çš„å®ç°æ€è·¯ï¼Œåˆæˆ–è€…æ¯«æ— å¤´ç»ªï¼Œè¿™ä¸ªå‰ç½®çš„æ€è€ƒå’Œé¢„ä¹ åŠŸè¯¾æœ‰ç€ç±»ä¼¼çš„åŠŸæ•ˆï¼Œå°±æ˜¯èƒ½å¸®ä½ å¾ˆå¥½çš„è¡”æ¥å®é™…é˜…è¯»æºç è¿‡ç¨‹ä¸­çš„æ€ç´¢ã€‚</p><p>ä¹Ÿæœ‰åŒäº‹æ›¾ç»é—®æˆ‘ï¼Œå¦‚æœæœ‰å¾ˆå¤šä¾èµ–ï¼Œè¦æ€ä¹ˆé˜…è¯»æºç ï¼Ÿè¿™ä¸ªå…¶å®æ˜¯é˜…è¯»æºç è¿‡ç¨‹ä¸­è‚¯å®šä¼šé‡åˆ°çš„é—®é¢˜ï¼Œè¿™ä¸ªå¾ˆç®€å•ï¼Œç›´æ¥å»ä¾èµ–åŒ…ä¸­çœ‹readmeï¼Œäº†è§£ç®€ä»‹çŸ¥é“å®ƒåšä»€ä¹ˆå°±è¶³å¤Ÿäº†ï¼Œç„¶åæ³¨æ„åŠ›é›†ä¸­åœ¨ä¸»æµç¨‹ã€‚å¦‚æœä¸»æµç¨‹çš„å…³é”®ä»£ç å°±åœ¨ä¾èµ–ä¸­ï¼Œé‚£ä¹Ÿå¾ˆç®€å•å•Šï¼Œçœ‹ä¾èµ–çš„æºç å°±å®Œäº‹äº†ã€‚å¦‚æœä¾èµ–å¤šåˆ°è®°ä¸æ¸…æ¯ä¸ªä¾èµ–æ˜¯åšä»€ä¹ˆçš„ï¼Œé‚£ä½ åˆæƒ³ç ”ç©¶ï¼Œå°±åšä¸€ä¸ªè¡¨æ ¼æŠŠæ ¸å¿ƒä¾èµ–çš„æè¿°éƒ½ç™»è®°èµ·æ¥ç”¨æ¥æŸ¥è¯¢å°±å¥½ã€‚</p><h2 id="undertakerä¸»æµç¨‹åˆ†æ"><a href="#undertakerä¸»æµç¨‹åˆ†æ" class="headerlink" title="undertakerä¸»æµç¨‹åˆ†æ"></a>undertakerä¸»æµç¨‹åˆ†æ</h2><h3 id="ç›®å½•"><a href="#ç›®å½•" class="headerlink" title="ç›®å½•"></a>ç›®å½•</h3><p>è€åŠæ³•ï¼Œå…ˆçœ‹çœ‹ç›®å½•ç»“æ„ã€‚æ³¨ï¼šä¸ºäº†æ–¹ä¾¿é˜…è¯»ï¼Œç›´æ¥å–node_modulesé‡Œé¢çš„ä¾èµ–ä»£ç ï¼Œå¿½ç•¥testæ–‡ä»¶ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;node_modules&#x2F;undertaker</span><br><span class="line">â”œâ”€â”€ LICENSE</span><br><span class="line">â”œâ”€â”€ README.md</span><br><span class="line">â”œâ”€â”€ index.js</span><br><span class="line">â”œâ”€â”€ lib</span><br><span class="line">â”‚   â”œâ”€â”€ get-task.js</span><br><span class="line">â”‚   â”œâ”€â”€ helpers</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ buildTree.js</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ createExtensions.js</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ metadata.js</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ normalizeArgs.js</span><br><span class="line">â”‚   â”‚   â””â”€â”€ validateRegistry.js</span><br><span class="line">â”‚   â”œâ”€â”€ last-run.js</span><br><span class="line">â”‚   â”œâ”€â”€ parallel.js</span><br><span class="line">â”‚   â”œâ”€â”€ registry.js</span><br><span class="line">â”‚   â”œâ”€â”€ series.js</span><br><span class="line">â”‚   â”œâ”€â”€ set-task.js</span><br><span class="line">â”‚   â”œâ”€â”€ task.js</span><br><span class="line">â”‚   â””â”€â”€ tree.js</span><br><span class="line">â””â”€â”€ package.json</span><br><span class="line"></span><br><span class="line">2 directories, 17 files</span><br></pre></td></tr></table></figure><p>ä»apiå‡ºå‘ï¼Œæˆ‘å°±å¾ˆå¿«æ‰¾åˆ°äº†æˆ‘æ„Ÿå…´è¶£çš„æ–‡ä»¶ã€‚</p><ul><li>set-task.js</li><li>get-task.js</li><li>task.js</li><li>parallel.js</li><li>series.js</li></ul><p>æ–‡ä»¶å¾ˆå¤šï¼Œä½†æ˜¯æˆ‘å¤§èƒ†çŒœæµ‹ä¸Šé¢äº”ä¸ªæ–‡ä»¶æ˜¯æˆ‘éœ€è¦é‡ç‚¹å…³æ³¨çš„ï¼Œå…¶ä»–æ–‡ä»¶éƒ½æ˜¯è¾…åŠ©å‚è€ƒã€‚åæ­£çŒœé”™äº†ä¹Ÿä¸äºï¼ŒğŸ˜„ã€‚</p><h3 id="å…¥å£æ–‡ä»¶-index-js"><a href="#å…¥å£æ–‡ä»¶-index-js" class="headerlink" title="å…¥å£æ–‡ä»¶(index.js)"></a>å…¥å£æ–‡ä»¶(index.js)</h3><p>çŒœæµ‹å½’çŒœæµ‹ï¼Œå­¦ä¹ è¿˜æ˜¯å¾—è€è€å®å®ä»å…¥å£æ–‡ä»¶çœ‹èµ·ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> inherits = <span class="built_in">require</span>(<span class="string">'util'</span>).inherits;</span><br><span class="line"><span class="keyword">var</span> EventEmitter = <span class="built_in">require</span>(<span class="string">'events'</span>).EventEmitter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> DefaultRegistry = <span class="built_in">require</span>(<span class="string">'undertaker-registry'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> tree = <span class="built_in">require</span>(<span class="string">'./lib/tree'</span>);</span><br><span class="line"><span class="keyword">var</span> task = <span class="built_in">require</span>(<span class="string">'./lib/task'</span>);</span><br><span class="line"><span class="keyword">var</span> series = <span class="built_in">require</span>(<span class="string">'./lib/series'</span>);</span><br><span class="line"><span class="keyword">var</span> lastRun = <span class="built_in">require</span>(<span class="string">'./lib/last-run'</span>);</span><br><span class="line"><span class="keyword">var</span> parallel = <span class="built_in">require</span>(<span class="string">'./lib/parallel'</span>);</span><br><span class="line"><span class="keyword">var</span> registry = <span class="built_in">require</span>(<span class="string">'./lib/registry'</span>);</span><br><span class="line"><span class="keyword">var</span> _getTask = <span class="built_in">require</span>(<span class="string">'./lib/get-task'</span>);</span><br><span class="line"><span class="keyword">var</span> _setTask = <span class="built_in">require</span>(<span class="string">'./lib/set-task'</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Undertaker</span>(<span class="params">customRegistry</span>) </span>&#123;</span><br><span class="line">  EventEmitter.call(<span class="keyword">this</span>); <span class="comment">// ç»§æ‰¿EventEmitter</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">this</span>._registry = <span class="keyword">new</span> DefaultRegistry(); <span class="comment">// çŒœæµ‹æ˜¯å­˜å‚¨tasksçš„å¯¹è±¡</span></span><br><span class="line">  <span class="keyword">if</span> (customRegistry) &#123; <span class="comment">// å¦‚æœæœ‰customRegistryï¼Œåº”ç”¨customRegistry</span></span><br><span class="line">    <span class="keyword">this</span>.registry(customRegistry);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">this</span>._settle = (process.env.UNDERTAKER_SETTLE === <span class="string">'true'</span>); <span class="comment">// å§‘ä¸”çœ‹ä½œæŸä¸ªå«åšUNDERTAKER_SETTLEçš„å¼€å…³ï¼Œå…·ä½“ä½œç”¨è¦çœ‹åé¢çš„æºç </span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">inherits(Undertaker, EventEmitter); <span class="comment">// ç»§æ‰¿EventEmitteråŸå‹é“¾æ–¹æ³•</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Undertaker.prototype.tree = tree;</span><br><span class="line"></span><br><span class="line">Undertaker.prototype.task = task;</span><br><span class="line"></span><br><span class="line">Undertaker.prototype.series = series;</span><br><span class="line"></span><br><span class="line">Undertaker.prototype.lastRun = lastRun;</span><br><span class="line"></span><br><span class="line">Undertaker.prototype.parallel = parallel;</span><br><span class="line"></span><br><span class="line">Undertaker.prototype.registry = registry;</span><br><span class="line"></span><br><span class="line">Undertaker.prototype._getTask = _getTask;</span><br><span class="line"></span><br><span class="line">Undertaker.prototype._setTask = _setTask;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = Undertaker;</span><br></pre></td></tr></table></figure><p>å…¥å£æ–‡ä»¶æ¥çœ‹</p><ol><li>Undertakerç»§æ‰¿è‡ªEventEmitter</li><li>åŒæ—¶å†…éƒ¨æœ‰ä¸€ä¸ª_registryå¯¹è±¡ï¼ˆå¯ä»¥è‡ªå®šä¹‰ï¼ŒçŒœæµ‹æ˜¯ç”¨æ¥å­˜å‚¨tasksçš„å¯¹è±¡)</li><li>prototypeä¸Šé¢ç»‘å®šäº†å¾ˆå¤šæ–¹æ³•æˆ–è€…å±æ€§ï¼Œè¿˜æ˜¯æŒ‰ç…§apiå€’æ¨çš„æ–¹æ³•ï¼Œæˆ‘æŒ‘é€‰task, _getTask, _setTask, series, parallelé‡ç‚¹å…³æ³¨</li></ol><h3 id="task-lib-task-js"><a href="#task-lib-task-js" class="headerlink" title="task(lib/task.js)"></a>task(lib/task.js)</h3><p>é¦–å…ˆçœ‹çœ‹è¿™ä¸ªtaskï¼Œåˆ°åº•æ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">task</span>(<span class="params">name, fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> name === <span class="string">'function'</span>) &#123; <span class="comment">// å¦‚æœå‚æ•°åªæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè‡ªåŠ¨è·å–Function.displayNameæˆ–è€…Function.nameä½œä¸ºname</span></span><br><span class="line">    fn = name;</span><br><span class="line">    name = fn.displayName || fn.name;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!fn) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>._getTask(name); <span class="comment">// å¦‚æœå‚æ•°æ²¡æœ‰ä¼ å…¥fnï¼Œç”¨_getTaskè·å–name</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">this</span>._setTask(name, fn); <span class="comment">// å¦‚æœnameå’Œfnéƒ½æœ‰ï¼Œé‚£ä¹ˆç”¨_setTaskè®¾ç½®ï¼Œä¼°è®¡æ˜¯å­˜å‚¨åˆ°registryå¯¹è±¡</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = task;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ä¸€ä¸‹ï¼Œtaskæ–¹æ³•å…¶å®å°±æ˜¯å°è£…äº†Undertaker.prototype._getTaskå’ŒUndertaker.prototype._setTaskæ–¹æ³•ã€‚</p><h3 id="get-task-lib-get-task-js"><a href="#get-task-lib-get-task-js" class="headerlink" title="get-task(lib/get-task.js)"></a>get-task(lib/get-task.js)</h3><p>ç»§ç»­çœ‹çœ‹è¿™ä¸ªget-taskï¼ŒğŸ‘Œï¼Œçœ‹åå­—ï¼Œå¤§å®¶åº”è¯¥éƒ½çŒœå¾—åˆ°å¤§æ¦‚äº†ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>._registry.get(name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="keyword">get</span>;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå°±ä¸ç”¨è§£é‡Šäº†ï¼Œå’ŒçŒœæƒ³ä¸€è‡´ï¼Œ_registryæ˜¯ç”¨æ¥å­˜å‚¨tasksçš„å¯¹è±¡ã€‚_getTaskå°±æ˜¯è·å–å¯¹åº”çš„taskã€‚</p><h3 id="set-task-lib-set-task-js"><a href="#set-task-lib-set-task-js" class="headerlink" title="set-task(lib/set-task.js)"></a>set-task(lib/set-task.js)</h3><p>é¡ºåŠ¿çœ‹åˆ°set-taskï¼Œè€å¿ƒç‚¹ç»§ç»­çœ‹çœ‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> assert = <span class="built_in">require</span>(<span class="string">'assert'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> metadata = <span class="built_in">require</span>(<span class="string">'./helpers/metadata'</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">set</span>(<span class="params">name, fn</span>) </span>&#123;</span><br><span class="line">  assert(name, <span class="string">'Task name must be specified'</span>); <span class="comment">// å‚æ•°æ£€éªŒ</span></span><br><span class="line">  assert(<span class="keyword">typeof</span> name === <span class="string">'string'</span>, <span class="string">'Task name must be a string'</span>); <span class="comment">// å‚æ•°æ£€éªŒ</span></span><br><span class="line">  assert(<span class="keyword">typeof</span> fn === <span class="string">'function'</span>, <span class="string">'Task function must be specified'</span>); <span class="comment">// å‚æ•°æ£€éªŒ</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">taskWrapper</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> fn.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>); <span class="comment">// æ‰§è¡Œtaskï¼Œç»‘å®šthis, æ‰§è¡ŒtaskWrapperï¼Œç­‰äºæ‰§è¡Œç»‘å®šäº†å½“å‰ä¸Šä¸‹æ–‡çš„fn</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">unwrap</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> fn; <span class="comment">// ç›´æ¥è¿”å›fn</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  taskWrapper.unwrap = unwrap; <span class="comment">// æŠŠunwrapç»‘å®šåˆ°taskWrapperå‡½æ•°çš„å±æ€§</span></span><br><span class="line">  taskWrapper.displayName = name; <span class="comment">// æŠŠnameç»‘å®šåˆ°taskWrapperçš„displayNameå±æ€§ã€‚ä¸è¿‡ç°åœ¨displayNameå·²ç»æ˜¯éæ ‡å‡†çš„å±æ€§äº†ï¼Œhttps://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/displayName</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> meta = metadata.get(fn) || &#123;&#125;; <span class="comment">// å’‹ä¸€çœ‹ä¸çŸ¥é“å¹²å•¥çš„ï¼Œä¸æ€•ï¼Œæˆ‘ç›´æ¥è·³è¿‡</span></span><br><span class="line">  <span class="keyword">var</span> nodes = []; <span class="comment">// å’‹ä¸€çœ‹ä¸çŸ¥é“å¹²å•¥çš„ï¼Œä¸æ€•ï¼Œæˆ‘ç›´æ¥è·³è¿‡</span></span><br><span class="line">  <span class="keyword">if</span> (meta.branch) &#123;</span><br><span class="line">    nodes.push(meta.tree); <span class="comment">// // å’‹ä¸€çœ‹ä¸çŸ¥é“å¹²å•¥çš„ï¼Œä¸æ€•ï¼Œæˆ‘ç›´æ¥è·³è¿‡</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> task = <span class="keyword">this</span>._registry.set(name, taskWrapper) || taskWrapper; <span class="comment">// é€šè¿‡_registryè®¾ç½®nameå±æ€§ä¸ºtaskWrapperï¼Œå¦‚æœè¿”å›ä¸ºç©ºï¼Œtaskä½¿ç”¨taskWrapperæ›¿ä»£</span></span><br><span class="line"></span><br><span class="line">  metadata.set(task, &#123;</span><br><span class="line">    name: name,</span><br><span class="line">    orig: fn,</span><br><span class="line">    tree: &#123;</span><br><span class="line">      label: name,</span><br><span class="line">      type: <span class="string">'task'</span>,</span><br><span class="line">      nodes: nodes,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;); <span class="comment">// å’‹ä¸€çœ‹ä¸çŸ¥é“å¹²å•¥çš„ï¼Œä¸æ€•ï¼Œæˆ‘ç›´æ¥è·³è¿‡ã€‚ä½†æ˜¯æˆ‘å¯ä»¥çŒœæµ‹metadataæ˜¯ä¿å­˜ä¸€äº›å…ƒæ•°æ®ä¿¡æ¯ï¼Œå§‘ä¸”çŒœæµ‹æ˜¯ç”¨æ¥è·å–taskä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="keyword">set</span>;</span><br></pre></td></tr></table></figure><p>_setTaskæ–¹æ³•ç¨å¾®å¤æ‚ä¸€ç‚¹ï¼Œå¤šäº†metadataç›¸å…³çš„ä¸œè¥¿ã€‚ä¸çŸ¥é“å…·ä½“åšä»€ä¹ˆçš„ï¼Œæ²¡ä»€ä¹ˆå…³ç³»ï¼Œä¸å½±å“æˆ‘ä»¬ä¸“æ³¨çœ‹è‡ªå·±æ„Ÿå…´è¶£çš„ä¸»æµç¨‹ã€‚æ•²é»‘æ¿ï¼Œçœ‹æºç çœ‹åˆ°å¤§æ¦‚ç‡æ˜¯åˆ†æ”¯æµç¨‹çš„ä¸œè¥¿ï¼Œåƒä¸‡åˆ«æ…Œï¼Œå¤§æ¦‚ç‡æ˜¯å¯ä»¥ä¸å…³æ³¨ä¹Ÿä¸å½±å“ä¸»æµç¨‹çš„å†…å®¹ã€‚</p><h3 id="series-lib-series-js"><a href="#series-lib-series-js" class="headerlink" title="series(lib/series.js)"></a>series(lib/series.js)</h3><p>å¥½çš„ï¼Œæ€»ç®—æ¥åˆ°æ ¸å¿ƒä»£ç éƒ¨åˆ†ã€‚è¯ä¸å¤šè¯´ï¼Œçœ‹ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> bach = <span class="built_in">require</span>(<span class="string">'bach'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> metadata = <span class="built_in">require</span>(<span class="string">'./helpers/metadata'</span>);</span><br><span class="line"><span class="keyword">var</span> buildTree = <span class="built_in">require</span>(<span class="string">'./helpers/buildTree'</span>);</span><br><span class="line"><span class="keyword">var</span> normalizeArgs = <span class="built_in">require</span>(<span class="string">'./helpers/normalizeArgs'</span>);</span><br><span class="line"><span class="keyword">var</span> createExtensions = <span class="built_in">require</span>(<span class="string">'./helpers/createExtensions'</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">series</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> create = <span class="keyword">this</span>._settle ? bach.settleSeries : bach.series; <span class="comment">// æ ¹æ®UNDERTAKER_SETTLEå¼€å…³é€‰æ‹©createå‡½æ•°ï¼Œè¿™é‡Œæ¶‰åŠåˆ°bachåº“ï¼Œçœ‹ä¸Šå»seriesçš„æ ¸å¿ƒæ–¹æ³•å’Œå®ƒæœ‰å…³ï¼Œæ€ä¹ˆåŠï¼Ÿå¾…ä¼šç›´æ¥ç¿»å‡ºæ¥çœ‹ã€‚</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> args = normalizeArgs(<span class="keyword">this</span>._registry, <span class="built_in">arguments</span>); <span class="comment">// å°†argumentsæ‰å¹³åŒ–ä¹‹åè·å–å¯¹åº”çš„task functionã€‚helpersé‡Œé¢çš„æºç æ¯”è¾ƒç®€å•ï¼Œä¸ç»†è®²ã€‚</span></span><br><span class="line">  <span class="keyword">var</span> extensions = createExtensions(<span class="keyword">this</span>); <span class="comment">// åˆ›å»ºæ‰©å±•ï¼ŒåŒ…å«create, before, after, errorç”Ÿå‘½å‘¨æœŸæ–¹æ³•</span></span><br><span class="line">  <span class="keyword">var</span> fn = create(args, extensions); <span class="comment">// å¾…ä¼šè®²è§£bachçš„æ—¶å€™åˆ†æcreateæ–¹æ³•</span></span><br><span class="line">  <span class="keyword">var</span> name = <span class="string">'&lt;series&gt;'</span>;</span><br><span class="line"></span><br><span class="line">  metadata.set(fn, &#123; <span class="comment">// å’‹ä¸€çœ‹ä¸çŸ¥é“å¹²å•¥çš„ï¼Œä¸æ€•ï¼Œæˆ‘ç›´æ¥è·³è¿‡ã€‚ä½†æ˜¯æˆ‘å¯ä»¥çŒœæµ‹metadataæ˜¯ä¿å­˜ä¸€äº›å…ƒæ•°æ®ä¿¡æ¯ã€‚</span></span><br><span class="line">    name: name,</span><br><span class="line">    branch: <span class="literal">true</span>,</span><br><span class="line">    tree: &#123;</span><br><span class="line">      label: name,</span><br><span class="line">      type: <span class="string">'function'</span>,</span><br><span class="line">      branch: <span class="literal">true</span>,</span><br><span class="line">      nodes: buildTree(args),</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> fn; <span class="comment">// è¿”å›createä¹‹åçš„å‡½æ•°</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = series;</span><br></pre></td></tr></table></figure><h3 id="bachåº“"><a href="#bachåº“" class="headerlink" title="bachåº“"></a>bachåº“</h3><p>OKï¼Œæˆ‘ä»¬çœ‹æºç åˆ°seriesæ–¹æ³•çš„æ—¶å€™ï¼Œå‘ç°è¢«bachåº“çš„æºç é˜»å¡äº†ï¼Œè€Œä¸”æ˜¾ç„¶æ˜¯æ ¸å¿ƒé€»è¾‘ã€‚ä¸ç”¨çŠ¹è±«ï¼Œç›´æ¥æ·±å…¥è¿›å…¥äº†è§£ä¸‹åŸç†ã€‚ä»èŠ‚å¥ä¸Šæ¥è¯´ï¼Œè¿™éƒ¨åˆ†åˆ†æç†åº”æ‹†å¤šä¸€ç¯‡æ–‡ç« ã€‚ä½†æ˜¯ä¸ºäº†åˆ†äº«è‡ªå·±é˜…è¯»æºç æ—¶å€™çš„æ€è·¯å’Œç»†èŠ‚ï¼Œä¸å¦¨ç›´æ¥è´¯ç©¿ä¸‹æ¥ã€‚</p><p>åŒæ ·çš„ï¼Œæˆ‘ä»¬çœ‹ä¸‹bachçš„ç®€ä»‹å’Œç”¨æ³•ï¼š</p><blockquote><p>Compose your async functions with elegance.</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> bach = <span class="built_in">require</span>(<span class="string">'bach'</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn1</span>(<span class="params">cb</span>) </span>&#123;</span><br><span class="line">  cb(<span class="literal">null</span>, <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn2</span>(<span class="params">cb</span>) </span>&#123;</span><br><span class="line">  cb(<span class="literal">null</span>, <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn3</span>(<span class="params">cb</span>) </span>&#123;</span><br><span class="line">  cb(<span class="literal">null</span>, <span class="number">3</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> seriesFn = bach.series(fn1, fn2, fn3);</span><br><span class="line"><span class="comment">// fn1, fn2, and fn3 will be run in series</span></span><br><span class="line">seriesFn(<span class="function"><span class="keyword">function</span>(<span class="params">err, res</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123; <span class="comment">// in this example, err is undefined</span></span><br><span class="line">    <span class="comment">// handle error</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// handle results</span></span><br><span class="line">  <span class="comment">// in this example, res is [1, 2, 3]</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> parallelFn = bach.parallel(fn1, fn2, fn3);</span><br><span class="line"><span class="comment">// fn1, fn2, and fn3 will be run in parallel</span></span><br><span class="line">parallelFn(<span class="function"><span class="keyword">function</span>(<span class="params">err, res</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123; <span class="comment">// in this example, err is undefined</span></span><br><span class="line">    <span class="comment">// handle error</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// handle results</span></span><br><span class="line">  <span class="comment">// in this example, res is [1, 2, 3]</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>å…¶å®çœ‹äº†ç®€ä»‹å’Œç”¨æ³•å°±çŸ¥é“äº†ï¼Œbachå°±æ˜¯è´Ÿè´£undertakerçš„ä»»åŠ¡ä¸²è¡Œæˆ–è€…å¹¶è¡Œæ‰§è¡Œçš„æ ¸å¿ƒåº“ã€‚</p><p>æ¥ä¸‹æ¥çœ‹çœ‹ç›®å½•ç»“æ„ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;node_modules&#x2F;bach</span><br><span class="line">â”œâ”€â”€ LICENSE</span><br><span class="line">â”œâ”€â”€ README.md</span><br><span class="line">â”œâ”€â”€ index.js</span><br><span class="line">â”œâ”€â”€ lib</span><br><span class="line">â”‚   â”œâ”€â”€ helpers.js</span><br><span class="line">â”‚   â”œâ”€â”€ parallel.js</span><br><span class="line">â”‚   â”œâ”€â”€ series.js</span><br><span class="line">â”‚   â”œâ”€â”€ settleParallel.js</span><br><span class="line">â”‚   â””â”€â”€ settleSeries.js</span><br><span class="line">â””â”€â”€ package.json</span><br><span class="line"></span><br><span class="line">1 directory, 9 files</span><br></pre></td></tr></table></figure><p>å…¥å£æ–‡ä»¶å°±ä¸è¯´äº†ï¼Œåªæ˜¯æš´éœ²libé‡Œé¢çš„å‡½æ•°ã€‚<br>æˆ‘ä»¬å…ˆè®²series.jså’ŒsettleSeries.jsï¼Œè¿™ä¸ªå’Œå‰é¢çš„series(lib/series.js)å…³è”æœ€å¤§ã€‚</p><p>series.jså¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> initial = <span class="built_in">require</span>(<span class="string">'array-initial'</span>);</span><br><span class="line"><span class="keyword">var</span> last = <span class="built_in">require</span>(<span class="string">'array-last'</span>);</span><br><span class="line"><span class="keyword">var</span> asyncDone = <span class="built_in">require</span>(<span class="string">'async-done'</span>);</span><br><span class="line"><span class="keyword">var</span> nowAndLater = <span class="built_in">require</span>(<span class="string">'now-and-later'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> helpers = <span class="built_in">require</span>(<span class="string">'./helpers'</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">iterator</span>(<span class="params">fn, key, cb</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> asyncDone(fn, cb); <span class="comment">// é€šè¿‡callbackæ–¹å¼ç»Ÿä¸€å¤„ç†å¼‚æ­¥å‡½æ•°</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">buildSeries</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> args = helpers.verifyArguments(<span class="built_in">arguments</span>); <span class="comment">// éªŒè¯arguments</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> extensions = helpers.getExtensions(last(args)); <span class="comment">// è·å–extensionså‚æ•°</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (extensions) &#123;</span><br><span class="line">    args = initial(args); <span class="comment">// å¦‚æœæœ‰extensionsï¼Œargumentsä¸ºæ’é™¤extensionsçš„é‚£äº›</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">series</span>(<span class="params">done</span>) </span>&#123;</span><br><span class="line">    nowAndLater.mapSeries(args, iterator, extensions, done); <span class="comment">// é€šè¿‡nowAndLaterçœŸæ­£å®ç°seriesä¸²è¡Œæ‰§è¡Œ</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> series; <span class="comment">// è¿”å›seriesä¾›ä½¿ç”¨</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = buildSeries;</span><br></pre></td></tr></table></figure><p>é€šè¿‡é˜…è¯»series.jsæ–¹æ³•ï¼Œå‘ç°ç¦»seriesä¸²è¡Œæ‰§è¡Œçš„è°œåº•è¿˜æ˜¯éš”ç€ä¸€å±‚nowAndLaterçš„é¢çº±ã€‚ä¸çŸ¥é“ä½ æœ‰æ²¡æœ‰è§‰å¾—è¦å¤±å»ä¿¡å¿ƒäº†ï¼Œæˆ‘åæ­£æ˜¯æ²¡æœ‰ï¼Œå› ä¸ºè¿˜æ²¡æ‰“ç ´æ²™é”…é—®åˆ°åº•ï¼Œä¸èƒ½è½»æ˜“æ”¾å¼ƒã€‚æˆ‘é˜…è¯»æºç çš„è¿‡ç¨‹å¦‚ä»Šåœ¨è¿™é‡Œåˆ†äº«å‡ºæ¥ï¼Œå¸¦ä½ å…‹æœå†…å¿ƒææƒ§ã€‚å’¬å’¬ç‰™ï¼Œç»§ç»­çœ‹çœ‹nowAndLateræ˜¯ä½•æ–¹ç¥åœ£ã€‚</p><h3 id="now-and-lateråº“"><a href="#now-and-lateråº“" class="headerlink" title="now-and-lateråº“"></a>now-and-lateråº“</h3><p>äº‹åˆ°å¦‚ä»Šï¼Œå·²ç»ä¸æƒ³çœ‹nowAndLaterçš„ç®€ä»‹äº†ï¼Œæˆ‘åªçŸ¥é“ï¼Œä»–çš„mapSerieså’Œseriesçš„è°œåº•å¾ˆé è¿‘äº†é¢ï¼Œè®©æˆ‘ä»¬ç›´æ¥çœ‹çœ‹mapSeries.jsçš„ä»£ç ç»“æŸæˆ˜æ–—ï¼</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> once = <span class="built_in">require</span>(<span class="string">'once'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> helpers = <span class="built_in">require</span>(<span class="string">'./helpers'</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">mapSeries</span>(<span class="params">values, iterator, extensions, done</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// Allow for extensions to not be specified</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> extensions === <span class="string">'function'</span>) &#123;</span><br><span class="line">    done = extensions;</span><br><span class="line">    extensions = &#123;&#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Handle no callback case</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> done !== <span class="string">'function'</span>) &#123;</span><br><span class="line">    done = helpers.noop;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  done = once(done);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Will throw if non-object</span></span><br><span class="line">  <span class="keyword">var</span> keys = <span class="built_in">Object</span>.keys(values); <span class="comment">// è·å–valuesçš„keyå€¼æ•°ç»„</span></span><br><span class="line">  <span class="keyword">var</span> length = keys.length;</span><br><span class="line">  <span class="keyword">var</span> idx = <span class="number">0</span>;</span><br><span class="line">  <span class="comment">// Return the same type as passed in</span></span><br><span class="line">  <span class="keyword">var</span> results = helpers.initializeResults(values); <span class="comment">// åˆå§‹åŒ–result</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> exts = helpers.defaultExtensions(extensions); <span class="comment">// è·å–ç”Ÿå‘½å‘¨æœŸç›¸å…³çš„é›†åˆ</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (length === <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> done(<span class="literal">null</span>, results);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> key = keys[idx]; <span class="comment">// é€’å½’å¼€å§‹çš„key</span></span><br><span class="line">  next(key); <span class="comment">// å¼€å§‹æ‰§è¡Œnext</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">next</span>(<span class="params">key</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> value = values[key]; <span class="comment">// è·å–å½“å‰value</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> storage = exts.create(value, key) || &#123;&#125;; <span class="comment">// æ‰§è¡Œextsçš„createç”Ÿå‘½å‘¨æœŸ</span></span><br><span class="line"></span><br><span class="line">    exts.before(storage); <span class="comment">// æ‰§è¡Œextsçš„beforeçš„ç”Ÿå‘½å‘¨æœŸ</span></span><br><span class="line">    iterator(value, key, once(handler)); <span class="comment">//æ‰§è¡Œiteratorï¼ŒåŒæ—¶ä¼ é€’åªæ‰§è¡Œä¸€æ¬¡çš„handlerä½œä¸ºå›è°ƒ</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">handler</span>(<span class="params">err, result</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        exts.error(err, storage); <span class="comment">// å¦‚æœæŠ¥é”™ï¼Œæ‰§è¡Œerrorçš„ç”Ÿå‘½å‘¨æœŸ</span></span><br><span class="line">        <span class="keyword">return</span> done(err, results); <span class="comment">// æ‰§è¡Œdoneå‡½æ•°ï¼ŒåŒæ—¶ç»“æŸé€’å½’</span></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      exts.after(result, storage); <span class="comment">// å¦‚æœæ²¡æœ‰errï¼Œåˆ™æ‰§è¡Œç”Ÿå‘½å‘¨æœŸçš„afteré’©å­</span></span><br><span class="line">      results[key] = result; <span class="comment">// resultsä¸­ä¿å­˜result</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (++idx &gt;= length) &#123;</span><br><span class="line">        done(err, results); <span class="comment">// å¦‚æœç»“æŸäº†ï¼Œè°ƒç”¨done</span></span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        next(keys[idx]); <span class="comment">// å¦‚æœæ²¡æœ‰ç»“æŸï¼Œè°ƒç”¨nextï¼Œç»§ç»­é€’å½’æ“ä½œ</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = mapSeries;</span><br></pre></td></tr></table></figure><p>å‘¼ï¼Œæ¾äº†ä¸€å£æ°”ï¼Œbachå’ŒnowAndLaterè¿èµ·æ¥çœ‹ï¼Œæ€»ç®—æ¸…æ™°ä¸²è¡Œæ‰§è¡Œçš„åŸç†äº†ã€‚åŒæ—¶æœ‰ä¸€ä¸ªasync-doneåº“æˆ‘åªæ˜¯ä¸€ç¬”å¸¦è¿‡ï¼Œæ„Ÿå…´è¶£å¯ä»¥è‡ªå·±çœ‹çœ‹ï¼Œå®ƒæŠŠä¸åŒé£æ ¼çš„å¼‚æ­¥ä»£ç ç»Ÿä¸€æˆcallbackçš„æ–¹å¼ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">iterator</span>(<span class="params">fn, key, cb</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> asyncDone(fn, cb); <span class="comment">// é€šè¿‡callbackæ–¹å¼ç»Ÿä¸€å¤„ç†å¼‚æ­¥å‡½æ•°</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ‰äº†è¿™ä¸€æ­¥ï¼Œiteratoråœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæ‰èƒ½ä¿è¯å¼‚æ­¥å‡½æ•°æˆåŠŸä¹‹åæ‰§è¡Œä¸‹ä¸€ä¸ªå‡½æ•°ã€‚è¿™å°±æ˜¯ä¸€æ•´ä¸ªä¸²è¡Œæ‰§è¡Œçš„åŸç†äº†ã€‚</p><h3 id="æ¥ä¸‹æ¥"><a href="#æ¥ä¸‹æ¥" class="headerlink" title="æ¥ä¸‹æ¥"></a>æ¥ä¸‹æ¥</h3><p>æ¥ä¸‹æ¥æ˜¯ä¸æ˜¯è½®åˆ°è¦è®²è§£parallelçš„å®ç°äº†å‘¢ï¼ŸğŸ˜„ï¼Œéƒ½å·²ç»çœ‹æˆ‘å†™åˆ°è¿™é‡Œäº†ï¼Œæ˜¯ä¸æ˜¯æœ‰æ€è·¯å»è‡ªå·±é˜…è¯»parallelçš„å®ç°äº†å‘¢ï¼ŸåŠ æ²¹ï¼Œç›¸ä¿¡ä½ å¯ä»¥åšåˆ°çš„ã€‚</p><p>ç®€å•æ¥è¯´ï¼ŒparallelæŠŠæ‰€æœ‰éœ€è¦æ‰§è¡Œçš„å‡½æ•°éƒ½æ”¹æˆå¼‚æ­¥æ‰§è¡Œçš„æ–¹å¼ï¼Œé€šè¿‡forå¾ªç¯å»æ‰§è¡Œï¼Œå°±åšåˆ°äº†å¹¶è¡Œæ‰§è¡Œä»£ç ã€‚</p><p>åŒæ—¶å¦‚æœä½ å¯¹æœ€å¼€å§‹æˆ‘æ²¡æœ‰è¯¦ç»†è®²è§£çš„metadataæœ‰å…´è¶£ï¼Œä¹Ÿå¯ä»¥è‡ªå·±å»äº†è§£ã€‚ä¸æ˜¯å·æ‡’ï¼Œå¼€å¤´å·²ç»è¯´äº†ï¼Œæˆ‘ä»¬å…³æ³¨undertakeræµç¨‹æœ¬èº«ï¼Œå¯¹äºåˆ†æ”¯æµç¨‹ï¼Œæœ‰ä½™åŠ›çš„åŒå­¦è‡ªå·±æ¢ç´¢å§ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>undertakerè¿™ä¸ªä»»åŠ¡ç®¡ç†åº“éå¸¸ä¼˜é›…ï¼Œå¯ä»¥å¾ˆå¥½çš„ç»„åˆå¼‚æ­¥ä»»åŠ¡ï¼Œé€šè¿‡å¹¶è¡Œæˆ–è€…ä¸²è¡Œçš„æ–¹å¼æ‰§è¡Œä¸€ä¸ªä»»åŠ¡æµç¨‹ã€‚æˆ‘ä¹Ÿæ›¾ç»é‡åˆ°ç›¸å¯¹å¤æ‚çš„æµç¨‹æ§åˆ¶ä»£ç ï¼Œå½“æ—¶å†™å®Œä¹‹åæ˜¯ä¸€ä¸ªå¤´ä¸¤ä¸ªå¤§ã€‚undertakeré€šè¿‡å¾ˆå¤šé»‘é­”æ³•ï¼ŒæŠ¹å¹³å¤šä¸ªå¼‚æ­¥ä»»åŠ¡ç»„åˆçš„é—®é¢˜ï¼Œè®©æˆ‘ä»¬æ›´åŠ ä¸“æ³¨ç®¡ç†æµç¨‹æœ¬èº«ï¼Œè€Œä¸æ˜¯å…³æ³¨äºæ€ä¹ˆè§£å†³å„ç§å¼‚æ­¥ä»£ç ç»„åˆã€‚</p><p>è¿™ç¯‡æ–‡ï¼Œä¸€åŠæ˜¯ä¸ºäº†æ€»ç»“undertakerçš„æºç ï¼Œä¸€åŠæ˜¯åˆ†äº«ä¸‹æˆ‘çš„é˜…è¯»æºç æ€è·¯ã€‚æˆ‘ä¹Ÿä¸€æ ·ä¼šé¢å¯¹ä¸‹é¢çš„é—®é¢˜ã€‚</p><ul><li>ä¾èµ–éå¸¸å¤š</li><li>åˆ†æ”¯ä»£ç çœ‹ä¸æ‡‚</li><li>é˜…è¯»è¿‡ç¨‹å¿˜è®°å‰é¢çš„ä»£ç </li></ul><p>ç›¸ä¿¡è¿™äº›é—®é¢˜çš„ç­”æ¡ˆï¼Œè®¤çœŸçœ‹è¿‡æœ¬æ–‡çš„ä½ éƒ½èƒ½æ‰¾åˆ°ä¸€äº›å‚è€ƒå’Œè§£ç­”ã€‚å¸Œæœ›æ–°çš„ä¸€å¹´æˆ‘ä»¬æ°¸è¿œå¹´è½»ï¼Œæ°¸è¿œä¹äºæ¢ç´¢ï¼Œå–„äºå­¦ä¹ æ€»ç»“ï¼</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;undertakeréƒ¨åˆ†çš„ä»£ç ï¼Œæ˜¯gulpä»»åŠ¡ç®¡ç†éƒ¨åˆ†çš„æ ¸å¿ƒæºç ã€‚åœ¨è®²è§£gulpæœ¬èº«ä»“åº“æºç ä¹‹å‰ï¼Œæˆ‘ç€é‡è®²è®²undertakerã€‚è¿™ä¸ªåº“è‡ªç„¶ä¹Ÿæ¶‰åŠåˆ°ä¸€äº›ä¾èµ–ï¼Œæ²¡å…³ç³»ï¼Œè¿™æ¬¡æˆ‘ä»¬å…³æ³¨undertakeræµç¨‹æœ¬èº«ã€‚&lt;/p&gt;
&lt;p&gt;è¯·æ³¡å¥½ğŸµæˆ–è€…â˜•ï¸æ…¢æ…¢çœ‹ï¼Œè¿™ç¯‡æ–‡ç« ç¯‡å¹…è¾ƒé•¿ã€‚ç®—æ˜¯å›åº”æŸäº›æœ‹å‹å¯¹æˆ‘çš„åšå®¢æœŸå¾…å§ï¼Œä»–ä»¬è§‰å¾—æˆ‘ä¸€å¼€å§‹å†™çš„æ–‡ç« å¤ªæ°´äº†ã€‚&lt;/p&gt;
&lt;h2 id=&quot;undertakerç®€ä»‹&quot;&gt;&lt;a href=&quot;#undertakerç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;undertakerç®€ä»‹&quot;&gt;&lt;/a&gt;undertakerç®€ä»‹&lt;/h2&gt;&lt;p&gt;undertakeræ˜¯gulpå›¢é˜Ÿå¼€å‘å‡ºæ¥ä¸ºè§£å†³gulpçš„ä»»åŠ¡æ‰§è¡Œé—®é¢˜çš„åº“ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Task registry that allows composition through series/parallel methods.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;undertakeræä¾›serieså’Œparallelä¸¤ç§æ–¹æ³•è§£å†³ä»»åŠ¡æµç¨‹ç®¡ç†ã€‚seriesæ˜¯ä¸²è¡Œæ‰§è¡Œä»»åŠ¡ï¼Œparallelæ–¹æ³•æ˜¯å¹¶è¡Œæ‰§è¡Œä»»åŠ¡ã€‚ä¸²è¡Œæ‰§è¡Œåº”è¯¥æ¯”è¾ƒç®€å•ç†è§£ï¼Œå°±æ˜¯æŒ‰é¡ºåºæ‰§è¡Œï¼Œåªæœ‰å‰é¢çš„ä»»åŠ¡å®Œæˆï¼Œåé¢çš„ä»»åŠ¡æ‰èƒ½æ‰§è¡Œã€‚é‚£ä¹ˆå¹¶è¡Œå‘¢ï¼Ÿå¾ˆå¯èƒ½æ˜¯é€šè¿‡forå¾ªç¯æ‰§è¡Œæ‰€æœ‰å¼‚æ­¥ä»»åŠ¡ï¼Œè¿™æ ·å°±èƒ½å®ç°å¹¶è¡Œï¼Œè¿™ä¸ªç±»ä¼¼Promise.allæ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘éå¸¸èµå¹undertakerçš„è®¾è®¡ï¼Œå¯èƒ½æ˜¯æˆ‘å¯¹ä»£ç æµç¨‹ç®¡ç†æœ¬èº«æ²¡æœ‰å¾ˆå¥½çš„æ€è·¯ï¼Œçœ‹äº†ä¹‹åè±ç„¶å¼€æœ—ã€‚æƒ³æƒ³javascriptï¼Œå¼‚æ­¥ä»£ç ä»callbackï¼Œå†™åˆ°promiseï¼Œå†™åˆ°generatorï¼Œå†™åˆ°async/awaitã€‚å¼‚æ­¥ä»£ç çš„ä¹¦å†™éšç€æ—¶é—´çš„æ¨ç§»å˜å¾—è¶Šæ¥è¶Šå‹å¥½ï¼Œä½†æ˜¯æ¯”å¦‚Promiseçš„å®ç°æ€æƒ³ï¼Œæ›´åŠ å€¼å¾—æˆ‘ä»¬å­¦ä¹ å’Œæ€è€ƒã€‚å›åˆ°undertakerï¼Œè¿™ä¸ªä»»åŠ¡ç®¡ç†çš„æ¡†æ¶ï¼Œå…¶å®å°±æ˜¯éå¸¸å‹å¥½åœ°è§£å†³äº†å¤„ç†ä¸²è¡Œæˆ–è€…å¹¶è¡Œä»»åŠ¡çš„ä»£ç ç»„ç»‡é—®é¢˜ã€‚é€šè¿‡undertakerä¹¦å†™çš„ä»£ç å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§éƒ½å¾ˆå¼ºã€‚&lt;/p&gt;
&lt;p&gt;ä¹‹å‰å†™åˆ°å¤æ‚ä¸šåŠ¡æµç¨‹çš„æ—¶å€™ï¼Œä¸²è¡Œæˆ–è€…å¹¶è¡Œçš„æ—¶å€™ï¼Œç›´æ¥ç”¨Promiseï¼Œæ€»æ„Ÿè§‰æœ‰æ‰€æ¬ ç¼ºï¼Œç°åœ¨çœ‹äº†undertakerï¼Œæœ‰ä¸€ç§äº²åˆ‡çš„æ„Ÿè§‰ï¼Œé‚£å°±æ˜¯è¿™ç§å®ç°å°±æ˜¯æˆ‘å†™æµç¨‹ç®¡ç†éœ€è¦çš„éå¸¸å¥½çš„å®è·µæ¨¡æ¿ã€‚&lt;/p&gt;
    
    </summary>
    
    
    
      <category term="gulp" scheme="http://yoursite.com/tags/gulp/"/>
    
  </entry>
  
  <entry>
    <title>gulpç³»åˆ—ä¹‹vinylæºç ç¬”è®°</title>
    <link href="http://yoursite.com/2020/01/07/gulp%E7%B3%BB%E5%88%97%E4%B9%8Bvinyl%E6%BA%90%E7%A0%81%E7%AC%94%E8%AE%B0/"/>
    <id>http://yoursite.com/2020/01/07/gulp%E7%B3%BB%E5%88%97%E4%B9%8Bvinyl%E6%BA%90%E7%A0%81%E7%AC%94%E8%AE%B0/</id>
    <published>2020-01-07T03:18:46.000Z</published>
    <updated>2020-01-29T10:59:34.339Z</updated>
    
    <content type="html"><![CDATA[<h2 id="vinylç®€ä»‹"><a href="#vinylç®€ä»‹" class="headerlink" title="vinylç®€ä»‹"></a>vinylç®€ä»‹</h2><p>vinylæ˜¯gulpå›¢é˜Ÿç»´æŠ¤çš„ä¸€ä¸ªè™šæ‹Ÿæ–‡ä»¶æ ¼å¼åº“ã€‚Vinylå¯¹è±¡ï¼Œä¸»è¦åŒ…æ‹¬pathå’Œcontentså±æ€§ï¼Œæ˜¯ä¸€ä¸ªæè¿°æ–‡ä»¶çš„å…ƒæ•°æ®å¯¹è±¡ã€‚</p><h2 id="vinylç”¨æ³•"><a href="#vinylç”¨æ³•" class="headerlink" title="vinylç”¨æ³•"></a>vinylç”¨æ³•</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Vinyl = <span class="built_in">require</span>(<span class="string">'vinyl'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> jsFile = <span class="keyword">new</span> Vinyl(&#123;</span><br><span class="line">  cwd: <span class="string">'/'</span>, å·¥ä½œç›®å½•</span><br><span class="line">  base: <span class="string">'/test/'</span>, baseè·¯å¾„</span><br><span class="line">  path: <span class="string">'/test/file.js'</span>, <span class="comment">//</span></span><br><span class="line">  contents: <span class="keyword">new</span> Buffer(<span class="string">'var x = 123'</span>)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="vinylæºç "><a href="#vinylæºç " class="headerlink" title="vinylæºç "></a>vinylæºç </h2><p>æ€»å…±300å¤šè¡Œï¼Œè€æ–¹æ³•ï¼Œæˆ‘ä»¬å…ˆçœ‹çœ‹ä»£ç æ€»ä½“çš„ç»“æ„ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">æ„é€ å‡½æ•°</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">File</span> (<span class="params">file</span>) </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line">File.prototype.isBuffer = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;;</span><br><span class="line">File.prototype.isStream = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;;</span><br><span class="line">File.prototype.isNull = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;;</span><br><span class="line">File.prototype.isDirectory = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;;</span><br><span class="line">File.prototype.isSymbolic = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;;</span><br><span class="line">File.prototype.clone = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;;</span><br><span class="line">File.prototype.inspect = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;;</span><br><span class="line">...</span><br><span class="line">File.isCustomProp = <span class="function"><span class="keyword">function</span> (<span class="params">key</span>) </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;;</span><br><span class="line">File.isVinyl = <span class="function"><span class="keyword">function</span> (<span class="params">file</span>) </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(File.prototype, <span class="string">'contents'</span>, &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(File.prototype, <span class="string">'cwd'</span>, &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(File.prototype, <span class="string">'base'</span>, &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(File.prototype, <span class="string">'relative'</span>, &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(File.prototype, <span class="string">'dirname'</span>, &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(File.prototype, <span class="string">'basename'</span>, &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(File.prototype, <span class="string">'stem'</span>, &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(File.prototype, <span class="string">'extname'</span>, &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(File.prototype, <span class="string">'path'</span>, &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(File.prototype, <span class="string">'symlink'</span>, &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = File;</span><br></pre></td></tr></table></figure><p>æˆ‘å°±ä¸ä¸€ä¸€æ³¨é‡Šäº†ï¼Œå…·ä½“çš„ä½œç”¨å…¶å®åå­—å·²ç»å¾ˆæ¸…æ™°äº†<br>åŸå‹å¯¹è±¡ä¸Šçš„æ–¹æ³•æ€»ç»“ä¸‹ï¼š</p><ul><li>isBuffer</li><li>isSream</li><li>isNull</li><li>isDirectory</li><li>isSymbolic</li><li>clone</li><li>inspect</li></ul><p>é€šè¿‡Object.definePropertyå®šä¹‰çš„å±æ€§</p><ul><li>contents æ–‡ä»¶å†…å®¹</li><li>cwd å·¥ä½œç›®å½•</li><li>base åŸºå‡†è·¯å¾„</li><li>relative ç›¸å¯¹è·¯å¾„</li><li>dirname æ–‡ä»¶å¤¹åç§°</li><li>basename æ–‡ä»¶åç§°ï¼ˆåŒ…æ‹¬æ‰©å±•åï¼‰</li><li>stem æ–‡ä»¶å</li><li>extname æ‰©å±•å</li><li>path å®Œæ•´è·¯å¾„</li><li>symlink è½¯é“¾</li></ul><h2 id="vinylæ€»ç»“"><a href="#vinylæ€»ç»“" class="headerlink" title="vinylæ€»ç»“"></a>vinylæ€»ç»“</h2><p>æ­£å¦‚ç®€ä»‹æ‰€è¯´ï¼Œè¿™ä¸ªåº“æœ€é‡è¦çš„å°±æ˜¯pathå’Œcontentså±æ€§ã€‚æ•´ä½“å®ç°ä¹Ÿæ˜¯ç›¸å¯¹ç®€å•ï¼Œè¿™é‡Œå°±ä¸èµ˜è¿°äº†ã€‚å¯¹äºé‡è¦ä½†æ˜¯ç®€å•çš„åº“ï¼Œæˆ‘è¿™è¾¹ä¼šç®€å•ä»‹ç»ï¼Œä»…ä¾›è®²è§£gulpä¸»æµç¨‹ çš„æ—¶å€™å›é¡¾å‚è€ƒã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;vinylç®€ä»‹&quot;&gt;&lt;a href=&quot;#vinylç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;vinylç®€ä»‹&quot;&gt;&lt;/a&gt;vinylç®€ä»‹&lt;/h2&gt;&lt;p&gt;vinylæ˜¯gulpå›¢é˜Ÿç»´æŠ¤çš„ä¸€ä¸ªè™šæ‹Ÿæ–‡ä»¶æ ¼å¼åº“ã€‚Vinylå¯¹è±¡ï¼Œä¸»è¦åŒ…æ‹¬pathå’Œcontentså±æ€§ï¼Œæ˜¯ä¸€ä¸ªæè¿°æ–‡ä»¶çš„å…ƒæ•°æ®å¯¹è±¡ã€‚&lt;/p&gt;
&lt;h2 id=&quot;vinylç”¨æ³•&quot;&gt;&lt;a href=&quot;#vinylç”¨æ³•&quot; class=&quot;headerlink&quot; title=&quot;vinylç”¨æ³•&quot;&gt;&lt;/a&gt;vinylç”¨æ³•&lt;/h2&gt;&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; Vinyl = &lt;span class=&quot;built_in&quot;&gt;require&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&#39;vinyl&#39;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; jsFile = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; Vinyl(&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  cwd: &lt;span class=&quot;string&quot;&gt;&#39;/&#39;&lt;/span&gt;, å·¥ä½œç›®å½•&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  base: &lt;span class=&quot;string&quot;&gt;&#39;/test/&#39;&lt;/span&gt;, baseè·¯å¾„&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  path: &lt;span class=&quot;string&quot;&gt;&#39;/test/file.js&#39;&lt;/span&gt;, &lt;span class=&quot;comment&quot;&gt;//&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  contents: &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; Buffer(&lt;span class=&quot;string&quot;&gt;&#39;var x = 123&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
    
      <category term="gulp" scheme="http://yoursite.com/tags/gulp/"/>
    
  </entry>
  
  <entry>
    <title>gulpç³»åˆ—ä¹‹through2æºç ç¬”è®°</title>
    <link href="http://yoursite.com/2020/01/03/gulp%E7%B3%BB%E5%88%97%E4%B9%8Bthrough2%E6%BA%90%E7%A0%81%E7%AC%94%E8%AE%B0/"/>
    <id>http://yoursite.com/2020/01/03/gulp%E7%B3%BB%E5%88%97%E4%B9%8Bthrough2%E6%BA%90%E7%A0%81%E7%AC%94%E8%AE%B0/</id>
    <published>2020-01-03T07:41:57.000Z</published>
    <updated>2020-01-29T10:59:34.338Z</updated>
    
    <content type="html"><![CDATA[<h2 id="through2ç®€ä»‹"><a href="#through2ç®€ä»‹" class="headerlink" title="through2ç®€ä»‹"></a>through2ç®€ä»‹</h2><p>ä»“åº“ç®€ä»‹ï¼šA tiny wrapper around Node.js streams.Transform (Streams2/3) to avoid explicit subclassing noise. ç®€å•æ¥è¯´å®ƒå°±æ˜¯ç”¨readable-streamåº“åˆ›å»ºtransform streamã€‚å¦‚æœä½¿ç”¨å®˜æ–¹çš„Streamæ¥å£ï¼Œè¿˜è¦è€ƒè™‘å…¼å®¹æ€§é—®é¢˜ã€‚</p><h2 id="through2ç”¨æ³•"><a href="#through2ç”¨æ³•" class="headerlink" title="through2ç”¨æ³•"></a>through2ç”¨æ³•</h2><p>å…·ä½“ç”¨æ³•ç›´æ¥çœ‹through2çš„<a href="https://github.com/rvagg/through2" target="_blank" rel="noopener">github</a>, å¦å¤–æˆ‘åœ¨é˜…è¯»è¿‡ç¨‹ä¸­ä¹Ÿé¡ºä¾¿æäº¤PRä¿®å¤äº†readme.mdä¸­é—æ¼çš„æ‹¬å·ã€‚</p><p>through2å‡½æ•°ï¼š<code>through2([ options, ] [ transformFunction ] [, flushFunction ])</code></p><p>optionså°±æ˜¯å’Œransform streamç›¸å…³çš„é…ç½®é¡¹ã€‚</p><p>transformFunctionï¼Œç®€å•æ¦‚æ‹¬ï¼Œå®ƒå°±æ˜¯è¿æ¥readable streamå’Œwritable streamçš„æ¡¥æ¢ï¼Œå®ƒæ”¹å˜å¯è¯»æµä¹‹åä¾›å¯å†™æµæ¶ˆè´¹ã€‚è¿™ä¸ªtransformFunctionä¹Ÿæ˜¯duplex streamå’Œtransform streamæœ€å¤§çš„åŒºåˆ«ã€‚</p><p>flushFunctionå°†åœ¨æ‰€æœ‰è¾“å…¥æµä¼ è¾“ç»“æŸåè°ƒç”¨ï¼Œç”¨æ¥ç»“æŸtransform streamã€‚</p><p>through2ä¸€èˆ¬ç”¨åœ¨pipeä¸­ï¼ŒæŠ„å®˜æ–¹demoå¦‚ä¸‹ä½œå‚è€ƒï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">fs.createReadStream(<span class="string">'ex.txt'</span>)</span><br><span class="line">  .pipe(through2(<span class="function"><span class="keyword">function</span> (<span class="params">chunk, enc, callback</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; chunk.length; i++)</span><br><span class="line">      <span class="keyword">if</span> (chunk[i] == <span class="number">97</span>)</span><br><span class="line">        chunk[i] = <span class="number">122</span> <span class="comment">// swap 'a' for 'z'</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.push(chunk)</span><br><span class="line"></span><br><span class="line">    callback()</span><br><span class="line">   &#125;))</span><br><span class="line">  .pipe(fs.createWriteStream(<span class="string">'out.txt'</span>))</span><br><span class="line">  .on(<span class="string">'finish'</span>, () =&gt; doSomethingSpecial())</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="æºç ç®€ä»‹"><a href="#æºç ç®€ä»‹" class="headerlink" title="æºç ç®€ä»‹"></a>æºç ç®€ä»‹</h2><p>å¦‚æœä½ æ·±å…¥äº†è§£è¿‡Streamï¼Œçœ‹äº†through2çš„ç”¨æ³•ï¼Œå…¶å®å·²ç»å¯ä»¥çŒœæµ‹åˆ°å®ƒæºç æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚</p><p>ä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´å‘¢ï¼Ÿå› ä¸ºæˆ‘å­¦ä¹ è¿™å—çš„æ—¶å€™ç›´æ¥çœ‹through2çš„æºç ï¼Œå‘ç°è‡ªå·±å…¶å®æ˜¯ä¸ç†è§£pipeå’Œthrough2ç»“åˆèµ·æ¥ï¼Œæ€ä¹ˆå°±å¯ä»¥åšåˆ°è¿™ç§ä¿®æ”¹å¯è¯»æµæ•°æ®çš„é»‘é­”æ³•ã€‚è¯´ç™½äº†æ˜¯å¯¹pipeæ–¹æ³•çš„äº†è§£å¾ˆæ¨¡ç³Šï¼ŒStreamçš„pipeæ–¹æ³•ï¼Œå…¶å®åªéœ€è¦ä¼ ä¸€ä¸ªdestæµä½œä¸ºå‚æ•°ï¼Œå®ƒå†…éƒ¨å·²ç»å®ç°äº†å¯¹destæµçš„dataå’Œendäº‹ä»¶çš„ç›‘å¬ã€‚</p><p>æŠ›å¼€æºç å»ç†è§£ï¼Œpipeç®¡é“åªæ˜¯ä¸€ä¸ªé»‘ç›’ï¼Œä¼ å…¥ä¸€ä¸ªtransfrom / duplex / writable streamä½œä¸ºpipeçš„å‚æ•°ï¼Œæºå¤´çš„readable streamå¯ä»¥è‡ªåŠ¨ä»æºå¤´æµåˆ°å‡ºå£writable streamï¼Œå¹¶é€šè¿‡æ‰§è¡Œæ¯ä¸€ä¸ªpipeæ–¹æ³•å¯¹streamåšç›¸åº”çš„å¤„ç†ã€‚</p><p>å›åˆ°through2ï¼Œå®ƒå°±æ˜¯å¸®åŠ©ä½ å¿«é€Ÿåˆ›å»ºä¸€ä¸ªtransform streamçš„å·¥å…·å‡½æ•°ã€‚</p><p>çœ‹æ ¸å¿ƒæºç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main export, just make me a transform stream!</span></span><br><span class="line"><span class="built_in">module</span>.exports = through2(<span class="function"><span class="keyword">function</span> (<span class="params">options, transform, flush</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> t2 = <span class="keyword">new</span> DestroyableTransform(options)</span><br><span class="line"></span><br><span class="line">  t2._transform = transform</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (flush)</span><br><span class="line">    t2._flush = flush</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> t2</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°through2ç¡®å®åªæ˜¯è¿”å›ä¸€ä¸ªDestroyableTransformæµã€‚<br>é‚£æˆ‘ä»¬çœ‹çœ‹DestroyableTransformã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Transform = <span class="built_in">require</span>(<span class="string">'readable-stream'</span>).Transform</span><br><span class="line">  , inherits  = <span class="built_in">require</span>(<span class="string">'util'</span>).inherits</span><br><span class="line">  , xtend     = <span class="built_in">require</span>(<span class="string">'xtend'</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">DestroyableTransform</span>(<span class="params">opts</span>) </span>&#123;</span><br><span class="line">  Transform.call(<span class="keyword">this</span>, opts)</span><br><span class="line">  <span class="keyword">this</span>._destroyed = <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">inherits(DestroyableTransform, Transform)</span><br><span class="line"></span><br><span class="line">DestroyableTransform.prototype.destroy = <span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>._destroyed) <span class="keyword">return</span></span><br><span class="line">  <span class="keyword">this</span>._destroyed = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> self = <span class="keyword">this</span></span><br><span class="line">  process.nextTick(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err)</span><br><span class="line">      self.emit(<span class="string">'error'</span>, err)</span><br><span class="line">    self.emit(<span class="string">'close'</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»§æ‰¿readable-streamçš„Transformï¼Œç„¶ååŸå‹é“¾ä¸Šå¢åŠ ä¸€ä¸ªdestroyæ–¹æ³•ã€‚éå¸¸ç®€å•ã€‚<br>æ ¸å¿ƒæºç éƒ¨åˆ†å°±åˆ†æåˆ°æ­¤ã€‚</p><h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><p>è¿™ç¯‡æºç ç¬”è®°çœ‹ä¸Šå»æ²¡æ€ä¹ˆè®²è§£through2ï¼Œå› ä¸ºå®ƒæœ¬èº«ç¡®å®æ²¡å•¥å¯ä»¥è®²çš„ï¼Œåªæ˜¯åˆ›å»ºtransform streaméƒ½ä¼šç”¨åˆ°å®ƒå¤„ç†ã€‚</p><p>æˆ‘åœ¨ç ”è¯»å®ƒä¹‹å‰çš„å›°æƒ‘ï¼Œä¸åœ¨äºè¿™ä¸ªåº“æœ¬èº«ï¼Œè€Œæ˜¯å¯¹Streamçš„ç†è§£æœ‰ç‚¹æ¨¡ç³Šã€‚å…ˆå°†ç†è§£è®°å½•ä¸‹æ¥ï¼Œä¾›æ—¥åå‚è€ƒã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;through2ç®€ä»‹&quot;&gt;&lt;a href=&quot;#through2ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;through2ç®€ä»‹&quot;&gt;&lt;/a&gt;through2ç®€ä»‹&lt;/h2&gt;&lt;p&gt;ä»“åº“ç®€ä»‹ï¼šA tiny wrapper around Node.js streams.Transform (Streams2/3) to avoid explicit subclassing noise. ç®€å•æ¥è¯´å®ƒå°±æ˜¯ç”¨readable-streamåº“åˆ›å»ºtransform streamã€‚å¦‚æœä½¿ç”¨å®˜æ–¹çš„Streamæ¥å£ï¼Œè¿˜è¦è€ƒè™‘å…¼å®¹æ€§é—®é¢˜ã€‚&lt;/p&gt;
&lt;h2 id=&quot;through2ç”¨æ³•&quot;&gt;&lt;a href=&quot;#through2ç”¨æ³•&quot; class=&quot;headerlink&quot; title=&quot;through2ç”¨æ³•&quot;&gt;&lt;/a&gt;through2ç”¨æ³•&lt;/h2&gt;&lt;p&gt;å…·ä½“ç”¨æ³•ç›´æ¥çœ‹through2çš„&lt;a href=&quot;https://github.com/rvagg/through2&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;github&lt;/a&gt;, å¦å¤–æˆ‘åœ¨é˜…è¯»è¿‡ç¨‹ä¸­ä¹Ÿé¡ºä¾¿æäº¤PRä¿®å¤äº†readme.mdä¸­é—æ¼çš„æ‹¬å·ã€‚&lt;/p&gt;
&lt;p&gt;through2å‡½æ•°ï¼š&lt;code&gt;through2([ options, ] [ transformFunction ] [, flushFunction ])&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;optionså°±æ˜¯å’Œransform streamç›¸å…³çš„é…ç½®é¡¹ã€‚&lt;/p&gt;
&lt;p&gt;transformFunctionï¼Œç®€å•æ¦‚æ‹¬ï¼Œå®ƒå°±æ˜¯è¿æ¥readable streamå’Œwritable streamçš„æ¡¥æ¢ï¼Œå®ƒæ”¹å˜å¯è¯»æµä¹‹åä¾›å¯å†™æµæ¶ˆè´¹ã€‚è¿™ä¸ªtransformFunctionä¹Ÿæ˜¯duplex streamå’Œtransform streamæœ€å¤§çš„åŒºåˆ«ã€‚&lt;/p&gt;
&lt;p&gt;flushFunctionå°†åœ¨æ‰€æœ‰è¾“å…¥æµä¼ è¾“ç»“æŸåè°ƒç”¨ï¼Œç”¨æ¥ç»“æŸtransform streamã€‚&lt;/p&gt;
&lt;p&gt;through2ä¸€èˆ¬ç”¨åœ¨pipeä¸­ï¼ŒæŠ„å®˜æ–¹demoå¦‚ä¸‹ä½œå‚è€ƒï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;fs.createReadStream(&lt;span class=&quot;string&quot;&gt;&#39;ex.txt&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  .pipe(through2(&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;chunk, enc, callback&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; i = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;; i &amp;lt; chunk.length; i++)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (chunk[i] == &lt;span class=&quot;number&quot;&gt;97&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        chunk[i] = &lt;span class=&quot;number&quot;&gt;122&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;// swap &#39;a&#39; for &#39;z&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.push(chunk)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    callback()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &amp;#125;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  .pipe(fs.createWriteStream(&lt;span class=&quot;string&quot;&gt;&#39;out.txt&#39;&lt;/span&gt;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  .on(&lt;span class=&quot;string&quot;&gt;&#39;finish&#39;&lt;/span&gt;, () =&amp;gt; doSomethingSpecial())&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
    
      <category term="gulp" scheme="http://yoursite.com/tags/gulp/"/>
    
  </entry>
  
  <entry>
    <title>gulpç³»åˆ—ä¹‹pumpæºç ç¬”è®°</title>
    <link href="http://yoursite.com/2019/12/30/gulp%E7%B3%BB%E5%88%97%E4%B9%8Bpump%E6%BA%90%E7%A0%81%E7%AC%94%E8%AE%B0/"/>
    <id>http://yoursite.com/2019/12/30/gulp%E7%B3%BB%E5%88%97%E4%B9%8Bpump%E6%BA%90%E7%A0%81%E7%AC%94%E8%AE%B0/</id>
    <published>2019-12-30T02:36:18.000Z</published>
    <updated>2020-01-29T10:59:34.337Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>è¿‘æœŸåœ¨ç¿»é˜…gulpçš„æºç ï¼Œå®ƒå¼•ç”¨åˆ°äº†å¾ˆå¤šå¤–éƒ¨åŒ…ï¼Œä¸ç”¨æ…Œï¼Œå¾…æˆ‘æŠ½ä¸å‰¥èŒ§é€ä¸ªå‡»ç ´ã€‚æ¥ä¸‹æ¥ä¼šå†™gulpç³»åˆ—çš„æºç è§£æï¼Œä¼šå°†gulpä½¿ç”¨çš„æ ¸å¿ƒåº“é€ä¸ªä»‹ç»ï¼Œæœ€åå†ä¸²èµ·æ¥æ¢³ç†gulpçš„æµç¨‹ã€‚</p><p>é€‰æ‹©ç”¨åˆ†æ€»çš„ç»“æ„è®²è§£gulpæºç ï¼Œæ˜¯å› ä¸ºæ€»åˆ†æ€»çš„æ„ä¹‰ä¸å¤ªå¤§ã€‚gulpæœ¬èº«å¼•ç”¨äº†å¾ˆå¤šç¬¬ä¸‰æ–¹åº“ï¼Œå¦‚æœèšç„¦äºå…¶ä¸»åº“å»è¯´æµç¨‹ï¼Œå®é™…ä¸Šæ²¡æœ‰å¤ªå¤šå€¼å¾—è¯´çš„ä¸œè¥¿ã€‚</p><p>æŠ›å¼€å¼•ç”¨çš„è¯¸å¤šåº“ï¼Œgulpæœ€æ ¸å¿ƒçš„è¿˜æ˜¯ä½¿ç”¨äº†Streamã€‚å¯¹äºStreamçš„æ¦‚å¿µï¼Œæˆ‘å°±ä¸èµ˜è¿°äº†ï¼Œä¸ç†Ÿæ‚‰çš„åŒå­¦å»å›é¡¾ä¸€ä¸‹nodeçš„ç›¸å…³æ–‡æ¡£ã€‚è¿™é‡Œæœ‰ä¸€ç¯‡æ–‡ç« å€¼å¾—ä¸€è¯» <a href="https://github.com/substack/stream-handbook" target="_blank" rel="noopener"><em>stream-handbook</em></a>ã€‚</p><p>å¦å¤–ï¼Œæºç åˆ†æçš„æ–‡ç« ï¼Œæˆ‘çš„åˆè¡·æ›´å¤šæ˜¯æ€»ç»“å›é¡¾ï¼Œå¦‚æœåŒæ—¶èƒ½å¯¹è¯»è€…æœ‰æ‰€å¸®åŠ©ï¼Œä¹Ÿæ˜¯ä¸€ä»¶å¥½äº‹ã€‚</p><h2 id="pumpç®€ä»‹"><a href="#pumpç®€ä»‹" class="headerlink" title="pumpç®€ä»‹"></a>pumpç®€ä»‹</h2><p><a href="https://github.com/mafintosh/pump" target="_blank" rel="noopener">pump</a>æ˜¯ä¸€ä¸ªå°nodeæ¨¡å—ï¼Œå®ƒé€šè¿‡ç®¡é“å°†æµè¿æ¥åœ¨ä¸€èµ·ï¼Œå¹¶åœ¨å…¶ä¸­ä¸€ä¸ªå…³é—­æ—¶é”€æ¯æ‰€æœ‰æµã€‚</p><p>é¦–å…ˆåˆ†æpumpï¼Œä¸¤ç‚¹åŸå› </p><ol><li>gulpæºç é˜…è¯»è¿‡ç¨‹ä¸­ä¸€è·¯è¿½æº¯åˆ°pumpï¼Œpumpç®—æ˜¯åŸºç¡€ã€‚</li><li>pumpçš„å®ç°ä¸­æœ‰é—­åŒ…çš„åº”ç”¨åœºæ™¯ï¼Œå€¼å¾—åŠ æ·±å¯¹é—­åŒ…çš„å­¦ä¹ ã€‚</li></ol><a id="more"></a><h2 id="pumpæºç è§£æ"><a href="#pumpæºç è§£æ" class="headerlink" title="pumpæºç è§£æ"></a>pumpæºç è§£æ</h2><p>é¦–å…ˆæ¥çœ‹çœ‹pumpåº“çš„ç›®å½•ç»“æ„ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">â¯ tree .&#x2F;node_modules&#x2F;pump</span><br><span class="line">.&#x2F;node_modules&#x2F;pump</span><br><span class="line">â”œâ”€â”€ LICENSE</span><br><span class="line">â”œâ”€â”€ README.md</span><br><span class="line">â”œâ”€â”€ index.js</span><br><span class="line">â”œâ”€â”€ package.json</span><br><span class="line">â”œâ”€â”€ test-browser.js</span><br><span class="line">â””â”€â”€ test-node.js</span><br><span class="line"></span><br><span class="line">0 directories, 6 files</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹å‡ºå¦‚ç®€ä»‹æ‰€è¯´ï¼Œç¡®å®æ˜¯ä¸€ä¸ªå°node moduleã€‚æºç æœ‰ä¸”åªæœ‰index.jsè¿™ä¸ªå…¥å£æ–‡ä»¶ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬çœ‹çœ‹ä»£ç çš„æ¡†æ¶ç»“æ„ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> once = requrie(<span class="string">'once'</span>)</span><br><span class="line"><span class="keyword">var</span> eos = <span class="built_in">require</span>(<span class="string">'end-of-stream'</span>)</span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç©ºå‡½æ•°</span></span><br><span class="line"><span class="keyword">var</span> noop = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="comment">// åˆ¤æ–­process.versionæ˜¯å¦ä¸ºæ—§ç‰ˆæœ¬ã€‚æ­¤å¤„å­˜ç–‘ï¼Œv.0æˆ–è€….0å¼€å¤´å³å¯ï¼Œæ²¡è§è¿‡è¿™ç§ç‰ˆæœ¬å·ã€‚</span></span><br><span class="line"><span class="keyword">var</span> ancient = <span class="regexp">/^v?\.0/</span>.test(process.version)</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ¤æ–­å…¥å‚fnæ˜¯å¦ä¸ºfunction</span></span><br><span class="line"><span class="keyword">var</span> isFn = <span class="function"><span class="keyword">function</span> (<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ¤æ–­å…¥å‚streamæ˜¯å¦ä¸ºfsç›¸å…³</span></span><br><span class="line"><span class="keyword">var</span> isFs = <span class="function"><span class="keyword">function</span> (<span class="params">stream</span>) </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ¤æ–­å…¥å‚streamæ˜¯å¦ä¸ºrequestç›¸å…³</span></span><br><span class="line"><span class="keyword">var</span> isRequest = <span class="function"><span class="keyword">function</span> (<span class="params">stream</span>) </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†stream destroyçš„å‡½æ•°</span></span><br><span class="line"><span class="keyword">var</span> destroyer = <span class="function"><span class="keyword">function</span> (<span class="params">stream, reading, writing, callback</span>) </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰§è¡Œå…¥å‚fnå‡½æ•°</span></span><br><span class="line"><span class="keyword">var</span> call = <span class="function"><span class="keyword">function</span> (<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿”å›from.pipe(to)</span></span><br><span class="line"><span class="keyword">var</span> pipe = <span class="function"><span class="keyword">function</span> (<span class="params">from , to</span>) </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// pumpä¸»å‡½æ•°</span></span><br><span class="line"><span class="keyword">var</span> pump = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = pump</span><br></pre></td></tr></table></figure><p>å¦‚ä¸Šï¼Œå°†index.jsæ–‡ä»¶ç»“æ„æ¢³ç†äº†ä¸€ä¸‹ã€‚å…¶ä¸­ancientè¿™ä¸ªå˜é‡æˆ‘æ²¡æœ‰çœ‹æ‡‚ï¼Œå¦‚æœæœ‰äº†è§£çš„å°ä¼™ä¼´æ¬¢è¿è¯„è®ºæ¢è®¨ã€‚æ¥ä¸‹æ¥ç€é‡è®²è®²pumpå‡½æ•°å’Œdestroyerå‡½æ•°ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> pump = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> streams = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>) <span class="comment">// å°†å…¥å‚è½¬åŒ–ä¸ºstreamsæ•°ç»„</span></span><br><span class="line">  <span class="keyword">var</span> callback = isFn(streams[streams.length - <span class="number">1</span>] || noop) &amp;&amp; streams.pop() || noop <span class="comment">// callbackçš„è·å–</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(streams[<span class="number">0</span>])) streams = streams[<span class="number">0</span>] <span class="comment">// å…¼å®¹æ”¯æŒç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ•°ç»„ï¼Œä¼ å…¥æ‰€æœ‰çš„stream</span></span><br><span class="line">  <span class="keyword">if</span> (streams.length &lt; <span class="number">2</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'pump requires two streams per minimum'</span>) <span class="comment">// æ•²é»‘æ¿ï¼Œè‡³å°‘éœ€è¦ä¸¤ä¸ªstreamï¼Œå¦åˆ™ä½ ç”¨pumpå¹²å•¥ï¼Ÿ</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> error</span><br><span class="line">  <span class="keyword">var</span> destroys = streams.map(<span class="function"><span class="keyword">function</span> (<span class="params">stream, i</span>) </span>&#123; <span class="comment">// é€šè¿‡streams.mapè·å–destroyå‡½æ•°çš„æ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„åœ¨æœªæ¥çš„destroyerçš„callbackä¸­å¯èƒ½ç”¨åˆ°</span></span><br><span class="line">    <span class="keyword">var</span> reading = i &lt; streams.length - <span class="number">1</span> <span class="comment">// streamsæ²¡åˆ°æœ€åä¸€ä¸ªçš„æ—¶å€™ï¼ŒreadingçŠ¶æ€éƒ½æ˜¯true</span></span><br><span class="line">    <span class="keyword">var</span> writing = i &gt; <span class="number">0</span> <span class="comment">// streamsä»ç¬¬äºŒä¸ªå¼€å§‹ï¼ŒwritingçŠ¶æ€éƒ½æ˜¯true</span></span><br><span class="line">    <span class="keyword">return</span> destroyer(stream, reading, writing, <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (!error) error = err <span class="comment">// streamså…±äº«çš„errorå€¼ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œå…ˆèµ‹å€¼</span></span><br><span class="line">      <span class="keyword">if</span> (err) destroys.forEach(call) <span class="comment">// å¦‚æœå­˜åœ¨errï¼Œå°†destroysæ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå‡½æ•°æ‰§è¡Œä¸€éï¼Œè¿™ä¸ªå‡½æ•°è¯¦æƒ…ä»¶destroyeråˆ†æ</span></span><br><span class="line">      <span class="keyword">if</span> (reading) <span class="keyword">return</span> <span class="comment">// å¦‚æœæ²¡æœ‰errï¼Œè€Œä¸”æ­£åœ¨readingï¼Œreturn</span></span><br><span class="line">      destroys.forEach(call) <span class="comment">// å¦‚æœreadingä¸ºfalseï¼Œé‚£ä¹ˆdestroyerçš„å›è°ƒé‡Œé¢ï¼Œå°†destroysæ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå‡½æ•°æ‰§è¡Œä¸€éï¼Œè¿™ä¸ªå‡½æ•°è¯¦æƒ…ä»¶destroyeråˆ†æ</span></span><br><span class="line">      callback(error) <span class="comment">// æœ€åï¼Œæ‰§è¡Œç”¨æˆ·ä¼ è¿›æ¥çš„callbackå‚æ•°</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  streams.reduce(pipe) <span class="comment">// é€šè¿‡æ•°ç»„çš„reduceæ–¹æ³•ï¼Œé€æ­¥æ‰§è¡ŒStream.pipe</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥æˆ‘ä»¬é‡ç‚¹çœ‹çœ‹destroyerå‡½æ•°</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> destroyer = <span class="function"><span class="keyword">function</span> (<span class="params">stream, reading, writing, callback</span>) </span>&#123;</span><br><span class="line">  callback = once(callback) <span class="comment">// ä¿è¯callbackåªæ‰§è¡Œä¸€æ¬¡ï¼Œonceæ¥è‡ªä¾èµ–ï¼Œæ„Ÿå…´è¶£å¯ä»¥è‡ªè¡ŒæŸ¥çœ‹</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> closed = <span class="literal">false</span>  <span class="comment">// æ ‡å¿—streamæ˜¯å¦å·²ç»close</span></span><br><span class="line">  stream.on(<span class="string">'close'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    closed = <span class="literal">true</span> <span class="comment">// è§¦å‘closeäº‹ä»¶ï¼Œå°†closedè®¾ç½®ä¸ºtrue</span></span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// eosä¾èµ–ç®€ä»‹ï¼šA node module that calls a callback when a readable/writable/duplex stream has completed or failed.</span></span><br><span class="line">  eos(stream, &#123;<span class="attr">readable</span>: reading, <span class="attr">writable</span>: writing&#125;, <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">return</span> callback(err)</span><br><span class="line">    closed = <span class="literal">true</span></span><br><span class="line">    callback()</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> destroyed = <span class="literal">false</span> <span class="comment">// æ ‡å¿—streamæ˜¯å¦å·²ç»destroy</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (closed) <span class="keyword">return</span> <span class="comment">// å¦‚æœclosedï¼Œreturn</span></span><br><span class="line">    <span class="keyword">if</span> (destroyed) <span class="keyword">return</span> <span class="comment">// å¦‚æœdestroyedï¼Œreturn</span></span><br><span class="line">    destroyed = <span class="literal">true</span> <span class="comment">// å°†destroyedè®¾ç½®ä¸ºtrueï¼Œé˜²æ­¢é‡å¤æ‰§è¡Œä¸‹æ–¹é€»è¾‘</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ ¹æ®streamçš„ç±»å‹ï¼Œdestroy</span></span><br><span class="line">    <span class="keyword">if</span> (isFS(stream)) <span class="keyword">return</span> stream.close(noop) <span class="comment">// use close for fs streams to avoid fd leaks</span></span><br><span class="line">    <span class="keyword">if</span> (isRequest(stream)) <span class="keyword">return</span> stream.abort() <span class="comment">// request.destroy just do .end - .abort is what we want</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (isFn(stream.destroy)) <span class="keyword">return</span> stream.destroy()</span><br><span class="line">    <span class="comment">// å¦‚æœstreamä¸æ˜¯ä»¥ä¸Šç±»å‹ï¼Œè°ƒç”¨callbackè¿”å›error</span></span><br><span class="line">    callback(err || <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'stream was destroyed'</span>))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æºç å·²ç»åˆ†æå®Œäº†ï¼Œæˆ‘ä»¬æ¢³ç†ä¸€ä¸‹æ ¸å¿ƒä¸»æµç¨‹ï¼Œåˆ†æ”¯æƒ…å†µè¯·å¿½ç•¥ã€‚</p><ol><li>å…¥å‚ä¼ å¤šä¸ªstreamæˆ–è€…streamsæ•°ç»„ï¼Œæœ€åä¸€ä¸ªå‚æ•°ä¼ å…¥callbackåˆ°pumpå‡½æ•°ã€‚</li><li>pumpè§£æå‚æ•°ï¼ŒåŒæ—¶é€šè¿‡streams.reduce(pipe)å°†å¤šä¸ªstreamåˆå¹¶æˆä¸€ä¸ªstreamã€‚</li><li>åœ¨ç¬¬äºŒæ­¥çš„è¿‡ç¨‹ä¸­ï¼Œæ ¹æ®streamç”Ÿæˆdestroysæ•°ç»„ï¼Œæ­¤æ•°ç»„åŒ…å«äº†è°ƒç”¨destroyerå‡½æ•°è¿”å›çš„ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œè¯¥åŒ¿åå‡½æ•°ä¼šé”€æ¯å½“å‰çš„streamã€‚</li><li>eosæ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå¦‚æœé‡åˆ°é”™è¯¯, æ‰§è¡Œcallback(err)ï¼Œå³destroys.forEach(call)ã€‚è¿™æ ·pumpå‡½æ•°å…¥å‚çš„æ‰€æœ‰streamè¿›è¡Œé”€æ¯ã€‚</li></ol><p>å¥½çš„ï¼Œåˆ†æå®Œæ¯•ã€‚å…¶ä¸­æ¶‰åŠåˆ°æ¯”è¾ƒå¤šé—­åŒ…çš„åº”ç”¨ï¼Œæ¯”å¦‚åœ¨destroyerå‡½æ•°ä¸­closedå’Œdestroyedå˜é‡ï¼Œå°±æ˜¯åœ¨è¿”å›çš„åŒ¿åå‡½æ•°ä¸­å¯ä»¥è®¿é—®ã€‚å†æ¯”å¦‚pumpä¸»å‡½æ•°ä¸­ï¼Œdestroyså˜é‡ï¼Œreturnçš„destroyerå‡½æ•°æ‰§è¡Œè¿‡ç¨‹ä¸­çš„callbackä¸­å¯ä»¥è®¿é—®ã€‚å¯¹äºæœªæ¥éœ€è¦è®¿é—®çš„æ—¶å€™å°±èƒ½è‡ªç”±è®¿é—®ï¼Œè¿™å°±æ˜¯é—­åŒ…çš„ä¸€ä¸ªéå¸¸å…·ä½“çš„å­¦ä¹ ä¾‹å­ã€‚</p><p>è¿™ä¸ªæºç åˆ†æè¿˜æ˜¯æ¯”è¾ƒç®€å•ï¼Œå…¶ä¸­ç¨å¾®æœ‰ç‚¹éš¾çš„ç‚¹ï¼Œæ˜¯ä¸‹æ–¹çš„ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> destroys = streams.map(<span class="function"><span class="keyword">function</span> (<span class="params">stream, i</span>) </span>&#123; <span class="comment">// é€šè¿‡streams.mapè·å–destroyå‡½æ•°çš„æ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„åœ¨æœªæ¥çš„destroyerçš„callbackä¸­å¯èƒ½ç”¨åˆ°</span></span><br><span class="line">  <span class="keyword">var</span> reading = i &lt; streams.length - <span class="number">1</span> <span class="comment">// streamsæ²¡åˆ°æœ€åä¸€ä¸ªçš„æ—¶å€™ï¼ŒreadingçŠ¶æ€éƒ½æ˜¯true</span></span><br><span class="line">  <span class="keyword">var</span> writing = i &gt; <span class="number">0</span> <span class="comment">// streamsä»ç¬¬äºŒä¸ªå¼€å§‹ï¼ŒwritingçŠ¶æ€éƒ½æ˜¯true</span></span><br><span class="line">  <span class="keyword">return</span> destroyer(stream, reading, writing, <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!error) error = err <span class="comment">// streamså…±äº«çš„errorå€¼ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œå…ˆèµ‹å€¼</span></span><br><span class="line">    <span class="keyword">if</span> (err) destroys.forEach(call) <span class="comment">// å¦‚æœå­˜åœ¨errï¼Œå°†destroysæ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå‡½æ•°æ‰§è¡Œä¸€éï¼Œè¿™ä¸ªå‡½æ•°è¯¦æƒ…ä»¶destroyeråˆ†æ</span></span><br><span class="line">    <span class="keyword">if</span> (reading) <span class="keyword">return</span> <span class="comment">// å¦‚æœæ²¡æœ‰errï¼Œè€Œä¸”æ­£åœ¨readingï¼Œreturn</span></span><br><span class="line">    destroys.forEach(call) <span class="comment">// å¦‚æœreadingä¸ºfalseï¼Œé‚£ä¹ˆdestroyerçš„å›è°ƒé‡Œé¢ï¼Œå°†destroysæ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå‡½æ•°æ‰§è¡Œä¸€éï¼Œè¿™ä¸ªå‡½æ•°è¯¦æƒ…ä»¶destroyeråˆ†æ</span></span><br><span class="line">    callback(error) <span class="comment">// æœ€åï¼Œæ‰§è¡Œç”¨æˆ·ä¼ è¿›æ¥çš„callbackå‚æ•°</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ä¸€å¼€å§‹çœ‹åˆ°destroysèµ‹å€¼ä¹‹åå¹¶æ²¡æœ‰åœ¨åé¢ç”¨åˆ°ï¼Œè§‰å¾—ä»£ç æœ‰é—®é¢˜ï¼Œä»”ç»†ä¸€çœ‹ï¼Œå…¶å®å®ƒåœ¨destroyerå‡½æ•°çš„callbackä¸­æœ‰ç”¨åˆ°ã€‚è¿™æ®µé€»è¾‘ä¸ªäººæ„Ÿè§‰ä¼šæœ‰ç‚¹ç»•ï¼Œå¦‚æœä¸è®¤çœŸçœ‹ã€‚</p><p>Okï¼Œä»Šå¤©ï¼Œæˆ‘ä»¬å°±å¼€å¿ƒçš„åˆ†æå®Œpumpçš„æºç å•¦ï¼Œå†™ä»£ç çš„æƒ³è±¡åŠ›åˆå¯ä»¥æ›´ä¸°å¯Œä¸€ç‚¹ï¼</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;è¿‘æœŸåœ¨ç¿»é˜…gulpçš„æºç ï¼Œå®ƒå¼•ç”¨åˆ°äº†å¾ˆå¤šå¤–éƒ¨åŒ…ï¼Œä¸ç”¨æ…Œï¼Œå¾…æˆ‘æŠ½ä¸å‰¥èŒ§é€ä¸ªå‡»ç ´ã€‚æ¥ä¸‹æ¥ä¼šå†™gulpç³»åˆ—çš„æºç è§£æï¼Œä¼šå°†gulpä½¿ç”¨çš„æ ¸å¿ƒåº“é€ä¸ªä»‹ç»ï¼Œæœ€åå†ä¸²èµ·æ¥æ¢³ç†gulpçš„æµç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;é€‰æ‹©ç”¨åˆ†æ€»çš„ç»“æ„è®²è§£gulpæºç ï¼Œæ˜¯å› ä¸ºæ€»åˆ†æ€»çš„æ„ä¹‰ä¸å¤ªå¤§ã€‚gulpæœ¬èº«å¼•ç”¨äº†å¾ˆå¤šç¬¬ä¸‰æ–¹åº“ï¼Œå¦‚æœèšç„¦äºå…¶ä¸»åº“å»è¯´æµç¨‹ï¼Œå®é™…ä¸Šæ²¡æœ‰å¤ªå¤šå€¼å¾—è¯´çš„ä¸œè¥¿ã€‚&lt;/p&gt;
&lt;p&gt;æŠ›å¼€å¼•ç”¨çš„è¯¸å¤šåº“ï¼Œgulpæœ€æ ¸å¿ƒçš„è¿˜æ˜¯ä½¿ç”¨äº†Streamã€‚å¯¹äºStreamçš„æ¦‚å¿µï¼Œæˆ‘å°±ä¸èµ˜è¿°äº†ï¼Œä¸ç†Ÿæ‚‰çš„åŒå­¦å»å›é¡¾ä¸€ä¸‹nodeçš„ç›¸å…³æ–‡æ¡£ã€‚è¿™é‡Œæœ‰ä¸€ç¯‡æ–‡ç« å€¼å¾—ä¸€è¯» &lt;a href=&quot;https://github.com/substack/stream-handbook&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;em&gt;stream-handbook&lt;/em&gt;&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å¦å¤–ï¼Œæºç åˆ†æçš„æ–‡ç« ï¼Œæˆ‘çš„åˆè¡·æ›´å¤šæ˜¯æ€»ç»“å›é¡¾ï¼Œå¦‚æœåŒæ—¶èƒ½å¯¹è¯»è€…æœ‰æ‰€å¸®åŠ©ï¼Œä¹Ÿæ˜¯ä¸€ä»¶å¥½äº‹ã€‚&lt;/p&gt;
&lt;h2 id=&quot;pumpç®€ä»‹&quot;&gt;&lt;a href=&quot;#pumpç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;pumpç®€ä»‹&quot;&gt;&lt;/a&gt;pumpç®€ä»‹&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/mafintosh/pump&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;pump&lt;/a&gt;æ˜¯ä¸€ä¸ªå°nodeæ¨¡å—ï¼Œå®ƒé€šè¿‡ç®¡é“å°†æµè¿æ¥åœ¨ä¸€èµ·ï¼Œå¹¶åœ¨å…¶ä¸­ä¸€ä¸ªå…³é—­æ—¶é”€æ¯æ‰€æœ‰æµã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆåˆ†æpumpï¼Œä¸¤ç‚¹åŸå› &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;gulpæºç é˜…è¯»è¿‡ç¨‹ä¸­ä¸€è·¯è¿½æº¯åˆ°pumpï¼Œpumpç®—æ˜¯åŸºç¡€ã€‚&lt;/li&gt;
&lt;li&gt;pumpçš„å®ç°ä¸­æœ‰é—­åŒ…çš„åº”ç”¨åœºæ™¯ï¼Œå€¼å¾—åŠ æ·±å¯¹é—­åŒ…çš„å­¦ä¹ ã€‚&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
    
    
      <category term="gulp" scheme="http://yoursite.com/tags/gulp/"/>
    
  </entry>
  
  <entry>
    <title>èŠèŠé€ è½®å­å’Œæ‹†è½®å­</title>
    <link href="http://yoursite.com/2019/12/19/%E8%81%8A%E8%81%8A%E9%80%A0%E8%BD%AE%E5%AD%90%E5%92%8C%E6%8B%86%E8%BD%AE%E5%AD%90/"/>
    <id>http://yoursite.com/2019/12/19/%E8%81%8A%E8%81%8A%E9%80%A0%E8%BD%AE%E5%AD%90%E5%92%8C%E6%8B%86%E8%BD%AE%E5%AD%90/</id>
    <published>2019-12-19T10:04:00.000Z</published>
    <updated>2020-01-29T10:59:34.354Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸ºäº†è§£å†³å·¥ä½œé—®é¢˜ï¼Œæˆ‘çœ‹äº†ä¸€äº›åº“çš„æºç ã€‚ä¹ŸåŸºäºç¤¾åŒºçš„å®ç°ï¼Œå·¥ä½œä¸­å®šåˆ¶äº†ä¸€äº›è½®å­ã€‚æœ€è¿‘å¯¹é€ è½®å­å’Œæ‹†è½®å­æœ‰ä¸€äº›è‡ªå·±çš„æ„Ÿæƒ³ï¼Œå’Œå¤§å®¶åˆ†äº«ä¸‹ã€‚</p><h2 id="æ‹†"><a href="#æ‹†" class="headerlink" title="æ‹†"></a>æ‹†</h2><p>å…ˆè¯´è¯´æ‹†è½®å­çš„å¿ƒè·¯å†ç¨‹ï¼Œæˆ‘ç»å†äº†å‡ ä¸ªé˜¶æ®µï¼š</p><ol><li>å¬è¯´çœ‹è¿‡xxxåº“çš„æºç å¾ˆç‰›é€¼ï¼Œå¥½åƒä¼šæ¶¨å·¥èµ„å‘¢ï¼Œçœ‹ä¸€çœ‹å¹å¹ç‰›å§</li><li>è¿™ä¸ªbugæ¶‰åŠåˆ°å¼•å…¥npmåŒ…çš„æºç äº†ï¼Œä¸çœ‹çœ‹ä¸çŸ¥é“æ€ä¹ˆè§£å†³ï¼Œç¡¬ç€å¤´çš®ä¸Šå§</li><li>æˆ‘æƒ³åšæŸä¸ªå·¥å…·ï¼Œä¸çŸ¥é“æ€ä¹ˆå®ç°ï¼Œè¦ä¸å‚è€ƒä¸‹ç¤¾åŒºçš„xxxï¼Œçœ‹çœ‹æºç å§</li><li>è¿™ä¸ªåº“çš„apiè®¾è®¡çš„çœŸå¥½ï¼Œæˆ‘ä¹Ÿæƒ³è®¾è®¡ç±»ä¼¼çš„apiï¼Œçœ‹çœ‹æºç å§</li></ol><p>ç®€å•æ¥è¯´ï¼Œå°±æ˜¯ä»åº”è¯•æ•™è‚²åˆ°ç´ è´¨æ•™è‚²çš„è¿›åŒ–ã€‚è¿™å…¶ä¸­çš„è¿‡ç¨‹ï¼Œè¦æˆ‘ç°åœ¨å›æƒ³ï¼Œè¿˜æ˜¯ç¬¬ä¸€æ­¥å†ç¨‹æœ€é‡è¦ã€‚å°±åƒçœ‹åè‘—ä¸€æ ·ï¼Œå¦‚æœè§‰å¾—å¤§éƒ¨å¤´çœ‹ç€æ¶å¿ƒï¼Œé‚£å¯èƒ½ä¸€ç›´ä¸ä¼šå»çœ‹äº†ï¼Œæ€»è¦æœ‰ä¸€ä¸ªå¥‘æœºå…ˆå…‹æœææƒ§ã€‚è€Œæ¶¨å·¥èµ„è¿™ä¸ªæœ€åŸå§‹çš„æ¬²æœ›ï¼Œè¿˜æ˜¯æœ‰ä¸€å®šçš„åŠ©æ¨åŠ›è®©æˆ‘å»ä¸»åŠ¨å­¦ä¹ ä¸€äº›ç¤¾åŒºä¼˜ç§€åº“çš„æºç ã€‚å½“ç„¶å•¦ï¼Œçœ‹æºç é‚£ä¹ˆæœ‰è¶£ï¼Œåé¢æˆ‘ä¹äºé˜…è¯»è‡ªç„¶æ˜¯æ°´åˆ°æ¸ æˆçš„äº‹æƒ…ã€‚</p><a id="more"></a><h2 id="é€ "><a href="#é€ " class="headerlink" title="é€ "></a>é€ </h2><p>å†ç®€å•è¯´è¯´é€ è½®å­ï¼Œè¿™ä¸ªæ²¡ä»€ä¹ˆå¿ƒè·¯å†ç¨‹å§ï¼Œå°±æ˜¯æ ¹æ®ä¸šåŠ¡éœ€æ±‚è‡ªç„¶è€Œç„¶è¦è‡ªå·±å®šåˆ¶ä¸€äº›è½®å­ã€‚å¯¹æˆ‘å½±å“æ¯”è¾ƒå¤§çš„æ˜¯Dan Abramovï¼Œæ²¡è®°é”™çš„è¯ï¼Œæœ‰ä¸€æ¬¡ä»–å‘twitteré—®å¤§å®¶å¦‚æœä¸€ä¸ªåº“ä¸æ»¡è¶³ä½ çš„æŸäº›éœ€æ±‚ä½ ä¼šæ€ä¹ˆåŠå‘¢ï¼Ÿä»–æ˜¯å»ºè®®ç›´æ¥forkä¸€ä»½ï¼Œç„¶åè‡ªå·±ä¿®æ”¹è¿™ä¸ªåº“çš„æºç æ¥æ»¡è¶³è‡ªå·±çš„éœ€æ±‚ã€‚å…¶å®åœ¨å°ç™½é˜¶æ®µï¼Œæˆ‘ç»å¸¸ä¼šæŠ±æ€¨ä¸€äº›åº“ä¸èƒ½å¾ˆå¥½æ»¡è¶³è‡ªå·±çš„éœ€æ±‚ï¼Œä½†æ˜¯æ²¡æœ‰æƒ³è¿‡è‡ªå·±ä¹Ÿæ˜¯å®Œå…¨å¯ä»¥æ”¹é€ å®ƒçš„ã€‚å½“æˆ‘è„±ç¦»åŸ‹æ€¨å’Œå››å¤„æ‰¾æ›´å¥½çš„è½®å­çš„æ—¶å€™ï¼Œå°±å¼€å§‹äº†è‡ªå·±æ”¹é€ è½®å­æˆ–è€…è‡ªå·±é€ è½®å­ã€‚å¾ˆå¤šäº‹æƒ…ï¼Œè§‰æ‚Ÿå¤§äºè¡ŒåŠ¨ã€‚å¯èƒ½ä½ åœ¨å››å¤„æœç´¢å®Œç¾è½®å­è¿‡ç¨‹ä¸­èŠ±è´¹çš„æ—¶é—´ï¼Œå¯ä»¥åšæ›´å¤šæœ‰è¶£çš„äº‹æƒ…ã€‚</p><h2 id="è¶³è¿¹"><a href="#è¶³è¿¹" class="headerlink" title="è¶³è¿¹"></a>è¶³è¿¹</h2><p>å¼€æºè´¡çŒ®çš„ç²¾ç¥åŒæ ·é‡è¦ï¼Œåœ¨é˜…è¯»æºç çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä¹Ÿä¸ºç¤¾åŒºåšäº†ä¸€ç‚¹è´¡çŒ®ï¼š</p><ul><li><a href="https://github.com/vueComponent/ant-design-vue" target="_blank" rel="noopener">ant-design-vue</a></li><li><a href="https://github.com/petkaantonov/bluebird" target="_blank" rel="noopener">bluebird</a></li></ul><p>åœ¨ant-design-vueä¸­ä¿®å¤äº†ä¸¤ä¸ªæ ·å¼é—®é¢˜ï¼Œbluebirdä¸­ç®€å•å¤ç”¨äº†æ²¡æœ‰å¤ç”¨çš„å‡½æ•°ã€‚è™½ç„¶éƒ½æ˜¯éå¸¸å°çš„äº‹æƒ…ï¼Œä½†æ˜¯å‚ä¸è´¡çŒ®è¿™ä¸ªäº‹æƒ…æœ¬èº«å°±æ˜¯å¾ˆæ­£é¢æ¿€åŠ±è‡ªå·±ã€‚</p><p>åŒæ—¶è¿˜åœ¨reactä»“åº“æäº¤äº†ä¸€ä¸ªæ–‡æ¡£æ›´æ–°çš„<a href="https://github.com/facebook/react/pull/9354" target="_blank" rel="noopener">pr</a>ï¼Œè™½ç„¶æœ€åè¢«Dan Abramov å…³é—­äº†ï¼Œä½†æ˜¯ä¹Ÿåœ¨å’ŒDanäº¤æµçš„è¿‡ç¨‹ä¸­æœ‰æ‰€æ”¶è·ã€‚ä¸ªäººè§‰å¾—ï¼Œå½“è‡ªå·±æ²¡æœ‰ä»»ä½•æˆå°±çš„æ—¶å€™ï¼Œä¸è¦ä¹Ÿæ²¡æœ‰ä»»ä½•ç²¾ç¥ã€‚çƒ­çˆ±ï¼Œå°±è¦æœ‰è¡ŒåŠ¨ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¸ºäº†è§£å†³å·¥ä½œé—®é¢˜ï¼Œæˆ‘çœ‹äº†ä¸€äº›åº“çš„æºç ã€‚ä¹ŸåŸºäºç¤¾åŒºçš„å®ç°ï¼Œå·¥ä½œä¸­å®šåˆ¶äº†ä¸€äº›è½®å­ã€‚æœ€è¿‘å¯¹é€ è½®å­å’Œæ‹†è½®å­æœ‰ä¸€äº›è‡ªå·±çš„æ„Ÿæƒ³ï¼Œå’Œå¤§å®¶åˆ†äº«ä¸‹ã€‚&lt;/p&gt;
&lt;h2 id=&quot;æ‹†&quot;&gt;&lt;a href=&quot;#æ‹†&quot; class=&quot;headerlink&quot; title=&quot;æ‹†&quot;&gt;&lt;/a&gt;æ‹†&lt;/h2&gt;&lt;p&gt;å…ˆè¯´è¯´æ‹†è½®å­çš„å¿ƒè·¯å†ç¨‹ï¼Œæˆ‘ç»å†äº†å‡ ä¸ªé˜¶æ®µï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å¬è¯´çœ‹è¿‡xxxåº“çš„æºç å¾ˆç‰›é€¼ï¼Œå¥½åƒä¼šæ¶¨å·¥èµ„å‘¢ï¼Œçœ‹ä¸€çœ‹å¹å¹ç‰›å§&lt;/li&gt;
&lt;li&gt;è¿™ä¸ªbugæ¶‰åŠåˆ°å¼•å…¥npmåŒ…çš„æºç äº†ï¼Œä¸çœ‹çœ‹ä¸çŸ¥é“æ€ä¹ˆè§£å†³ï¼Œç¡¬ç€å¤´çš®ä¸Šå§&lt;/li&gt;
&lt;li&gt;æˆ‘æƒ³åšæŸä¸ªå·¥å…·ï¼Œä¸çŸ¥é“æ€ä¹ˆå®ç°ï¼Œè¦ä¸å‚è€ƒä¸‹ç¤¾åŒºçš„xxxï¼Œçœ‹çœ‹æºç å§&lt;/li&gt;
&lt;li&gt;è¿™ä¸ªåº“çš„apiè®¾è®¡çš„çœŸå¥½ï¼Œæˆ‘ä¹Ÿæƒ³è®¾è®¡ç±»ä¼¼çš„apiï¼Œçœ‹çœ‹æºç å§&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ç®€å•æ¥è¯´ï¼Œå°±æ˜¯ä»åº”è¯•æ•™è‚²åˆ°ç´ è´¨æ•™è‚²çš„è¿›åŒ–ã€‚è¿™å…¶ä¸­çš„è¿‡ç¨‹ï¼Œè¦æˆ‘ç°åœ¨å›æƒ³ï¼Œè¿˜æ˜¯ç¬¬ä¸€æ­¥å†ç¨‹æœ€é‡è¦ã€‚å°±åƒçœ‹åè‘—ä¸€æ ·ï¼Œå¦‚æœè§‰å¾—å¤§éƒ¨å¤´çœ‹ç€æ¶å¿ƒï¼Œé‚£å¯èƒ½ä¸€ç›´ä¸ä¼šå»çœ‹äº†ï¼Œæ€»è¦æœ‰ä¸€ä¸ªå¥‘æœºå…ˆå…‹æœææƒ§ã€‚è€Œæ¶¨å·¥èµ„è¿™ä¸ªæœ€åŸå§‹çš„æ¬²æœ›ï¼Œè¿˜æ˜¯æœ‰ä¸€å®šçš„åŠ©æ¨åŠ›è®©æˆ‘å»ä¸»åŠ¨å­¦ä¹ ä¸€äº›ç¤¾åŒºä¼˜ç§€åº“çš„æºç ã€‚å½“ç„¶å•¦ï¼Œçœ‹æºç é‚£ä¹ˆæœ‰è¶£ï¼Œåé¢æˆ‘ä¹äºé˜…è¯»è‡ªç„¶æ˜¯æ°´åˆ°æ¸ æˆçš„äº‹æƒ…ã€‚&lt;/p&gt;
    
    </summary>
    
    
    
      <category term="æŠ€æœ¯æ‚è°ˆ" scheme="http://yoursite.com/tags/%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/"/>
    
  </entry>
  
  <entry>
    <title>ç°è‰²çš„bç«™é¦–é¡µ</title>
    <link href="http://yoursite.com/2019/12/13/%E7%81%B0%E8%89%B2%E7%9A%84b%E7%AB%99%E9%A6%96%E9%A1%B5/"/>
    <id>http://yoursite.com/2019/12/13/%E7%81%B0%E8%89%B2%E7%9A%84b%E7%AB%99%E9%A6%96%E9%A1%B5/</id>
    <published>2019-12-13T14:58:15.000Z</published>
    <updated>2020-01-29T10:59:34.346Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šå¤©æ˜¯12.13æ—¥å›½å®¶å…¬ç¥­æ—¥ï¼Œçºªå¿µå—äº¬å¤§å± æ€30000åŒèƒã€‚çœ‹åˆ°ç°è‰²çš„bç«™é¦–é¡µæˆ‘è¿˜æ„£äº†ä¸€ä¸‹ï¼Œéšåé©¬ä¸Šååº”è¿‡æ¥ã€‚</p><p>èŒä¸šä¹ æƒ¯ï¼Œæˆ‘æŸ¥çœ‹äº†ä¸‹bç«™ç°è‰²è’™å±‚å®ç°åŸç†ã€‚</p><p>å¾ˆç®€å•ï¼Œ<code>filter: grayscale(100%)</code>ï¼Œè¿™è¡Œä»£ç å°±å®ç°äº†é¦–é¡µç°è‰²æ»¤é•œã€‚ä½†æ˜¯è¿™ä¸€è¡Œä»£ç å°±èƒ½è®©è®¿é—®bç«™çš„ç½‘å‹è®°èµ·å†å²ã€‚æˆ–è®¸ï¼Œè¿™ä¸ªå°±æ˜¯å‰ç«¯æŠ€æœ¯çš„æ¸©åº¦å§ï¼Œç»™è¿™ä¸ªè¡Œä¸šç‚¹èµã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        

&lt;p&gt;ä»Šå¤©æ˜¯12.13æ—¥å›½å®¶å…¬ç¥­æ—¥ï¼Œçºªå¿µå—äº¬å¤§å± æ€30000åŒèƒã€‚çœ‹åˆ°ç°è‰²çš„bç«™é¦–é¡µæˆ‘è¿˜æ„£äº†ä¸€ä¸‹ï¼Œéšåé©¬ä¸Šååº”è¿‡æ¥ã€‚&lt;/p&gt;
&lt;p&gt;èŒä¸šä¹ æƒ¯ï¼Œæˆ‘æŸ¥çœ‹äº†ä¸‹bç«™ç°è‰²è’™å±‚å®ç°åŸç†ã€‚&lt;/p&gt;


&lt;p&gt;å¾ˆç®€å•ï¼Œ&lt;code&gt;filter: grayscale(100%)&lt;/code&gt;ï¼Œ
      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>node-delegateså­¦ä¹ </title>
    <link href="http://yoursite.com/2019/12/10/node-delegates%E5%AD%A6%E4%B9%A0/"/>
    <id>http://yoursite.com/2019/12/10/node-delegates%E5%AD%A6%E4%B9%A0/</id>
    <published>2019-12-10T13:52:54.000Z</published>
    <updated>2020-01-29T10:59:34.339Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨å­¦ä¹ Koaçš„æºç ï¼Œé™¤äº†middlewareçš„æ€æƒ³ï¼Œæˆ‘å‘ç°å…¶ä¸­ç”¨åˆ°çš„å§”æ‰˜æ¨¡å¼ä¹Ÿæ˜¯éå¸¸å€¼å¾—å­¦ä¹ ã€‚è¯´å®è¯ï¼Œæºç å­¦ä¹ åˆ†äº«çš„æ–‡ç« æ›´é€‚åˆè‡ªå·±çœ‹ï¼Œå› ä¸ºæœ‰æ—¶å€™çœŸçš„è§‰å¾—å¥½ä»£ç èƒœè¿‡åƒè¨€ä¸‡è¯­åˆ†æï¼Œè‡ªå·±å†™å†™é˜…è¯»ä½“ä¼šä¾›å‚è€ƒçš„ä»·å€¼å€’è¿˜æœ‰ä¸€ç‚¹ï¼Œåªæ˜¯æ›´æ¨èå¤§å®¶ä¸»åŠ¨é˜…è¯»æºç ï¼Œå­¦ä¹ è‡ªå·±å¥½å¥‡çš„é»‘é­”æ³•ã€‚</p><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> delegate = <span class="built_in">require</span>(<span class="string">'delegates'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> innerObject = &#123;</span><br><span class="line">  a: <span class="string">'a'</span>,</span><br><span class="line">  methodB: <span class="function"><span class="keyword">function</span> (<span class="params">val</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(val)</span><br><span class="line">  &#125;,</span><br><span class="line">  c: <span class="string">'c'</span>,</span><br><span class="line">  d: <span class="string">'d'</span>,</span><br><span class="line">  e: <span class="string">'e'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> proto = &#123;</span><br><span class="line">  innerObject</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">delegate(proto, <span class="string">'innerObject'</span>)</span><br><span class="line">  .access(<span class="string">'a'</span>)          <span class="comment">// æŠŠaå±æ€§çš„getterå’Œsetteréƒ½å§”æ‰˜åˆ°protoå¯¹è±¡ä¸Šé¢</span></span><br><span class="line">  .method(<span class="string">'methodB'</span>)    <span class="comment">// æŠŠmethodBæ–¹æ³•å§”æ‰˜å€’protoå¯¹è±¡ä¸Šé¢</span></span><br><span class="line">  .getter(<span class="string">'c'</span>)          <span class="comment">// æŠŠcå±æ€§çš„getterprotoå¯¹è±¡ä¸Šé¢</span></span><br><span class="line">  .setter(<span class="string">'d'</span>)          <span class="comment">// æŠŠdå±æ€§çš„setteréƒ½å§”æ‰˜å€’protoå¯¹è±¡ä¸Šé¢</span></span><br><span class="line">  .fluent(<span class="string">'e'</span>)          <span class="comment">// æŠŠè®¾ç½®eæˆ–è€…è¯»å–eçš„æ–¹æ³•å§”æ‰˜åˆ°protoå¯¹è±¡ä¸Šé¢</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> q = proto.e()</span><br><span class="line"></span><br><span class="line">proto.e(<span class="number">1</span>)</span><br><span class="line">  .e(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(proto)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰“å°ä¿¡æ¯å¦‚ä¸‹</span></span><br><span class="line"><span class="comment">// &#123;</span></span><br><span class="line"><span class="comment">//   innerObject: &#123; a: 'a', methodB: [Function: methodB], c: 'c', d: 'd', e: 2 &#125;,</span></span><br><span class="line"><span class="comment">//   a: [Getter/Setter],</span></span><br><span class="line"><span class="comment">//   methodB: [Function],</span></span><br><span class="line"><span class="comment">//   c: [Getter],</span></span><br><span class="line"><span class="comment">//   d: [Setter],</span></span><br><span class="line"><span class="comment">//   e: [Function]</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure><p>å…¶å®çœ‹äº†ä½¿ç”¨æ–¹æ³•å°±çŸ¥é“delegatesåº“æ˜¯åšä»€ä¹ˆçš„äº†ï¼Œè¯´ç™½äº†å°±æ˜¯å°†å¯¹è±¡å†…éƒ¨å…¶ä»–å¯¹è±¡çš„å±æ€§æˆ–è€…æ–¹æ³•å§”æ‰˜åˆ°å¯¹è±¡ä¸Šï¼Œåœ¨æœªæ¥ä½¿ç”¨è¿™ä¸ªå¯¹è±¡çš„è¿‡ç¨‹å¯ä»¥æ›´åŠ æ–¹ä¾¿è€Œä¸ç”¨å…³æ³¨å¯¹è±¡å†…éƒ¨çš„å¯¹è±¡ã€‚</p><a id="more"></a><h2 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h2><p>åœ¨Koaæ¡†æ¶å±‚é¢çš„åº”ç”¨åœºæ™¯ï¼Œå…¶å®å°±æ˜¯å°†requestå¯¹è±¡å’Œresponseå¯¹è±¡ä¸Šçš„å±æ€§æ–¹æ³•ï¼Œå§”æ‰˜åˆ°è¢«å§”æ‰˜çš„contextå¯¹è±¡ä¸Šï¼Œè¿™æ ·æ‰æœ‰äº†ç±»ä¼¼context.URLè¿™ç§æ–¹å¼ä¾¿æ·çš„æ–¹å¼å»è·å–requestæˆ–è€…responseå¯¹è±¡ä¸Šé¢çš„å±æ€§æˆ–æ–¹æ³•ã€‚è®©æˆ‘æ€»ç»“è¿™ç§å§”æ‰˜æ¨¡å¼çš„ä¼˜ç‚¹ï¼Œä¸»è¦æœ‰ä¸¤ç‚¹</p><ul><li>ä»£ç æ›´å…·è¡¨ç°åŠ›ï¼Œå¯ä»¥åœ¨é˜…è¯»ä»£ç çš„è¿‡ç¨‹ä¸­çŸ¥é“åŠ¨ä½œ</li><li>è¢«å§”æ‰˜å¯¹è±¡æ›´æ˜“ä½¿ç”¨</li></ul><p>æ›´å…·è¡¨ç°åŠ›è¿™ä¸€ç‚¹ï¼Œçœ‹çœ‹å¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">delegate(proto, <span class="string">'innerObject'</span>)</span><br><span class="line">  .access(<span class="string">'a'</span>)          <span class="comment">// æŠŠaå±æ€§çš„getterå’Œsetteréƒ½å§”æ‰˜åˆ°protoå¯¹è±¡ä¸Šé¢</span></span><br><span class="line">  .method(<span class="string">'methodB'</span>)    <span class="comment">// æŠŠmethodBæ–¹æ³•å§”æ‰˜å€’protoå¯¹è±¡ä¸Šé¢</span></span><br><span class="line">  .getter(<span class="string">'c'</span>)          <span class="comment">// æŠŠcå±æ€§çš„getterprotoå¯¹è±¡ä¸Šé¢</span></span><br><span class="line">  .setter(<span class="string">'d'</span>)          <span class="comment">// æŠŠdå±æ€§çš„setteréƒ½å§”æ‰˜å€’protoå¯¹è±¡ä¸Šé¢</span></span><br><span class="line">  .fluent(<span class="string">'e'</span>)          <span class="comment">// æŠŠè®¾ç½®eæˆ–è€…è¯»å–eçš„æ–¹æ³•å§”æ‰˜åˆ°protoå¯¹è±¡ä¸Šé¢</span></span><br></pre></td></tr></table></figure><p>å…¶å®å¦‚æœäº†è§£è¿™ä¸ªdelegateåº“çš„æ–¹æ³•ä¹‹åï¼Œä½ çœ‹åˆ°è¿™æ ·çš„é“¾å¼è°ƒç”¨ä»£ç ä¼šè§‰å¾—å¾ˆèˆ’é€‚ï¼Œä¹Ÿå¾ˆæ¸…æ™°çŸ¥é“ä»£ç è¦è¡¨è¾¾çš„å«ä¹‰ã€‚ä¸ªäººè§‰å¾—ï¼Œæ‰€è°“ä»£ç å³æ³¨é‡Šçš„å±‚æ¬¡å·²ç»æ˜¯è¾¾åˆ°äº†ã€‚</p><h2 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h2><p>åŸç†å±‚é¢ç›¸å¯¹ç®€å•ï¼Œå»ºè®®è‡ªå·±æ‰“å¼€æºç é£Ÿç”¨<a href="https://github.com/tj/node-delegates/blob/master/index.js" target="_blank" rel="noopener">node-delegates</a>ã€‚é“¾å¼è°ƒç”¨çš„åŸç†å°±æ˜¯<code>return this</code>ï¼Œå§”æ‰˜çš„ä¸»è¦åŸç†æ˜¯getterå’Œsetterï¼Œæºç å®ç°æ–¹å¼ç”¨çš„apiæ¯”è¾ƒæ—§ï¼Œç°åœ¨å¯ä»¥ç”¨Object.definePropertyæ–¹æ³•å®ç°ã€‚</p><h2 id="å¹æ§"><a href="#å¹æ§" class="headerlink" title="å¹æ§"></a>å¹æ§</h2><p>TJ Holowaychuk å°±æ˜¯è¿™ä¸ªnode-delegatesåº“çš„ä½œè€…ï¼Œæ®ç½‘ä¸Šä¿¡æ¯äº†è§£ï¼Œä»–æœ€åˆæ˜¯ä¸€ä½å¹³é¢è®¾è®¡å¸ˆï¼Œå­¦ä¹ ç¼–ç¨‹å°±æ˜¯å»é˜…è¯»åˆ«äººçš„ä»£ç ï¼Œå¹¶ææ¸…æ¥šé‚£äº›ä»£ç æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚é¢ï¼ŒTJæ˜¯æˆ‘å­¦ä¹ è·¯ä¸Šçš„æ¦œæ ·ï¼Œæœªæ¥è¦æ›´å¤šå»å­¦ä¹ ä¼˜ç§€çš„åº“ï¼Œæé«˜è‡ªå·±çš„ç¼–ç¨‹æ€ç»´å’Œèƒ½åŠ›ï¼</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ€è¿‘åœ¨å­¦ä¹ Koaçš„æºç ï¼Œé™¤äº†middlewareçš„æ€æƒ³ï¼Œæˆ‘å‘ç°å…¶ä¸­ç”¨åˆ°çš„å§”æ‰˜æ¨¡å¼ä¹Ÿæ˜¯éå¸¸å€¼å¾—å­¦ä¹ ã€‚è¯´å®è¯ï¼Œæºç å­¦ä¹ åˆ†äº«çš„æ–‡ç« æ›´é€‚åˆè‡ªå·±çœ‹ï¼Œå› ä¸ºæœ‰æ—¶å€™çœŸçš„è§‰å¾—å¥½ä»£ç èƒœè¿‡åƒè¨€ä¸‡è¯­åˆ†æï¼Œè‡ªå·±å†™å†™é˜…è¯»ä½“ä¼šä¾›å‚è€ƒçš„ä»·å€¼å€’è¿˜æœ‰ä¸€ç‚¹ï¼Œåªæ˜¯æ›´æ¨èå¤§å®¶ä¸»åŠ¨é˜…è¯»æºç ï¼Œå­¦ä¹ è‡ªå·±å¥½å¥‡çš„é»‘é­”æ³•ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ä½¿ç”¨&quot;&gt;&lt;a href=&quot;#ä½¿ç”¨&quot; class=&quot;headerlink&quot; title=&quot;ä½¿ç”¨&quot;&gt;&lt;/a&gt;ä½¿ç”¨&lt;/h2&gt;&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; delegate = &lt;span class=&quot;built_in&quot;&gt;require&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&#39;delegates&#39;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; innerObject = &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  a: &lt;span class=&quot;string&quot;&gt;&#39;a&#39;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  methodB: &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;val&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(val)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  c: &lt;span class=&quot;string&quot;&gt;&#39;c&#39;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  d: &lt;span class=&quot;string&quot;&gt;&#39;d&#39;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  e: &lt;span class=&quot;string&quot;&gt;&#39;e&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; proto = &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  innerObject&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;delegate(proto, &lt;span class=&quot;string&quot;&gt;&#39;innerObject&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  .access(&lt;span class=&quot;string&quot;&gt;&#39;a&#39;&lt;/span&gt;)          &lt;span class=&quot;comment&quot;&gt;// æŠŠaå±æ€§çš„getterå’Œsetteréƒ½å§”æ‰˜åˆ°protoå¯¹è±¡ä¸Šé¢&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  .method(&lt;span class=&quot;string&quot;&gt;&#39;methodB&#39;&lt;/span&gt;)    &lt;span class=&quot;comment&quot;&gt;// æŠŠmethodBæ–¹æ³•å§”æ‰˜å€’protoå¯¹è±¡ä¸Šé¢&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  .getter(&lt;span class=&quot;string&quot;&gt;&#39;c&#39;&lt;/span&gt;)          &lt;span class=&quot;comment&quot;&gt;// æŠŠcå±æ€§çš„getterprotoå¯¹è±¡ä¸Šé¢&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  .setter(&lt;span class=&quot;string&quot;&gt;&#39;d&#39;&lt;/span&gt;)          &lt;span class=&quot;comment&quot;&gt;// æŠŠdå±æ€§çš„setteréƒ½å§”æ‰˜å€’protoå¯¹è±¡ä¸Šé¢&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  .fluent(&lt;span class=&quot;string&quot;&gt;&#39;e&#39;&lt;/span&gt;)          &lt;span class=&quot;comment&quot;&gt;// æŠŠè®¾ç½®eæˆ–è€…è¯»å–eçš„æ–¹æ³•å§”æ‰˜åˆ°protoå¯¹è±¡ä¸Šé¢&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; q = proto.e()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;proto.e(&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  .e(&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(proto)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// æ‰“å°ä¿¡æ¯å¦‚ä¸‹&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// &amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//   innerObject: &amp;#123; a: &#39;a&#39;, methodB: [Function: methodB], c: &#39;c&#39;, d: &#39;d&#39;, e: 2 &amp;#125;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//   a: [Getter/Setter],&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//   methodB: [Function],&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//   c: [Getter],&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//   d: [Setter],&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//   e: [Function]&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// &amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;å…¶å®çœ‹äº†ä½¿ç”¨æ–¹æ³•å°±çŸ¥é“delegatesåº“æ˜¯åšä»€ä¹ˆçš„äº†ï¼Œè¯´ç™½äº†å°±æ˜¯å°†å¯¹è±¡å†…éƒ¨å…¶ä»–å¯¹è±¡çš„å±æ€§æˆ–è€…æ–¹æ³•å§”æ‰˜åˆ°å¯¹è±¡ä¸Šï¼Œåœ¨æœªæ¥ä½¿ç”¨è¿™ä¸ªå¯¹è±¡çš„è¿‡ç¨‹å¯ä»¥æ›´åŠ æ–¹ä¾¿è€Œä¸ç”¨å…³æ³¨å¯¹è±¡å†…éƒ¨çš„å¯¹è±¡ã€‚&lt;/p&gt;
    
    </summary>
    
    
    
      <category term="Koa" scheme="http://yoursite.com/tags/Koa/"/>
    
      <category term="å§”æ‰˜æ¨¡å¼" scheme="http://yoursite.com/tags/%E5%A7%94%E6%89%98%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>æµ…è°ˆVueRouterå®ç°åŸç†</title>
    <link href="http://yoursite.com/2019/12/02/%E6%B5%85%E8%B0%88VueRouter%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/"/>
    <id>http://yoursite.com/2019/12/02/%E6%B5%85%E8%B0%88VueRouter%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/</id>
    <published>2019-12-02T11:03:27.000Z</published>
    <updated>2020-01-29T10:59:34.346Z</updated>
    
    <content type="html"><![CDATA[<p>æœ‰æœ‹å‹åé¦ˆæƒ³çœ‹æ›´â€œå¹²â€ä¸€ç‚¹çš„çŸ¥è¯†åˆ†äº«ï¼Œæœ€è¿‘åº“å­˜é‡Œé¢åªæœ‰æˆ‘ä¹‹å‰åœ¨è…¾è®¯å›¢é˜Ÿé‚£è¾¹åˆ†äº«è¿‡çš„VueRouteråŸç†ï¼Œç°æŠŠPPTæ•´ç†ä¸€éï¼Œå…·ä½“è®²è§£éƒ¨åˆ†ä¸èµ˜è¿°ï¼Œä»…ä¾›æ—¥åå‚è€ƒã€‚</p><h2 id="å‰ç«¯è·¯ç”±å®ç°æ–¹å¼"><a href="#å‰ç«¯è·¯ç”±å®ç°æ–¹å¼" class="headerlink" title="å‰ç«¯è·¯ç”±å®ç°æ–¹å¼"></a>å‰ç«¯è·¯ç”±å®ç°æ–¹å¼</h2><p>è¿™éƒ¨åˆ†å†…å®¹ç®—æ˜¯ä¸€ä¸ªåŸºç¡€å›é¡¾ï¼Œå¦‚æœå·²ç»éå¸¸ç†Ÿæ‚‰äº†ï¼Œå¯ä»¥è·³è¿‡ç›´æ¥çœ‹æºç åˆ†æéƒ¨åˆ†ã€‚<br>å‰ç«¯è·¯ç”±å®ç°æ–¹å¼ä¸»è¦æœ‰ä¸¤ç§ï¼Œå¦‚ä¸‹ï¼š</p><ul><li>Hashæ¨¡å¼</li><li>Historyæ¨¡å¼</li></ul><h3 id="Hashæ¨¡å¼"><a href="#Hashæ¨¡å¼" class="headerlink" title="Hashæ¨¡å¼"></a>Hashæ¨¡å¼</h3><p>HashæŒ‡urlåé¢çš„#å·å’Œåé¢çš„æ‰€æœ‰å­—ç¬¦ã€‚hashä¹Ÿç§°ä½œé”šç‚¹ï¼Œå®ƒå¯ä»¥ä½¿å¯¹åº”çš„idèŠ‚ç‚¹æ˜¾ç¤ºåœ¨æµè§ˆå™¨å¯è§†åŒºåŸŸå†…ã€‚<br>è¦å®ç°å‰ç«¯è·¯ç”±åŠŸèƒ½ï¼Œä¸»è¦æœ‰ä»¥ä¸‹ä¸‰ç‚¹åŸå› ï¼š</p><ol><li>hashå˜æ›´ï¼Œä¸ä¼šå¯¼è‡´æµè§ˆå™¨å‘æœåŠ¡ç«¯å‘é€è¯·æ±‚ï¼Œå½“å‰é¡µé¢ä¹Ÿä¸ä¼šåˆ·æ–°</li><li>hashå˜æ›´ï¼Œä¼šè§¦å‘hashchangeäº‹ä»¶</li><li>hashå˜æ›´ï¼Œä¼šåœ¨æµè§ˆå™¨å†å²è®°å½•ä¸­æ·»åŠ è®°å½•ï¼Œæµè§ˆå™¨å‰è¿›åé€€æŒ‰é”®å¯ä»¥å¯¼èˆª</li></ol><p>ä»£ç å‚è€ƒï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ”¹å˜hashå€¼</span></span><br><span class="line"><span class="built_in">window</span>.location.hash = <span class="string">'home'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–hashå€¼</span></span><br><span class="line"><span class="built_in">window</span>.location.hash <span class="comment">// '#home'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›‘å¬hashå˜æ›´</span></span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'hashchange'</span>, <span class="function"><span class="keyword">function</span> <span class="title">onHashChange</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'hash changed'</span>)</span><br><span class="line">&#125;, <span class="literal">false</span>)</span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="Historyæ¨¡å¼"><a href="#Historyæ¨¡å¼" class="headerlink" title="Historyæ¨¡å¼"></a>Historyæ¨¡å¼</h3><p>ç®€å•ä»‹ç»ä¸‹ç›¸å…³çš„API</p><ol><li>HTML5å¼•å…¥äº†history.pushState()å’Œhistory.replaceState()æ–¹æ³•ï¼Œå®ƒä»¬åˆ†åˆ«å¯ä»¥æ·»åŠ å’Œä¿®æ”¹å†å²è®°å½•æ¡ç›®ã€‚è¿™äº›æ–¹æ³•é€šå¸¸ä¸window.onpopstateé…åˆä½¿ç”¨ã€‚</li><li>pushState() éœ€è¦ä¸‰ä¸ªå‚æ•° ä¸€ä¸ªçŠ¶æ€å¯¹è±¡, ä¸€ä¸ªæ ‡é¢˜ (ç›®å‰è¢«å¿½ç•¥), å’Œ (å¯é€‰çš„) ä¸€ä¸ªURLã€‚</li><li>history.replaceState() çš„ä½¿ç”¨ä¸ history.pushState() éå¸¸ç›¸ä¼¼ï¼ŒåŒºåˆ«åœ¨äº replaceState() æ˜¯ä¿®æ”¹äº†å½“å‰çš„å†å²è®°å½•é¡¹è€Œä¸æ˜¯æ–°å»ºä¸€ä¸ªã€‚ æ³¨æ„è¿™å¹¶ä¸ä¼šé˜»æ­¢å…¶åœ¨å…¨å±€æµè§ˆå™¨å†å²è®°å½•ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„å†å²è®°å½•é¡¹ã€‚</li></ol><p>å¦‚ä½•å®ç°è·¯ç”±å‘¢ï¼Ÿå‚è€ƒä¸‹é¢ä¸‰ç‚¹åŸå› ï¼š</p><ol><li>pushStateæ–°å¢å†å²è®°å½•å¯ä»¥å®ç°æ— åˆ·æ–°æ›´æ”¹åœ°å€æ é“¾æ¥</li><li>å½“ç”¨æˆ·ç‚¹å‡»æµè§ˆå™¨çš„å‰è¿›ï¼Œåé€€æŒ‰é’®ï¼Œä¼šè§¦å‘popstateäº‹ä»¶</li><li>å¸Œæœ›ä¸æ·»åŠ ä¸€ä¸ªæ–°è®°å½•ï¼Œè€Œæ˜¯æ›¿æ¢å½“å‰çš„è®°å½•ï¼Œåˆ™å¯ä»¥ä½¿ç”¨replaceStateæ–¹æ³•</li></ol><p>å‚è€ƒä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// stateï¼šéœ€è¦ä¿å­˜çš„æ•°æ®ï¼Œè¿™ä¸ªæ•°æ®åœ¨è§¦å‘popstateäº‹ä»¶æ—¶ï¼Œå¯ä»¥åœ¨event.stateé‡Œè·å–</span></span><br><span class="line"><span class="comment">// titleï¼šæ ‡é¢˜ï¼ŒåŸºæœ¬æ²¡ç”¨ï¼Œä¸€èˆ¬ä¼  null</span></span><br><span class="line"><span class="comment">// urlï¼šè®¾å®šæ–°çš„å†å²è®°å½•çš„ urlã€‚æ–°çš„ url ä¸å½“å‰ url çš„ origin å¿…é¡»æ˜¯ä¸€æ¨£çš„ï¼Œå¦åˆ™ä¼šæŠ›å‡ºé”™è¯¯ã€‚urlå¯ä»¥æ˜¯ç»å¯¹è·¯å¾„ï¼Œä¹Ÿå¯ä»¥æ˜¯ç›¸å¯¹è·¯å¾„ã€‚</span></span><br><span class="line"><span class="built_in">window</span>.history.pushState(state, title, url)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸ pushState åŸºæœ¬ç›¸åŒï¼Œä½†å®ƒæ˜¯ä¿®æ”¹å½“å‰å†å²è®°å½•ï¼Œè€Œ pushState æ˜¯åˆ›å»ºæ–°çš„å†å²è®°å½•</span></span><br><span class="line"><span class="built_in">window</span>.history.replaceState(state, title, url)</span><br><span class="line"></span><br><span class="line"> <span class="comment">// ç›‘å¬æµè§ˆå™¨å‰è¿›åé€€äº‹ä»¶ï¼ŒpushState ä¸ replaceState æ–¹æ³•ä¸ä¼šè§¦å‘</span></span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">"popstate"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="VueRouterå®ç°åŸç†"><a href="#VueRouterå®ç°åŸç†" class="headerlink" title="VueRouterå®ç°åŸç†"></a>VueRouterå®ç°åŸç†</h2><p>ç®€å•å›é¡¾å®Œå‰ç«¯è·¯ç”±å®ç°æ–¹å¼ï¼Œæˆ‘ä»¬æ¥èšç„¦VueRouterçš„å…·ä½“å®ç°ã€‚æˆ‘ä»¬æ¥åˆ°äº†ç¡¬æ ¸çš„æºç ç¯èŠ‚ã€‚ä¸ç”¨æ‹…å¿ƒï¼Œæˆ‘çœ‹å¾—æ‡‚çš„ä»£ç éƒ½æ¯”è¾ƒç®€å•ã€‚</p><h3 id="VueRouteræ”¯æŒæ¨¡å¼"><a href="#VueRouteræ”¯æŒæ¨¡å¼" class="headerlink" title="VueRouteræ”¯æŒæ¨¡å¼"></a>VueRouteræ”¯æŒæ¨¡å¼</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">VueRouter</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span> (options: RouterOptions = ) &#123;</span><br><span class="line">    <span class="keyword">let</span> mode = options.mode || <span class="string">'hash'</span></span><br><span class="line">    <span class="keyword">this</span>.fallback = mode === <span class="string">'history'</span></span><br><span class="line">      &amp;&amp; !supportsPushState</span><br><span class="line">      &amp;&amp; options.fallback !== <span class="literal">false</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.fallback) &#123;</span><br><span class="line">      mode = <span class="string">'hash'</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!inBrowser) &#123;</span><br><span class="line">      mode = <span class="string">'abstract'</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>.mode = mode</span><br><span class="line">    <span class="keyword">switch</span> (mode) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">'history'</span>:</span><br><span class="line">        <span class="keyword">this</span>.history = <span class="keyword">new</span> HTML5History(<span class="keyword">this</span>, options.base)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">      <span class="keyword">case</span> <span class="string">'hash'</span>:</span><br><span class="line">        <span class="keyword">this</span>.history = <span class="keyword">new</span> HashHistory(</span><br><span class="line">          <span class="keyword">this</span>, options.base, <span class="keyword">this</span>.fallback</span><br><span class="line">        )</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">      <span class="keyword">case</span> <span class="string">'abstract'</span>:</span><br><span class="line">        <span class="keyword">this</span>.history = <span class="keyword">new</span> AbstractHistory(<span class="keyword">this</span>, options.base)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">      <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">if</span> (process.env.NODE_ENV !== <span class="string">'production'</span>) &#123;</span><br><span class="line">          assert(<span class="literal">false</span>, <span class="string">`invalid mode: <span class="subst">$&#123;mode&#125;</span>`</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚ä¸Šæ‰€ç¤ºï¼ŒVueRouteræ”¯æŒä¸‰ç§è·¯ç”±æ¨¡å¼ï¼š</p><ol><li>history mode</li><li>hash mode</li><li>abstract mode</li></ol><p>VueRouterè¿˜æœ‰å¯¹historyæ¨¡å¼æœ‰é™çº§çš„å¤„ç†ï¼Œåœ¨ä¸æ”¯æŒhistoryçš„æµè§ˆå™¨ç¯å¢ƒä¸­ï¼Œå¦‚æœfallbackçš„optionè®¾ç½®ä¸ºtrueï¼ŒVueRouterçš„modeä¼šå›è½åˆ°hashæ¨¡å¼ã€‚<br>abstractæ¨¡å¼ä¸»è¦ç”¨åœ¨æµ‹è¯•ä¸­ï¼Œè¿è¡Œåœ¨éæµè§ˆå™¨ç¯å¢ƒã€‚æˆ‘ä»¬é‡ç‚¹å…³æ³¨historyå’Œhashè¿™ä¸¤ç§æ¨¡å¼ã€‚\</p><h3 id="Historyæ¨¡å¼-1"><a href="#Historyæ¨¡å¼-1" class="headerlink" title="Historyæ¨¡å¼"></a>Historyæ¨¡å¼</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">HTML5History</span> <span class="keyword">extends</span> <span class="title">History</span> </span>&#123;</span><br><span class="line">  <span class="keyword">super</span>(router, base)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">constructor</span> (router: Router, base: ?string) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">'popstate'</span>, e =&gt; &#123;</span><br><span class="line">      <span class="keyword">const</span> location = getLocation(<span class="keyword">this</span>.base)</span><br><span class="line">      <span class="comment">// transitionTo()æ–¹æ³•åœ¨çˆ¶ç±»ä¸­å®šä¹‰ï¼Œç”¨æ¥å¤„ç†è·¯ç”±å˜åŒ–ä¸­çš„åŸºç¡€é€»è¾‘</span></span><br><span class="line">      <span class="keyword">this</span>.transitionTo(location, route =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (supportsScroll) &#123;</span><br><span class="line">          handleScroll(router, route, current, <span class="literal">true</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚ä¸Šæ‰€ç¤ºï¼ŒHTML5Historyåœ¨åˆå§‹åŒ–çš„æ—¶å€™ï¼Œæ·»åŠ popstateäº‹ä»¶ç›‘å¬ã€‚</p><p>å¦‚ä¸‹æ‰€ç¤ºï¼ŒHTML5Historyä¸­é‡è¦çš„ä¸‰ä¸ªæ–¹æ³•ï¼Œgo(), push(), replace()ã€‚ pushStateå’ŒreplaceStateå®é™…ä¸Šä¹Ÿæ˜¯å°è£…äº†window.historyå¯¹è±¡ä¸Šçš„æ–¹æ³•ï¼ŒVue Routerå¯¹å…¶åšäº†éƒ¨åˆ†é€»è¾‘å¤„ç†ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">HTML5History</span> <span class="keyword">extends</span> <span class="title">History</span> </span>&#123;</span><br><span class="line">  go (n: number) &#123;</span><br><span class="line">    <span class="built_in">window</span>.history.go(n)</span><br><span class="line">  &#125;</span><br><span class="line">  push (</span><br><span class="line">    location: RawLocation,</span><br><span class="line">    onComplete?: <span class="built_in">Function</span>,</span><br><span class="line">    onAbort?: <span class="built_in">Function</span></span><br><span class="line">  ) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; <span class="attr">current</span>: fromRoute &#125; = <span class="keyword">this</span></span><br><span class="line">    <span class="comment">// transitionTo()æ–¹æ³•åœ¨çˆ¶ç±»ä¸­å®šä¹‰ï¼Œç”¨æ¥å¤„ç†è·¯ç”±å˜åŒ–ä¸­çš„åŸºç¡€é€»è¾‘</span></span><br><span class="line">    <span class="keyword">this</span>.transitionTo(location, route =&gt; &#123;</span><br><span class="line">      pushState(cleanPath(<span class="keyword">this</span>.base + route.fullPath))</span><br><span class="line">      handleScroll(<span class="keyword">this</span>.router, route, fromRoute, <span class="literal">false</span>)</span><br><span class="line">      onComplete &amp;&amp; onComplete(route)</span><br><span class="line">    &#125;, onAbort)</span><br><span class="line">  &#125;</span><br><span class="line">  replace (</span><br><span class="line">    location: RawLocation,</span><br><span class="line">    onComplete?: <span class="built_in">Function</span>,</span><br><span class="line">    onAbort?: <span class="built_in">Function</span></span><br><span class="line">  ) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; <span class="attr">current</span>: fromRoute &#125; = <span class="keyword">this</span></span><br><span class="line">    <span class="keyword">this</span>.transitionTo(location, route =&gt; &#123;</span><br><span class="line">      replaceState(cleanPath(<span class="keyword">this</span>.base + route.fullPath))</span><br><span class="line">      handleScroll(<span class="keyword">this</span>.router, route, fromRoute, <span class="literal">false</span>)</span><br><span class="line">      onComplete &amp;&amp; onComplete(route)</span><br><span class="line">    &#125;, onAbort)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Hashæ¨¡å¼-1"><a href="#Hashæ¨¡å¼-1" class="headerlink" title="Hashæ¨¡å¼"></a>Hashæ¨¡å¼</h3><p>åœ¨Vue app mountedä¹‹åæ·»åŠ ç›‘å¬ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">HashHistory</span> <span class="keyword">extends</span> <span class="title">History</span> </span>&#123;</span><br><span class="line">  <span class="comment">// this is delayed until the app mounts</span></span><br><span class="line">  <span class="comment">// to avoid the hashchange listener being fired too early</span></span><br><span class="line">  setupListeners () &#123;</span><br><span class="line">    <span class="keyword">const</span> router = <span class="keyword">this</span>.router</span><br><span class="line">    <span class="keyword">const</span> expectScroll = router.options.scrollBehavior</span><br><span class="line">    <span class="keyword">const</span> supportsScroll = supportsPushState &amp;&amp; expectScroll</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (supportsScroll) &#123;</span><br><span class="line">      setupScroll()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">window</span>.addEventListener(</span><br><span class="line">      supportsPushState ? <span class="string">'popstate'</span> : <span class="string">'hashchange'</span>,</span><br><span class="line">      () =&gt; &#123;</span><br><span class="line">        <span class="keyword">const</span> current = <span class="keyword">this</span>.current</span><br><span class="line">        <span class="keyword">if</span> (!ensureSlash()) &#123;</span><br><span class="line">          <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.transitionTo(getHash(), route =&gt; &#123;</span><br><span class="line">          <span class="keyword">if</span> (supportsScroll) &#123;</span><br><span class="line">            handleScroll(<span class="keyword">this</span>.router, route, current, <span class="literal">true</span>)</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">if</span> (!supportsPushState) &#123;</span><br><span class="line">            replaceHash(route.fullPath)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚ä¸‹æ‰€ç¤ºï¼ŒHashHistoryä¸­é‡è¦çš„ä¸‰ä¸ªæ–¹æ³•ï¼Œgo(), push(), replace()ã€‚ pushStateå’ŒreplaceStateå®é™…ä¸Šä¹Ÿæ˜¯å°è£…äº†window.historyå¯¹è±¡ä¸Šçš„æ–¹æ³•ï¼ŒVue Routerå¯¹å…¶åšäº†éƒ¨åˆ†é€»è¾‘å¤„ç†ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">HashHistory</span> <span class="keyword">extends</span> <span class="title">History</span> </span>&#123;</span><br><span class="line">  push (location: RawLocation, onComplete?: <span class="built_in">Function</span>, onAbort?: <span class="built_in">Function</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; <span class="attr">current</span>: fromRoute &#125; = <span class="keyword">this</span></span><br><span class="line">    <span class="keyword">this</span>.transitionTo(</span><br><span class="line">      location,</span><br><span class="line">      route =&gt; &#123;</span><br><span class="line">        pushHash(route.fullPath)</span><br><span class="line">        handleScroll(<span class="keyword">this</span>.router, route, fromRoute, <span class="literal">false</span>)</span><br><span class="line">        onComplete &amp;&amp; onComplete(route)</span><br><span class="line">      &#125;,</span><br><span class="line">      onAbort</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  replace (location: RawLocation, onComplete?: <span class="built_in">Function</span>, onAbort?: <span class="built_in">Function</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; <span class="attr">current</span>: fromRoute &#125; = <span class="keyword">this</span></span><br><span class="line">    <span class="keyword">this</span>.transitionTo(</span><br><span class="line">      location,</span><br><span class="line">      route =&gt; &#123;</span><br><span class="line">        replaceHash(route.fullPath)</span><br><span class="line">        handleScroll(<span class="keyword">this</span>.router, route, fromRoute, <span class="literal">false</span>)</span><br><span class="line">        onComplete &amp;&amp; onComplete(route)</span><br><span class="line">      &#125;,</span><br><span class="line">      onAbort</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  go (n: number) &#123;</span><br><span class="line">    <span class="built_in">window</span>.history.go(n)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­æœ‰ä¸ªç»†èŠ‚ï¼ŒVueRouteråšçš„éå¸¸å¥½ï¼Œå°±æ˜¯æœ‰ä¼˜å…ˆè€ƒè™‘pushStateçš„æ–¹å¼å»å­˜hashã€‚è¿™ä¸ªçš„å¥½å¤„å°±æ˜¯å¯ä»¥å­˜å‚¨åŒä¸€ä¸ªhashå€¼çš„å†å²è®°å½•å¤šæ¬¡ã€‚å¦‚æœåªæ˜¯æ›´æ”¹hashå€¼ï¼ŒåŒä¸€ä¸ªhashå€¼è®¿é—®å¤šæ¬¡ä¸ä¼šå­˜å¦‚å†å²è®°å½•æ ˆã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pushHash</span> (<span class="params">path</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (supportsPushState) &#123;</span><br><span class="line">    pushState(getUrl(path)) <span class="comment">// ä¼˜å…ˆè€ƒè™‘pushStateæ–¹å¼å»pushHash</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">window</span>.location.hash = path</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">replaceHash</span> (<span class="params">path</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (supportsPushState) &#123;</span><br><span class="line">    replaceState(getUrl(path))</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">window</span>.location.replace(getUrl(path))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="History-transitionTo"><a href="#History-transitionTo" class="headerlink" title="History.transitionTo()"></a>History.transitionTo()</h3><p>transitionToæ–¹æ³•æ˜¯Historyæ¨¡å¼å®ç°çš„é‡è¦æ–¹æ³•ã€‚ä¸»è¦çš„æµç¨‹åœ¨ä¸‹æ–¹ï¼Œé‡ç‚¹å·²ç»åœ¨æ³¨é‡Šä¸­ç”¨ç®­å¤´æ ‡æ³¨ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">History</span> </span>&#123;</span><br><span class="line">  transitionTo (</span><br><span class="line">    location: RawLocation,</span><br><span class="line">    onComplete?: <span class="built_in">Function</span>,</span><br><span class="line">    onAbort?: <span class="built_in">Function</span></span><br><span class="line">  ) &#123;</span><br><span class="line">    <span class="keyword">const</span> route = <span class="keyword">this</span>.router.match(location, <span class="keyword">this</span>.current)</span><br><span class="line">    <span class="keyword">this</span>.confirmTransition(</span><br><span class="line">      route,</span><br><span class="line">      () =&gt; &#123;</span><br><span class="line">        <span class="keyword">this</span>.updateRoute(route)  <span class="comment">// &lt;--æ›´æ–°è·¯ç”±</span></span><br><span class="line">        onComplete &amp;&amp; onComplete(route)</span><br><span class="line">        <span class="keyword">this</span>.ensureURL()</span><br><span class="line"></span><br><span class="line">        <span class="comment">// fire ready cbs once</span></span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">this</span>.ready) &#123;</span><br><span class="line">          <span class="keyword">this</span>.ready = <span class="literal">true</span></span><br><span class="line">          <span class="keyword">this</span>.readyCbs.forEach(<span class="function"><span class="params">cb</span> =&gt;</span> &#123;</span><br><span class="line">            cb(route)</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      err =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (onAbort) &#123;</span><br><span class="line">          onAbort(err)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (err &amp;&amp; !<span class="keyword">this</span>.ready) &#123;</span><br><span class="line">          <span class="keyword">this</span>.ready = <span class="literal">true</span></span><br><span class="line">          <span class="keyword">this</span>.readyErrorCbs.forEach(<span class="function"><span class="params">cb</span> =&gt;</span> &#123;</span><br><span class="line">            cb(err)</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">History</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  listen (cb: <span class="built_in">Function</span>) &#123;</span><br><span class="line">    <span class="keyword">this</span>.cb = cb</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  updateRoute (route: Route) &#123;</span><br><span class="line">    <span class="keyword">const</span> prev = <span class="keyword">this</span>.current</span><br><span class="line">    <span class="keyword">this</span>.current = route</span><br><span class="line">    <span class="keyword">this</span>.cb &amp;&amp; <span class="keyword">this</span>.cb(route) <span class="comment">// &lt;--</span></span><br><span class="line">    <span class="keyword">this</span>.router.afterHooks.forEach(<span class="function"><span class="params">hook</span> =&gt;</span> &#123;</span><br><span class="line">      hook &amp;&amp; hook(route, prev)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">VueRouter</span> </span>&#123;</span><br><span class="line">  init (app: any <span class="comment">/* Vue component instance */</span>) &#123;</span><br><span class="line">    <span class="keyword">this</span>.apps.push(app)</span><br><span class="line"></span><br><span class="line">    history.listen(<span class="function"><span class="params">route</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">this</span>.apps.forEach(<span class="function">(<span class="params">app</span>) =&gt;</span> &#123;</span><br><span class="line">        app._route = route <span class="comment">// &lt;--</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">install</span> (<span class="params">Vue</span>) </span>&#123;</span><br><span class="line">  Vue.mixin(&#123;</span><br><span class="line">    beforeCreate () &#123;</span><br><span class="line">      <span class="keyword">if</span> (isDef(<span class="keyword">this</span>.$options.router)) &#123;</span><br><span class="line">        <span class="keyword">this</span>._routerRoot = <span class="keyword">this</span></span><br><span class="line">        <span class="keyword">this</span>._router = <span class="keyword">this</span>.$options.router</span><br><span class="line">        <span class="keyword">this</span>._router.init(<span class="keyword">this</span>)</span><br><span class="line">        Vue.util.defineReactive(<span class="keyword">this</span>, <span class="string">'_route'</span>, <span class="keyword">this</span>._router.history.current)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>._routerRoot = (<span class="keyword">this</span>.$parent &amp;&amp; <span class="keyword">this</span>.$parent._routerRoot) || <span class="keyword">this</span></span><br><span class="line">      &#125;</span><br><span class="line">      registerInstance(<span class="keyword">this</span>, <span class="keyword">this</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    destroyed () &#123;</span><br><span class="line">      registerInstance(<span class="keyword">this</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="VueRouterä¸»æµç¨‹"><a href="#VueRouterä¸»æµç¨‹" class="headerlink" title="VueRouterä¸»æµç¨‹"></a>VueRouterä¸»æµç¨‹</h3><ol><li>$router.push()</li><li>History.push()</li><li>History.transitionTo()</li><li>History.updateRoute()</li><li>app._route = route</li><li>vm.render()</li></ol><h2 id="VueRouterç»„ä»¶ç®€ä»‹"><a href="#VueRouterç»„ä»¶ç®€ä»‹" class="headerlink" title="VueRouterç»„ä»¶ç®€ä»‹"></a>VueRouterç»„ä»¶ç®€ä»‹</h2><h3 id="RouterViewç»„ä»¶"><a href="#RouterViewç»„ä»¶" class="headerlink" title="RouterViewç»„ä»¶"></a>RouterViewç»„ä»¶</h3><p>ä¸»è¦é€»è¾‘æ˜¯æ‹¿åˆ°URLåŒ¹é…è·¯ç”±é…ç½®å¯¹åº”çš„ç»„ä»¶è¿›è¡Œæ¸²æŸ“ã€‚</p><h3 id="RouterLinkç»„ä»¶"><a href="#RouterLinkç»„ä»¶" class="headerlink" title="RouterLinkç»„ä»¶"></a>RouterLinkç»„ä»¶</h3><p>router-link ç»„ä»¶åœ¨è¢«ç‚¹å‡»æ—¶ï¼Œæ ¹æ®propä¸­çš„ to çš„å€¼å»è°ƒç”¨ router çš„ push æˆ–è€… replace æ¥æ›´æ–°routeã€‚åŒæ—¶ä¼šæ£€æŸ¥è‡ªèº«æ˜¯å¦å’Œå½“å‰è·¯ç”±åŒ¹é…æ¥å†³å®šè‡ªèº«çš„ activeClass æ˜¯å¦æ·»åŠ ã€‚</p><h2 id="VueRouteræ€è€ƒé—®é¢˜"><a href="#VueRouteræ€è€ƒé—®é¢˜" class="headerlink" title="VueRouteræ€è€ƒé—®é¢˜"></a>VueRouteræ€è€ƒé—®é¢˜</h2><p>ä¸Šé¢åªè®²åˆ°äº†VueRouterçš„ä¸»æµç¨‹ï¼Œæ²¡æåˆ°çš„éƒ¨åˆ†ä¾›å¤§å®¶é˜…è¯»æºç å’Œæ€è€ƒã€‚</p><ol><li>RouterViewå…·ä½“å¦‚ä½•åŒ¹é…å¯¹åº”Componentsï¼Ÿ</li><li>è·¯ç”±å¯¼èˆªå®ˆå«çš„å®ç°åŸç†ï¼Ÿ</li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ‰æœ‹å‹åé¦ˆæƒ³çœ‹æ›´â€œå¹²â€ä¸€ç‚¹çš„çŸ¥è¯†åˆ†äº«ï¼Œæœ€è¿‘åº“å­˜é‡Œé¢åªæœ‰æˆ‘ä¹‹å‰åœ¨è…¾è®¯å›¢é˜Ÿé‚£è¾¹åˆ†äº«è¿‡çš„VueRouteråŸç†ï¼Œç°æŠŠPPTæ•´ç†ä¸€éï¼Œå…·ä½“è®²è§£éƒ¨åˆ†ä¸èµ˜è¿°ï¼Œä»…ä¾›æ—¥åå‚è€ƒã€‚&lt;/p&gt;
&lt;h2 id=&quot;å‰ç«¯è·¯ç”±å®ç°æ–¹å¼&quot;&gt;&lt;a href=&quot;#å‰ç«¯è·¯ç”±å®ç°æ–¹å¼&quot; class=&quot;headerlink&quot; title=&quot;å‰ç«¯è·¯ç”±å®ç°æ–¹å¼&quot;&gt;&lt;/a&gt;å‰ç«¯è·¯ç”±å®ç°æ–¹å¼&lt;/h2&gt;&lt;p&gt;è¿™éƒ¨åˆ†å†…å®¹ç®—æ˜¯ä¸€ä¸ªåŸºç¡€å›é¡¾ï¼Œå¦‚æœå·²ç»éå¸¸ç†Ÿæ‚‰äº†ï¼Œå¯ä»¥è·³è¿‡ç›´æ¥çœ‹æºç åˆ†æéƒ¨åˆ†ã€‚&lt;br&gt;å‰ç«¯è·¯ç”±å®ç°æ–¹å¼ä¸»è¦æœ‰ä¸¤ç§ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Hashæ¨¡å¼&lt;/li&gt;
&lt;li&gt;Historyæ¨¡å¼&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;Hashæ¨¡å¼&quot;&gt;&lt;a href=&quot;#Hashæ¨¡å¼&quot; class=&quot;headerlink&quot; title=&quot;Hashæ¨¡å¼&quot;&gt;&lt;/a&gt;Hashæ¨¡å¼&lt;/h3&gt;&lt;p&gt;HashæŒ‡urlåé¢çš„#å·å’Œåé¢çš„æ‰€æœ‰å­—ç¬¦ã€‚hashä¹Ÿç§°ä½œé”šç‚¹ï¼Œå®ƒå¯ä»¥ä½¿å¯¹åº”çš„idèŠ‚ç‚¹æ˜¾ç¤ºåœ¨æµè§ˆå™¨å¯è§†åŒºåŸŸå†…ã€‚&lt;br&gt;è¦å®ç°å‰ç«¯è·¯ç”±åŠŸèƒ½ï¼Œä¸»è¦æœ‰ä»¥ä¸‹ä¸‰ç‚¹åŸå› ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;hashå˜æ›´ï¼Œä¸ä¼šå¯¼è‡´æµè§ˆå™¨å‘æœåŠ¡ç«¯å‘é€è¯·æ±‚ï¼Œå½“å‰é¡µé¢ä¹Ÿä¸ä¼šåˆ·æ–°&lt;/li&gt;
&lt;li&gt;hashå˜æ›´ï¼Œä¼šè§¦å‘hashchangeäº‹ä»¶&lt;/li&gt;
&lt;li&gt;hashå˜æ›´ï¼Œä¼šåœ¨æµè§ˆå™¨å†å²è®°å½•ä¸­æ·»åŠ è®°å½•ï¼Œæµè§ˆå™¨å‰è¿›åé€€æŒ‰é”®å¯ä»¥å¯¼èˆª&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä»£ç å‚è€ƒï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// æ”¹å˜hashå€¼&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;window&lt;/span&gt;.location.hash = &lt;span class=&quot;string&quot;&gt;&#39;home&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// è·å–hashå€¼&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;window&lt;/span&gt;.location.hash &lt;span class=&quot;comment&quot;&gt;// &#39;#home&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// ç›‘å¬hashå˜æ›´&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;window&lt;/span&gt;.addEventListener(&lt;span class=&quot;string&quot;&gt;&#39;hashchange&#39;&lt;/span&gt;, &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;onHashChange&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;string&quot;&gt;&#39;hash changed&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;, &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
    
      <category term="Vue" scheme="http://yoursite.com/tags/Vue/"/>
    
      <category term="VueRouter" scheme="http://yoursite.com/tags/VueRouter/"/>
    
      <category term="å‰ç«¯æ¡†æ¶" scheme="http://yoursite.com/tags/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6/"/>
    
  </entry>
  
  <entry>
    <title>git-flowå·¥å…·è¾…åŠ©ä»‹ç»</title>
    <link href="http://yoursite.com/2019/11/30/git-flow%E5%B7%A5%E5%85%B7%E8%BE%85%E5%8A%A9%E4%BB%8B%E7%BB%8D/"/>
    <id>http://yoursite.com/2019/11/30/git-flow%E5%B7%A5%E5%85%B7%E8%BE%85%E5%8A%A9%E4%BB%8B%E7%BB%8D/</id>
    <published>2019-11-30T14:47:39.000Z</published>
    <updated>2020-01-29T10:59:34.335Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨å®è·µè¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨äº†git-flowçš„å‘½ä»¤è¡Œå·¥å…·è¿›è¡Œç®¡ç†ï¼Œå¯¹git-flowçš„æµç¨‹æ›´åŠ æ¸…æ™°ï¼Œç°åœ¨æ€»ç»“å‡ºæ¥ä¾›å‚è€ƒã€‚</p><p>æˆ‘ä½¿ç”¨çš„æ˜¯macOSï¼Œå®‰è£…git flowå‘½ä»¤è¡Œæ–¹æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install git-flow-avh</span><br></pre></td></tr></table></figure><h2 id="ç¬¬ä¸€æ­¥"><a href="#ç¬¬ä¸€æ­¥" class="headerlink" title="ç¬¬ä¸€æ­¥"></a>ç¬¬ä¸€æ­¥</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git flow init</span><br></pre></td></tr></table></figure><p>ç®€å•æ¥è¯´ï¼Œgit flowåˆå§‹åŒ–ä¸»è¦åšäº†ä¸¤ä»¶äº‹:</p><ol><li>åˆå§‹åŒ–gitä»“åº“</li><li>åŸºäºmasteråˆ†æ”¯åˆ›å»ºdevelopåˆ†æ”¯<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br><span class="line">git checkout -b develop</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="ç¬¬äºŒæ­¥"><a href="#ç¬¬äºŒæ­¥" class="headerlink" title="ç¬¬äºŒæ­¥"></a>ç¬¬äºŒæ­¥</h2>å‡è®¾æˆ‘ä»¬éœ€è¦è¿›è¡ŒuseråŠŸèƒ½çš„å¼€å‘<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git flow feature start user</span><br></pre></td></tr></table></figure>è¿™æ—¶git flowåšäº†ä¸€ä»¶äº‹æƒ…ï¼Œå°±æ˜¯åŸºäºdevelopåˆ†æ”¯ï¼Œæ–°å¼€ä¸€ä¸ªfeature/useråˆ†æ”¯ã€‚ç±»ä¼¼äºå¦‚ä¸‹gitå‘½ä»¤ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b feature/user</span><br></pre></td></tr></table></figure></li></ol><h2 id="ç¬¬ä¸‰æ­¥"><a href="#ç¬¬ä¸‰æ­¥" class="headerlink" title="ç¬¬ä¸‰æ­¥"></a>ç¬¬ä¸‰æ­¥</h2><p>æˆ‘ä»¬åœ¨feature/useråˆ†æ”¯æŠŠuseræ¨¡å—çš„åŠŸèƒ½å¼€å‘å®Œæˆï¼Œæ­¤æ—¶å°±å¯ä»¥æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git flow feature finisth user</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šå‘½ä»¤ï¼Œå…¶å®å°±æ˜¯åˆ‡æ¢å›developåˆ†æ”¯ï¼Œmerge feature/userçš„ä»£ç ï¼Œç„¶åå°†feature/userçš„åˆ†æ”¯åˆ é™¤ã€‚<br>ç±»ä¼¼äºå¦‚ä¸‹gitå‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git checkout develop</span><br><span class="line">git merge feature/user</span><br><span class="line">git branch --delete feature/user</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong>ï¼šå®é™…å·¥ä½œä¸­ï¼Œæˆ‘ä»¬çš„featureåˆ†æ”¯åˆå¹¶åˆ°developåˆ†æ”¯ï¼Œæ˜¯å…¨éƒ¨åœ¨çº¿ä¸Šå®Œæˆã€‚ç”±å®Œæˆfeatureçš„åŒå­¦ä¸Šä¼ å¯¹åº”çš„featureåˆ†æ”¯åˆ°è¿œç¨‹gitä»“åº“ï¼Œç„¶ååˆ›å»ºåˆå¹¶è¯·æ±‚ç”³è¯·ã€‚é¡¹ç›®è´Ÿè´£äººåœ¨code reviewç¡®è®¤åï¼ŒåŒæ„åˆå¹¶è¯¥åˆ†æ”¯åˆ°developåˆ†æ”¯ï¼Œå¹¶åˆ é™¤è¯¥featureåˆ†æ”¯ã€‚</p><p>ç¬¬ä¸‰æ­¥åœ¨å¼€å‘è¿‡ç¨‹ä¸­æ˜¯ä¸€ä¸ªæŒç»­çš„è¿‡ç¨‹ï¼Œä¼šä¸æ–­æœ‰æ–°çš„featureåˆ†æ”¯åˆå¹¶åˆ°developåˆ†æ”¯ã€‚</p><h2 id="ç¬¬å››æ­¥"><a href="#ç¬¬å››æ­¥" class="headerlink" title="ç¬¬å››æ­¥"></a>ç¬¬å››æ­¥</h2><p>featureå¼€å‘å®Œä¹‹åï¼Œå¼€å§‹å‡†å¤‡releaseåˆ†æ”¯ææµ‹ã€‚ç±»ä¼¼äºstartä¸€ä¸ªfeatureåˆ†æ”¯ï¼Œreleaseåˆ†æ”¯å‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git flow release start v1.0</span><br><span class="line">git flow release publish v1.0</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä¸¤è¡Œå‘½ä»¤ï¼Œå°±æ˜¯åŸºäºdevelopåˆ†æ”¯æ–°å»ºä¸€ä¸ªrelease/v1.0åˆ†æ”¯ï¼Œç„¶åå°†è¯¥åˆ†æ”¯æ¨é€åˆ°è¿œç¨‹ä»“åº“ã€‚æµ‹è¯•å›å½’è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°æœ‰é—®é¢˜ï¼Œæ‰€æœ‰bugfixéƒ½åœ¨è¯¥åˆ†æ”¯è¿›è¡Œè°ƒæ•´ã€‚<br>ç±»ä¼¼äºå¦‚ä¸‹gitå‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git checkout develop</span><br><span class="line">git checkout -b release/v1.0</span><br><span class="line">git push -u origin release/v1.0</span><br></pre></td></tr></table></figure><h2 id="ç¬¬äº”æ­¥"><a href="#ç¬¬äº”æ­¥" class="headerlink" title="ç¬¬äº”æ­¥"></a>ç¬¬äº”æ­¥</h2><p>releaseåˆ†æ”¯å®Œæˆä¹‹åï¼Œå®Œæˆå¦‚ä¸‹å‘½ä»¤ï¼Œå°†æ‰€æœ‰ä»£ç å›è¡¥åˆ°developåˆ†æ”¯ï¼Œæœ€ååˆå¹¶åˆ°masteråˆ†æ”¯ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git flow release finish v1.0</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong> å®é™…ç”Ÿäº§ç¯å¢ƒï¼Œæ¶‰åŠåˆ°developåˆ†æ”¯å’Œmasteråˆ†æ”¯çš„ä»£ç mergeï¼Œä¸€èˆ¬éƒ½æ˜¯åœ¨çº¿ä¸Šå‘èµ·merge requestæ¥å®Œæˆã€‚git flowå·¥å…·åªæ˜¯åšä¸€ä¸ªè¾…åŠ©å‚è€ƒï¼Œä¸éœ€è¦æ‰€æœ‰å‘½ä»¤éƒ½ä½¿ç”¨ã€‚<br>ç±»ä¼¼äºå¦‚ä¸‹gitå‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git checkout develop</span><br><span class="line">git merge release/v1.0</span><br><span class="line">git tab v1.0</span><br><span class="line">git checkout master</span><br><span class="line">git merge develop</span><br></pre></td></tr></table></figure><p>ğŸ‘Œï¼Œç»è¿‡ä¸Šé¢çš„æ“ä½œï¼Œä¸€ä¸ªç›¸å¯¹å®Œæ•´çš„git-flowæµç¨‹å°±æ„‰å¿«åœ°èµ°äº†ä¸€éã€‚ç”±äºgit flowçš„å‘½ä»¤éå¸¸æ¸…æ™°æ˜“æ‡‚ï¼Œè€Œä¸”èƒŒåæ‰§è¡Œçš„gitæ“ä½œå…¶å®ä¹Ÿç›¸å¯¹ç®€å•ï¼Œå°±ä¸æŠŠæ¯ä¸€æ­¥æ‰§è¡Œçš„ç»“æœæˆªå›¾æ¼”ç¤ºäº†ã€‚</p><p>git flowçš„å‘½ä»¤è¡Œå·¥å…·ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šè¾…åŠ©æˆ‘ä»¬ç®€åŒ–git flowæµç¨‹çš„æ“ä½œï¼Œä½†æ˜¯æœ€é‡è¦çš„æ˜¯æˆ‘ä»¬å¦‚æœçœŸçš„åœ¨ç”¨git flowçš„æ–¹æ³•è®ºå¼€å‘ï¼Œä¸€å®šè¦å¯¹git flowæœ¬èº«çš„æµç¨‹æœ‰éå¸¸æ¸…æ™°çš„è®¤è¯†ï¼Œæ‰èƒ½æ›´å¥½å€ŸåŠ©git flowå‘½ä»¤æé«˜å·¥ä½œä¸­çš„æ•ˆç‡ã€‚</p><p>å¦å¤–ï¼Œåœ¨è¯•ç”¨git flowå‘½ä»¤è¡Œå·¥å…·çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘å’Œå…¬å¸çš„åŒäº‹ä¹Ÿè®¨è®ºäº†ä¸‹å…¶é™åˆ¶ã€‚æ¯”å¦‚æˆ‘ä»¬å¦‚æœæœ‰è¶…è¿‡ä¸€æ¡ä¸»çº¿ï¼Œæ¯”å¦‚ï¼Œå¤šä¸ªå®šåˆ¶ç‰ˆæœ¬çš„æ—¶å€™ï¼Œæ ‡å‡†çš„git flowå°±ä¸èƒ½æ»¡è¶³å¼€å‘éœ€æ±‚ã€‚ä½†æ˜¯è¦ç»“åˆgit flowæœ¬èº«çš„è§„èŒƒæ€§å»è¡ç”Ÿä¸€äº›è§£å†³æ–¹æ¡ˆå‡ºæ¥ä¹Ÿæ˜¯æœ‰çš„ï¼Œå¦‚ä¸‹ï¼š</p><ul><li>æ–°å¼€ä»“åº“èµ°git flowå¼€å‘å®šåˆ¶ç‰ˆ</li><li>å¢åŠ ç‰¹æ®Šçš„åˆ†æ”¯ï¼Œç”¨æ¥å®šåˆ¶ä½¿ç”¨ï¼Œå¹³è¡Œäºmasteråˆ†æ”¯ã€‚ä¾‹å¦‚master_a, master_bç­‰å®šåˆ¶åŒ–åˆ†æ”¯ã€‚<br>åŸºäºgit flowè¡ç”Ÿçš„è§£å†³æ–¹æ¡ˆï¼Œä¹Ÿæ˜¯å¯ä»¥ç›¸å¯¹è§„èŒƒåœ°è§£å†³ä¸€äº›å¤æ‚çš„ç”Ÿäº§å¼€å‘é—®é¢˜ã€‚</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ€è¿‘åœ¨å®è·µè¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨äº†git-flowçš„å‘½ä»¤è¡Œå·¥å…·è¿›è¡Œç®¡ç†ï¼Œå¯¹git-flowçš„æµç¨‹æ›´åŠ æ¸…æ™°ï¼Œç°åœ¨æ€»ç»“å‡ºæ¥ä¾›å‚è€ƒã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä½¿ç”¨çš„æ˜¯macOSï¼Œå®‰è£…git flowå‘½ä»¤è¡Œæ–¹æ³•å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;brew install git-flow-avh&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&quot;ç¬¬ä¸€æ­¥&quot;&gt;&lt;a href=&quot;#ç¬¬ä¸€æ­¥&quot; class=&quot;headerlink&quot; title=&quot;ç¬¬ä¸€æ­¥&quot;&gt;&lt;/a&gt;ç¬¬ä¸€æ­¥&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;git flow init&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ç®€å•æ¥è¯´ï¼Œgit flowåˆå§‹åŒ–ä¸»è¦åšäº†ä¸¤ä»¶äº‹:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åˆå§‹åŒ–gitä»“åº“&lt;/li&gt;
&lt;li&gt;åŸºäºmasteråˆ†æ”¯åˆ›å»ºdevelopåˆ†æ”¯&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;git init&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git checkout -b develop&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
    
      <category term="git" scheme="http://yoursite.com/tags/git/"/>
    
      <category term="git-flow" scheme="http://yoursite.com/tags/git-flow/"/>
    
      <category term="å·¥å…·" scheme="http://yoursite.com/tags/%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
  <entry>
    <title>å‰ç«¯å·¥ç¨‹åŒ–å®è·µç³»åˆ—--ESLintå®šåˆ¶è§„åˆ™</title>
    <link href="http://yoursite.com/2019/11/26/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E5%AE%9E%E8%B7%B5%E7%B3%BB%E5%88%97-ESLint%E5%AE%9A%E5%88%B6%E8%A7%84%E5%88%99/"/>
    <id>http://yoursite.com/2019/11/26/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E5%AE%9E%E8%B7%B5%E7%B3%BB%E5%88%97-ESLint%E5%AE%9A%E5%88%B6%E8%A7%84%E5%88%99/</id>
    <published>2019-11-26T06:33:08.000Z</published>
    <updated>2020-01-29T10:59:34.340Z</updated>
    
    <content type="html"><![CDATA[<p>å†™è¿‡å‰ç«¯é¡¹ç›®çš„åŒå­¦ï¼Œå¯¹ESLintéƒ½åº”è¯¥éå¸¸ç†Ÿæ‚‰ã€‚ä¸šç•Œå¸¸ç”¨çš„ESLintè§„èŒƒï¼Œä¸€èˆ¬æ˜¯ä»¥<a href="https://github.com/airbnb/javascript" target="_blank" rel="noopener">Airbnb</a>å’Œ<a href="https://github.com/standard/standard" target="_blank" rel="noopener">standard</a>è§„èŒƒä¸ºä¸»ã€‚æˆ‘ä»¬ä»Šå¤©æ˜¯æŠ›å¼€ç›´æ¥åœ¨extendsé‡Œé¢å¼•å…¥ä¸šç•ŒESLintæ‰©å±•ï¼Œæ¥èŠèŠè‡ªå·±é¡¹ç›®å®è·µä¸­å®šåˆ¶çš„ESLintè§„åˆ™ã€‚</p><p>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ESLintå®˜æ–¹çš„<a href="https://eslint.org/docs/rules/" target="_blank" rel="noopener">Rules</a>ï¼Œ å®ƒåˆ†ä¸ºå¦‚ä¸‹å¤šä¸ªç§ç±»:</p><ul><li><p>Possible Errors</p></li><li><p>Best Practices</p></li><li><p>Strict Mode</p></li><li><p>Variables</p></li><li><p>Node.js and CommonJS</p></li><li><p>Stylistic Issues</p></li><li><p>ECMAScript 6</p></li><li><p>Deprecated</p></li><li><p>Removed</p><a id="more"></a><p>æˆ‘ä»¬é‡ç‚¹çœ‹çœ‹Stylistic Issuesè¿™ä¸ªåˆ†ç±»ï¼Œè¿™ä¸ªåˆ†ç±»çš„Rulesæ˜¯è§£å†³ä»€ä¹ˆé—®é¢˜çš„å‘¢ï¼Ÿå®˜æ–¹è§£é‡Šç§°è¿™äº›è§„åˆ™æ˜¯å…³äºé£æ ¼æŒ‡å—ï¼Œè€Œä¸”æ˜¯éå¸¸ä¸»è§‚çš„ã€‚å¯¹äºè¿™æ ·çš„æè¿°ï¼Œæˆ‘ä»¬å¯èƒ½åœ¨å®šåˆ¶è§„åˆ™çš„è¿‡ç¨‹ä¸­ä¸€å¸¦è€Œè¿‡ï¼Œè€Œå…¶ä»–æœ€ä½³å®è·µå’Œä¸€äº›é¿å…æ½œåœ¨é”™è¯¯çš„è§„èŒƒï¼Œstandardç­‰è§„èŒƒåˆå¸®æˆ‘ä»¬åšäº†ã€‚åˆ«ç€æ€¥ï¼Œæˆ‘ä»¬çœ‹çœ‹è¿™å‡ ä¸ªRulesã€‚</p></li><li><p>max-depth(å¼ºåˆ¶å¯åµŒå¥—çš„å—çš„æœ€å¤§æ·±åº¦)</p></li><li><p>max-len(å¼ºåˆ¶ä¸€è¡Œçš„æœ€å¤§é•¿åº¦)</p></li><li><p>max-lines(å¼ºåˆ¶æœ€å¤§è¡Œæ•°)</p></li><li><p>max-lines-per-function(å¼ºåˆ¶å‡½æ•°æœ€å¤§ä»£ç è¡Œæ•°)</p></li><li><p>max-nested-callbacks(å¼ºåˆ¶å›è°ƒå‡½æ•°æœ€å¤§åµŒå¥—æ·±åº¦)</p></li><li><p>max-params(å¼ºåˆ¶å‡½æ•°å®šä¹‰ä¸­æœ€å¤šå…è®¸çš„å‚æ•°æ•°é‡)</p></li><li><p>max-statements(å¼ºåˆ¶å‡½æ•°å—æœ€å¤šå…è®¸çš„çš„è¯­å¥æ•°é‡)</p></li><li><p>max-statements-per-line(å¼ºåˆ¶æ¯ä¸€è¡Œä¸­æ‰€å…è®¸çš„æœ€å¤§è¯­å¥æ•°é‡)</p></li></ul><p>è¿™äº›ä¸»è§‚æ€§å¼ºçš„è§„åˆ™ï¼Œå´æ°æ°å¸®åŠ©æˆ‘ä»¬ä¸ºå›¢é˜Ÿå®šåˆ¶è§„èŒƒæä¾›äº†å¾ˆå¥½çš„å¸®åŠ©ã€‚max-depthé€‚å½“çš„åµŒå¥—æ•°ï¼Œå¯ä»¥é¿å…å†™å‡ºéš¾ä»¥é˜…è¯»çš„å¤æ‚ä»£ç ï¼Œmax-lenå¯ä»¥å¼ºè¿«å¼€å‘è¿‡ç¨‹ä¸­ä¸»åŠ¨æ¢è¡Œæé«˜ä»£ç çš„å¯é˜…è¯»æ€§ï¼Œmax-linesç›¸å…³çš„ruleså¯ä»¥è®©å¼€å‘å¯¹ä»£ç ç»†ç²’åº¦çš„æŠŠæ¡æœ‰æ›´çœ‹å¾—è§æ‘¸å¾—ç€çš„ä¾æ®ï¼Œmax-nested-callbacksè¿™ä¸ªå¯ä»¥åœ¨ESLintå±‚é¢è§£å†³å›è°ƒåœ°ç‹±çš„é—®é¢˜ã€‚</p><p>ä¸ºä»€ä¹ˆèƒ½å‘ç°è¿™äº›æ¯”è¾ƒç‰¹æ®Šçš„è§„åˆ™å‘¢ï¼Ÿä¹Ÿæ˜¯æˆ‘ä»¬å›¢é˜Ÿå¼€å‘è¿‡ç¨‹ä¸­ï¼Œå‘ç°æœ‰ä¸å°‘åŒå­¦ä¼šæŠŠä¸€ä¸ªæ–¹æ³•æˆ–è€…ä¸€ä¸ªå‡½æ•°å†™æˆå‡ ç™¾è¡Œçš„æƒ…å†µã€‚å¯¹äºè¿™ä¸ªé—®é¢˜ï¼Œæ˜æ˜¾ä¸èƒ½é€šè¿‡code reviewè¿™ç§åç½®ç¬¨é‡çš„æ–¹æ³•å»è§£å†³ï¼Œæ‰€ä»¥æˆ‘ä»¬æ‰¾æ—¶é—´å»é˜…è¯»ESLintçš„å®˜æ–¹è§„åˆ™ï¼Œå¯¹ç—‡ä¸‹è¯ã€‚</p><p>åˆšåˆšå¼€å§‹å‰ç«¯å¼€å‘çš„æ—¶å€™ï¼Œæˆ‘å¯¹æ ‡å‡†è¿™ç§ä¸œè¥¿çš„è®¤è¯†è¿˜æ˜¯æ¯”è¾ƒè‚¤æµ…ã€‚æ›¾ä»¥ä¸ºä¸šç•Œçš„è§„èŒƒå°±æ˜¯æ‹¿æ¥å°±ç”¨å³å¯ï¼Œä½†æ˜¯å®é™…å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¾ˆå¯èƒ½å’Œä¸åŒå±‚æ¬¡çš„å¼€å‘åˆä½œï¼Œé¢å¯¹å¤æ‚çš„å¼€å‘äººå‘˜ç°çŠ¶ï¼ŒåŠ¿å¿…è¦æœ‰æ›´é«˜çº§åˆ«çš„çº¦æŸå’Œæç¤ºã€‚ä¸šå†…çš„å…¬ç”¨æ ‡å‡†ï¼Œå¯¹äºå›¢é˜Ÿæ¥è¯´ï¼Œæ›´é‡è¦çš„æ˜¯å€Ÿé‰´ï¼Œå¹¶æ ¹æ®å®é™…æƒ…å†µåšçµæ´»çš„è°ƒæ•´ã€‚</p><p>å¸Œæœ›è¿™ç§â€œä¸ªæ€§åŒ–å®šåˆ¶â€ï¼Œèƒ½ç»™åšå›¢é˜Ÿæ ‡å‡†åŒ–åˆ¶å®šå·¥ä½œçš„æœ‹å‹å’Œæœªæ¥çš„è‡ªå·±ä¸€äº›å¯å‘ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å†™è¿‡å‰ç«¯é¡¹ç›®çš„åŒå­¦ï¼Œå¯¹ESLintéƒ½åº”è¯¥éå¸¸ç†Ÿæ‚‰ã€‚ä¸šç•Œå¸¸ç”¨çš„ESLintè§„èŒƒï¼Œä¸€èˆ¬æ˜¯ä»¥&lt;a href=&quot;https://github.com/airbnb/javascript&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Airbnb&lt;/a&gt;å’Œ&lt;a href=&quot;https://github.com/standard/standard&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;standard&lt;/a&gt;è§„èŒƒä¸ºä¸»ã€‚æˆ‘ä»¬ä»Šå¤©æ˜¯æŠ›å¼€ç›´æ¥åœ¨extendsé‡Œé¢å¼•å…¥ä¸šç•ŒESLintæ‰©å±•ï¼Œæ¥èŠèŠè‡ªå·±é¡¹ç›®å®è·µä¸­å®šåˆ¶çš„ESLintè§„åˆ™ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ESLintå®˜æ–¹çš„&lt;a href=&quot;https://eslint.org/docs/rules/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Rules&lt;/a&gt;ï¼Œ å®ƒåˆ†ä¸ºå¦‚ä¸‹å¤šä¸ªç§ç±»:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Possible Errors&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Best Practices&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Strict Mode&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Variables&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Node.js and CommonJS&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Stylistic Issues&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ECMAScript 6&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Deprecated&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Removed&lt;/p&gt;
    
    </summary>
    
    
    
      <category term="å‰ç«¯å·¥ç¨‹åŒ–" scheme="http://yoursite.com/tags/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/"/>
    
      <category term="æ ‡å‡†" scheme="http://yoursite.com/tags/%E6%A0%87%E5%87%86/"/>
    
      <category term="ESLint" scheme="http://yoursite.com/tags/ESLint/"/>
    
  </entry>
  
  <entry>
    <title>èŠèŠKindleçš„ä½¿ç”¨æ„Ÿå—</title>
    <link href="http://yoursite.com/2019/11/21/%E8%81%8A%E8%81%8AKindle%E7%9A%84%E4%BD%BF%E7%94%A8%E6%84%9F%E5%8F%97/"/>
    <id>http://yoursite.com/2019/11/21/%E8%81%8A%E8%81%8AKindle%E7%9A%84%E4%BD%BF%E7%94%A8%E6%84%9F%E5%8F%97/</id>
    <published>2019-11-20T16:15:57.000Z</published>
    <updated>2020-01-29T10:59:34.353Z</updated>
    
    <content type="html"><![CDATA[<p>å‰å‡ ä¸ªæœˆï¼Œæˆ‘ä¹°å…¥äº†ä¸€å°Kindleã€‚ä¹°ä¹‹å‰å› ä¸ºæœ‰æ¯”è¾ƒå¼ºçƒˆçš„é˜…è¯»éœ€æ±‚ï¼Œæ‰€ä»¥ä¹Ÿæ²¡æœ‰çŠ¹è±«å¤ªé•¿æ—¶é—´ï¼Œå…¥æ‰‹äº†Kindle Oasis3ã€‚</p><p>Kindleè¿™ä¸ªé˜…è¯»å™¨å¾ˆç¥å¥‡ï¼Œè®©æˆ‘åœ¨çŸ­çŸ­å‡ ä¸ªæœˆé˜…è¯»äº†åå¤šæœ¬å……ç”µç”¨çš„ä¹¦ç±ï¼ŒåŒ…æ‹¬æŠ€æœ¯ï¼ŒæŠ•èµ„ç›¸å…³ã€‚è¿‘ä¸€ä¸¤å‘¨å› ä¸ºå·¥ä½œçš„åŸå› ï¼Œæˆ‘æš‚æ—¶æç½®Kindleæ²¡æœ‰ç»§ç»­çœ‹ã€‚ç›´åˆ°ä»Šå¤©é‡æ–°æ‹¿èµ·æ¥çœ‹äº†äº›æ—§ä¹¦æ¸©ä¹ ï¼Œæˆ‘å¯¹Kindleè¿™ç§æ–¹å¼é˜…è¯»ä¹¦ç±æœ‰äº†ä¸€äº›æ€è€ƒã€‚</p><p>çº¸è´¨ä¹¦æœ‰ç€æœ€å¥½çš„é˜…è¯»ä½“éªŒï¼Œä½†æ˜¯åšé‡è¿™ä¸€ç‚¹ï¼Œå°±è®©è®¸å¤šäººåœ¨ç¹å¿™çš„å·¥ä½œä¹‹ä½™æœ›è€Œå´æ­¥äº†ã€‚é€€è€Œæ±‚å…¶æ¬¡ï¼Œé€‰æ‹©ç”¨æ‰‹æœºå»çœ‹ï¼Œæˆ‘ä¸ªäººä¹Ÿå®¹æ˜“è¢«å…¶ä»–Appå¸å¼•ï¼Œå¯¼è‡´æ²¡æœ‰å¾ˆå¥½çš„åŠæ³•é•¿æ—¶é—´ä¸“æ³¨å»çœ‹ã€‚å½“æˆ‘é€‰æ‹©äº†Kindleä¹‹åï¼Œè§‰å¾—æ‰¾åˆ°äº†å¦ä¸€ç§é˜…è¯»çš„ä½“éªŒï¼Œé‚£å°±æ˜¯æ–¹ä¾¿åˆä¸“æ³¨ã€‚è¿™ç§æ„Ÿè§‰è®©æˆ‘åœ¨é¢å¯¹äº”é¢œå…­è‰²çš„ä»£ç ç¼–è¾‘å™¨ä¹‹ä½™ï¼Œå¤šäº†ä¸€ç§æ„Ÿå—é»„é‡‘å±‹ç¾å¥½çš„ä½“éªŒã€‚å®ƒçš„æ–¹ä¾¿æºå¸¦å’Œèˆ’é€‚çš„é˜…è¯»ä½“éªŒï¼Œè®©æˆ‘å³ä½¿åœ¨å·¥ä½œä¹‹ä½™ï¼Œä¹Ÿæ”¾ä¸‹äº†å¯¹é˜…è¯»å¤§éƒ¨å¤´çš„å¿ƒç†å‹åŠ›ï¼Œå› ä¸ºè¯´å®è¯æˆ‘æ„Ÿè§‰å½“ä¸‹é¢å¯¹çš„åªæ˜¯Kindleçš„ä¸€ä¸ªå°å±å¹•ï¼Œåˆæˆ–è€…è¯´è¿™æ˜¯ä¸€ä¸ªå°å±å¹•ä¸Šçš„ä¸€é¡µæ–‡å­—ã€‚è¿™ç§è½»æ¾æ–¹ä¾¿çš„æ„Ÿè§‰åè€Œä¿ƒè¿›æˆ‘è®¤çœŸå­¦ä¹ ï¼Œä¸çŸ¥ä¸è§‰çœ‹å¤šäº†å¾ˆå¤šä¹¦ã€‚</p><a id="more"></a><p>å½“æˆ‘ä»¬å‡†å¤‡å­¦ä¹ ä¸€ä¸ªæŠ€èƒ½æˆ–è€…çœ‹å®Œä¸€æœ¬ä¹¦çš„æ—¶å€™ï¼Œå¦‚æœæŠ±ç€è¿‡é«˜çš„æœŸæœ›æˆ–è€…è¿‡é«˜çš„è¦æ±‚å»åšï¼Œå¯èƒ½æ•ˆæœä¼šæ‰“æŠ˜æ‰£ã€‚ä»¥å‰ä¸ºäº†é¢è¯•æˆ–è€…åº”ä»˜ä¸€äº›è€ƒè¯•ï¼Œæˆ‘ä¼šåœ¨çŸ­æ—¶é—´å†…çœ‹å¤§é‡çš„ä¹¦ï¼Œé‚£ç§ä¸ºäº†çœ‹å®Œè€Œçœ‹å®Œçš„è¿‡ç¨‹çœŸçš„å¤ªç…ç†¬äº†ï¼Œè€Œä¸”æ•ˆæœå¹¶æ²¡æœ‰é‚£ä¹ˆç†æƒ³ã€‚ä½†æ˜¯ä»¤æˆ‘æƒŠè®¶çš„ä¸€ç‚¹æ˜¯ï¼Œå½“æˆ‘ä¸“æ³¨å»ä½¿ç”¨Kindleä¹‹åï¼Œå´ä¸çŸ¥ä¸è§‰æ¶ˆåŒ–äº†éå¸¸å¤šçš„çŸ¥è¯†ã€‚è½»æ¾çš„å¿ƒæ€åè€Œä¿ƒè¿›äº†å­¦ä¹ çš„åŠ¨åŠ›ã€‚</p><p>å·¥ä½œç”Ÿæ´»ä¸­ï¼Œå¤ªå¤šå®šæ€§å®šæ—¶çš„ä»»åŠ¡å‹ç€æˆ‘ä»¬å–˜ä¸è¿‡æ°”æ¥ã€‚è€Œææ•ˆçš„å…³é”®åˆååæ˜¯è¦è½»æ¾é¢å¯¹ï¼Œä¸“æ³¨å½“ä¸‹è€Œä¸æ˜¯ä¸“æ³¨äºæ„Ÿå—å‹åŠ›ã€‚å°±åƒä¸“æ³¨Kindleä¸Šé¢çš„ä¸€é¡µæ–‡å­—ä¸€æ ·ç®€å•ï¼Œå‹åŠ›ä¹Ÿæ˜¯å¯ä»¥åŒ–è§£ä¸ºä¸“æ³¨å½“ä¸‹çš„æ¯ä¸€é¡¹å°äº‹ã€‚å¤§è„‘æ€»æ˜¯åœ¨æ€è€ƒç€ä¸€å…±æœ‰å¤šå°‘äº‹æ²¡åšï¼Œå’Œæ‰‹é‡Œæ§ç€ä¸€æœ¬åšåšçš„æŠ€æœ¯ä¹¦ç±ä¸€æ ·ï¼Œä¼šæ„Ÿå—åˆ°éå¸¸å¤§çš„ç„¦è™‘ä¸å‹åŠ›ã€‚</p><p>ä»Kindleé˜…è¯»è¿™ä»¶å°äº‹ï¼Œæˆ‘æ€è€ƒç€å·¥ä½œä¸­ä¹Ÿè¦å€Ÿé‰´è¿™ç§ä¸“æ³¨å’Œè½»æ¾çš„å¿ƒæ€ã€‚ä¸¾ä¸ªå·¥ä½œä¸­çš„ä¾‹å­ï¼Œé¢å¯¹å¤§é‡çš„å·¥ä½œï¼Œå¾ˆæ˜¾ç„¶å°±æ˜¯è¦ä¾èµ–todolistè¿™äº›å·¥å…·ï¼Œç”¨gtdï¼ˆget things done)ç†å¿µï¼ŒæŠŠäº‹æƒ…å’Œå‹åŠ›åˆ†è§£ã€‚ä¸è¿‡è¯è¯´å›æ¥ï¼Œæœ¬è´¨ä¸Šè¿˜æ˜¯è¦è‡ªå·±å¥½å­¦ï¼Œæ¯•ç«ŸKindleä¹‹ç±»éƒ½æ˜¯å·¥å…·ï¼ŒçœŸæ­£è¦å¸æ”¶å…»åˆ†ï¼Œå†…å› ä¸å¯å¿½ç•¥ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å‰å‡ ä¸ªæœˆï¼Œæˆ‘ä¹°å…¥äº†ä¸€å°Kindleã€‚ä¹°ä¹‹å‰å› ä¸ºæœ‰æ¯”è¾ƒå¼ºçƒˆçš„é˜…è¯»éœ€æ±‚ï¼Œæ‰€ä»¥ä¹Ÿæ²¡æœ‰çŠ¹è±«å¤ªé•¿æ—¶é—´ï¼Œå…¥æ‰‹äº†Kindle Oasis3ã€‚&lt;/p&gt;
&lt;p&gt;Kindleè¿™ä¸ªé˜…è¯»å™¨å¾ˆç¥å¥‡ï¼Œè®©æˆ‘åœ¨çŸ­çŸ­å‡ ä¸ªæœˆé˜…è¯»äº†åå¤šæœ¬å……ç”µç”¨çš„ä¹¦ç±ï¼ŒåŒ…æ‹¬æŠ€æœ¯ï¼ŒæŠ•èµ„ç›¸å…³ã€‚è¿‘ä¸€ä¸¤å‘¨å› ä¸ºå·¥ä½œçš„åŸå› ï¼Œæˆ‘æš‚æ—¶æç½®Kindleæ²¡æœ‰ç»§ç»­çœ‹ã€‚ç›´åˆ°ä»Šå¤©é‡æ–°æ‹¿èµ·æ¥çœ‹äº†äº›æ—§ä¹¦æ¸©ä¹ ï¼Œæˆ‘å¯¹Kindleè¿™ç§æ–¹å¼é˜…è¯»ä¹¦ç±æœ‰äº†ä¸€äº›æ€è€ƒã€‚&lt;/p&gt;
&lt;p&gt;çº¸è´¨ä¹¦æœ‰ç€æœ€å¥½çš„é˜…è¯»ä½“éªŒï¼Œä½†æ˜¯åšé‡è¿™ä¸€ç‚¹ï¼Œå°±è®©è®¸å¤šäººåœ¨ç¹å¿™çš„å·¥ä½œä¹‹ä½™æœ›è€Œå´æ­¥äº†ã€‚é€€è€Œæ±‚å…¶æ¬¡ï¼Œé€‰æ‹©ç”¨æ‰‹æœºå»çœ‹ï¼Œæˆ‘ä¸ªäººä¹Ÿå®¹æ˜“è¢«å…¶ä»–Appå¸å¼•ï¼Œå¯¼è‡´æ²¡æœ‰å¾ˆå¥½çš„åŠæ³•é•¿æ—¶é—´ä¸“æ³¨å»çœ‹ã€‚å½“æˆ‘é€‰æ‹©äº†Kindleä¹‹åï¼Œè§‰å¾—æ‰¾åˆ°äº†å¦ä¸€ç§é˜…è¯»çš„ä½“éªŒï¼Œé‚£å°±æ˜¯æ–¹ä¾¿åˆä¸“æ³¨ã€‚è¿™ç§æ„Ÿè§‰è®©æˆ‘åœ¨é¢å¯¹äº”é¢œå…­è‰²çš„ä»£ç ç¼–è¾‘å™¨ä¹‹ä½™ï¼Œå¤šäº†ä¸€ç§æ„Ÿå—é»„é‡‘å±‹ç¾å¥½çš„ä½“éªŒã€‚å®ƒçš„æ–¹ä¾¿æºå¸¦å’Œèˆ’é€‚çš„é˜…è¯»ä½“éªŒï¼Œè®©æˆ‘å³ä½¿åœ¨å·¥ä½œä¹‹ä½™ï¼Œä¹Ÿæ”¾ä¸‹äº†å¯¹é˜…è¯»å¤§éƒ¨å¤´çš„å¿ƒç†å‹åŠ›ï¼Œå› ä¸ºè¯´å®è¯æˆ‘æ„Ÿè§‰å½“ä¸‹é¢å¯¹çš„åªæ˜¯Kindleçš„ä¸€ä¸ªå°å±å¹•ï¼Œåˆæˆ–è€…è¯´è¿™æ˜¯ä¸€ä¸ªå°å±å¹•ä¸Šçš„ä¸€é¡µæ–‡å­—ã€‚è¿™ç§è½»æ¾æ–¹ä¾¿çš„æ„Ÿè§‰åè€Œä¿ƒè¿›æˆ‘è®¤çœŸå­¦ä¹ ï¼Œä¸çŸ¥ä¸è§‰çœ‹å¤šäº†å¾ˆå¤šä¹¦ã€‚&lt;/p&gt;
    
    </summary>
    
    
    
      <category term="æŠ€æœ¯æ‚è°ˆ" scheme="http://yoursite.com/tags/%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/"/>
    
  </entry>
  
  <entry>
    <title>å¤šåŒ…ç®¡ç†å™¨Lernaå®è·µæ€»ç»“</title>
    <link href="http://yoursite.com/2019/11/20/%E5%A4%9A%E5%8C%85%E7%AE%A1%E7%90%86%E5%99%A8Lerna%E5%AE%9E%E8%B7%B5%E6%80%BB%E7%BB%93/"/>
    <id>http://yoursite.com/2019/11/20/%E5%A4%9A%E5%8C%85%E7%AE%A1%E7%90%86%E5%99%A8Lerna%E5%AE%9E%E8%B7%B5%E6%80%BB%E7%BB%93/</id>
    <published>2019-11-19T16:54:12.000Z</published>
    <updated>2020-01-29T10:59:34.345Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>ä»€ä¹ˆæ˜¯Lernaï¼Ÿæˆªå–githubä¸Šé¢çš„descriptionå¦‚ä¸‹ï¼š</p><blockquote><p>A tool for managing JavaScript projects with multiple packages.</p></blockquote><h2 id="monorepo"><a href="#monorepo" class="headerlink" title="monorepo"></a>monorepo</h2><p>æœ€è¿‘å·¥ä½œä¸­ç»´æŠ¤å¤šä¸ªé¡¹ç›®ï¼Œå‡ç”¨åˆ°Lernaè¿™ä¸ªå¤šåŒ…ç®¡ç†å™¨ã€‚é€šè¿‡ä½¿ç”¨Lerna, æ„Ÿå—äº†monorepoç»´æŠ¤é¡¹ç›®çš„å¥½å¤„ã€‚</p><p>å¯¹äºmonorepoçš„ä»‹ç»ï¼Œè¯·<a href="https://trunkbaseddevelopment.com/monorepos/" target="_blank" rel="noopener">ç‚¹å‡»æ­¤å¤„</a></p><p>ç›®å‰å‡ºåçš„å‰ç«¯å¼€æºé¡¹ç›®ä¹Ÿæœ‰å¾ˆå¤šä½¿ç”¨äº†Lernaå»ç»´æŠ¤ã€‚</p><ul><li><a href="https://github.com/facebook/react" target="_blank" rel="noopener">React</a></li><li><a href="https://github.com/babel/babel" target="_blank" rel="noopener">Babel</a></li><li><a href="https://github.com/emberjs/ember.js" target="_blank" rel="noopener">Ember</a><a id="more"></a>å…¶ä¸­Babelä»“åº“è¿˜ä¸“é—¨å†™äº†monorepoçš„ä¼˜ç¼ºç‚¹ã€‚<br>æ‘˜å½•å¦‚ä¸‹ï¼š</li></ul><p><strong>Pros:</strong></p><ul><li>Single lint, build, test and release process.</li><li>Easy to coordinate changes across modules.</li><li>Single place to report issues.</li><li>Easier to setup a development environment.</li><li>Tests across modules are run together which finds bugs that touch multiple modules more easily.</li></ul><p><strong>Cons:</strong></p><ul><li>Codebase looks more intimidating.</li><li>Repo is bigger in size.</li><li><a href="https://github.com/npm/npm/issues/2974" target="_blank" rel="noopener">Canâ€™t <code>npm install</code> modules directly from GitHub</a></li><li>???</li></ul><p>Babelçš„æ–‡æ¡£å·²ç»æŠŠmonorepoçš„å¥½å¤„æ€»ç»“çš„éå¸¸åˆ°ä½äº†ï¼Œè€Œmonorepoçš„ç¼ºç‚¹ï¼Œä¹Ÿæ˜¯ç‘•ä¸æ©ç‘œã€‚</p><p>Codebase looks more intimidating.è¿™ä¸€ä¸ªç¼ºç‚¹ç¡®å®ä¸€å¼€å§‹ä»¤æˆ‘å¤´ç–¼ï¼Œä½†æ˜¯æ„è¯†åˆ°monorepoçš„ä¼˜ç‚¹ï¼ˆä¹Ÿå°±æ˜¯å®ƒè§£å†³äº†å…¶ä»–æ›´ä¸¥é‡çš„é—®é¢˜ï¼‰ä¹‹åï¼Œæˆ‘å°±å¼€å§‹æ…¢æ…¢æ¥å—å¹¶ä¹ æƒ¯ã€‚</p><h2 id="Lernaåšäº†ä»€ä¹ˆ"><a href="#Lernaåšäº†ä»€ä¹ˆ" class="headerlink" title="Lernaåšäº†ä»€ä¹ˆ"></a>Lernaåšäº†ä»€ä¹ˆ</h2><p>èŠå®Œmonorepoï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹Lernaå¸®æˆ‘ä»¬åšäº†å“ªäº›äº‹æƒ…ã€‚</p><ul><li>å¼€å‘è¿‡ç¨‹ä¸­ï¼šç»´æŠ¤é¡¹ç›®å¤šä¸ªnpmåŒ…ä¹‹é—´çš„å…³ç³»<ul><li>å‡å°‘é‡å¤å®‰è£…ä¾èµ–</li><li>å¼€å‘ä¸­ç›´æ¥æ˜ å°„ä¾èµ–åŒ…æœ€æ–°ä»£ç </li><li>ç»´æŠ¤å¤æ‚çš„ä¾èµ–å…³ç³»ï¼Œå³ç‰ˆæœ¬å·å…³ç³»</li></ul></li><li>å‘å¸ƒè¿‡ç¨‹ä¸­ï¼šç»´æŠ¤é¡¹ç›®å¤šä¸ªnpmå‘å¸ƒåŒ…çš„ç‰ˆæœ¬å·å’Œè‡ªåŠ¨æ‰“tag</li></ul><p>æ— è®ºæ˜¯å¼€å‘è¿‡ç¨‹è¿˜æ˜¯å‘å¸ƒåŒ…çš„è¿‡ç¨‹ï¼ŒLernaéƒ½å¸®æˆ‘ä»¬åšäº†å¾ˆå¤šæ‰‹åŠ¨ç»´æŠ¤éš¾ä»¥å®Œæˆçš„å·¥ä½œã€‚å¯¹äºå¤šä¸ªnpmåŒ…è¿˜æœ‰ç‰ˆæœ¬çš„ç»´æŠ¤ï¼Œå¦‚æœæ‰‹åŠ¨ç»´æŠ¤ï¼Œå°†æ˜¯ä¸€ä¸ªç¾éš¾ã€‚å½“ç„¶äº†ï¼Œåˆå› ä¸ºè¿™äº›åŒ…ä¹‹é—´çš„ä¾èµ–æ·±ï¼Œå¦‚æœç”¨multirepoçš„æ–¹å¼ç»´æŠ¤ï¼Œä¼šå‡ºç°æ›´å¤šéš¾ä»¥ç»´æŠ¤çš„é—®é¢˜ã€‚æ‰€ä»¥å¯ä»¥å¼€å‡ºï¼ŒLernaå¯¹äºå¤šä¸ªnpmåŒ…ç”¨monorepoçš„æ–¹å¼ç»´æŠ¤ï¼Œç®—æ˜¯æä¾›äº†éå¸¸å¼ºåŠ›çš„è¾…åŠ©ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;ç®€ä»‹&quot;&gt;&lt;a href=&quot;#ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;ç®€ä»‹&quot;&gt;&lt;/a&gt;ç®€ä»‹&lt;/h2&gt;&lt;p&gt;ä»€ä¹ˆæ˜¯Lernaï¼Ÿæˆªå–githubä¸Šé¢çš„descriptionå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;A tool for managing JavaScript projects with multiple packages.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;monorepo&quot;&gt;&lt;a href=&quot;#monorepo&quot; class=&quot;headerlink&quot; title=&quot;monorepo&quot;&gt;&lt;/a&gt;monorepo&lt;/h2&gt;&lt;p&gt;æœ€è¿‘å·¥ä½œä¸­ç»´æŠ¤å¤šä¸ªé¡¹ç›®ï¼Œå‡ç”¨åˆ°Lernaè¿™ä¸ªå¤šåŒ…ç®¡ç†å™¨ã€‚é€šè¿‡ä½¿ç”¨Lerna, æ„Ÿå—äº†monorepoç»´æŠ¤é¡¹ç›®çš„å¥½å¤„ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºmonorepoçš„ä»‹ç»ï¼Œè¯·&lt;a href=&quot;https://trunkbaseddevelopment.com/monorepos/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;ç‚¹å‡»æ­¤å¤„&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ç›®å‰å‡ºåçš„å‰ç«¯å¼€æºé¡¹ç›®ä¹Ÿæœ‰å¾ˆå¤šä½¿ç”¨äº†Lernaå»ç»´æŠ¤ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/facebook/react&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;React&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/babel/babel&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Babel&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/emberjs/ember.js&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Ember&lt;/a&gt;
    
    </summary>
    
    
    
      <category term="å‰ç«¯å·¥ç¨‹åŒ–" scheme="http://yoursite.com/tags/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>å‰ç«¯å·¥ç¨‹åŒ–å®è·µç³»åˆ—--è§„èŒƒåŒ–</title>
    <link href="http://yoursite.com/2019/11/08/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E5%AE%9E%E8%B7%B5%E7%B3%BB%E5%88%97--%E6%A0%87%E5%87%86%E5%8C%96%E5%88%B6%E5%AE%9A/"/>
    <id>http://yoursite.com/2019/11/08/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E5%AE%9E%E8%B7%B5%E7%B3%BB%E5%88%97--%E6%A0%87%E5%87%86%E5%8C%96%E5%88%B6%E5%AE%9A/</id>
    <published>2019-11-08T05:25:34.000Z</published>
    <updated>2020-01-29T10:59:34.340Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨å·¥ä½œä¸­æœ‰åšå‰ç«¯å·¥ç¨‹åŒ–çš„ä¸€äº›å®è·µï¼Œç°åœ¨æˆ‘å°±æŠŠå…¶ä¸­çš„æ€æƒ³å’Œå®è·µæ€»ç»“å‡ºæ¥ï¼Œä¾›æ—¥åå‚è€ƒã€‚</p><h2 id="ä¸ºä»€ä¹ˆéœ€è¦è§„èŒƒåŒ–"><a href="#ä¸ºä»€ä¹ˆéœ€è¦è§„èŒƒåŒ–" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦è§„èŒƒåŒ–"></a>ä¸ºä»€ä¹ˆéœ€è¦è§„èŒƒåŒ–</h2><p>é¢å¯¹è¿™ä¸ªé—®é¢˜ï¼Œå¯èƒ½æœ‰äº›åŒå­¦è„‘å­é‡Œæµ®ç°çš„æ˜¯eslintçš„å„ç§æŠ¥é”™ï¼Œå¯èƒ½æ˜¯git commitå‰eslintæ£€æŸ¥ä¸é€šè¿‡å¯¼è‡´å¤±è´¥ã€‚</p><p>å¤§å®¶åœ¨å¼€å‘è¿‡ç¨‹ä¸­å»è§£å†³è¿™äº›é—®é¢˜ï¼Œä¼šä¸ä¼šè§‰å¾—å¾ˆæ¼ç«å‘¢ï¼Ÿæˆ‘å¾ˆæ¼ç«ï¼Œè‡³å°‘å½“æˆ‘åœ¨æƒ³æ˜ç™½è¿™ä¸ªé—®é¢˜ä¹‹å‰ï¼Œå³ï¼Œä¸ºä»€ä¹ˆéœ€è¦è§„èŒƒåŒ–ã€‚</p><p>å·¥ä½œå’Œç”Ÿæ´»ä¸­ï¼Œå¾ˆå¤šäº‹æƒ…éƒ½æ˜¯trade offçš„ç»“æœï¼Œå½“å¤§å®¶éƒ½å¿å—ç€éº»çƒ¦åŠªåŠ›åšä¸€ä»¶äº‹æƒ…çš„æ—¶å€™ï¼Œå¾ˆå¤§å¯èƒ½å°±æ˜¯ï¼Œä¸åšè¿™äº›ï¼Œä¼šæ›´ç³Ÿç³•ã€‚</p><p>ç®€è¨€ä¹‹ï¼Œä¸ªäººè§‰å¾—å‰ç«¯å¼€å‘è§„èŒƒåŒ–çš„æœ€é‡è¦åŸå› å°±æ˜¯<strong>æé«˜å›¢é˜Ÿæ•´ä½“å¼€å‘æ•ˆç‡</strong>ã€‚å¾€ç»†è¯´ï¼Œå¯ä»¥ç®€å•åˆ†ä¸‰ç‚¹ã€‚</p><ul><li>é™ä½çŠ¯é”™çš„æ¦‚ç‡</li><li>æé«˜å›¢é˜Ÿä»£ç è´¨é‡</li><li>æé«˜é¡¹ç›®å¯ç»´æŠ¤æ€§</li></ul><p>æé«˜å›¢é˜Ÿæ•´ä½“å¼€å‘æ•ˆç‡è¿™ä¸€ä»¶äº‹ï¼Œå€¼å¾—æˆ‘ä»¬å»åˆ¶å®šè§„èŒƒï¼Œè½åœ°è§„èŒƒï¼Œé…å¥—å·¥å…·æé«˜è§„èŒƒå®è·µæ•ˆç‡ï¼Œå¹¶ä¸ºä¹‹è§£å†³å·¥å…·æœ¬èº«å¸¦æ¥çš„æ–°é—®é¢˜ã€‚å› æ­¤æˆ‘ä»¬ä¸èƒ½åªæ˜¯çœ‹åˆ°è§„èŒƒåŒ–ç»™å¼€å‘å¸¦æ¥çš„å›°æ‰°ï¼Œæ›´è¦çœ‹åˆ°å…¶æœ¬è´¨ä½œç”¨ã€‚</p><a id="more"></a><h2 id="è§„èŒƒåŒ–æ¶‰åŠçš„æ–¹é¢"><a href="#è§„èŒƒåŒ–æ¶‰åŠçš„æ–¹é¢" class="headerlink" title="è§„èŒƒåŒ–æ¶‰åŠçš„æ–¹é¢"></a>è§„èŒƒåŒ–æ¶‰åŠçš„æ–¹é¢</h2><p>æ˜ç¡®äº†è§„èŒƒåŒ–çš„æ„ä¹‰ï¼Œç°åœ¨å¯¹æˆ‘åœ¨å·¥ç¨‹ä¸­å®è·µè¿‡çš„è§„èŒƒåŒ–å†…å®¹å’Œç›¸åº”çš„å·¥å…·åšä¸€ä¸ªç®€å•çš„æ€»ç»“ã€‚</p><ul><li>ä»£ç æ ¼å¼è§„èŒƒåŒ–<ul><li>ESLint</li><li>lint-staged</li><li>husky</li></ul></li><li>commitè§„èŒƒåŒ–<ul><li>commitizen</li><li>husky</li><li>commitlint</li><li>conventional-changelog-cli</li></ul></li><li>gitæµç¨‹è§„èŒƒåŒ–<ul><li>git-flow</li></ul></li></ul><p>å¦‚æœå¯¹ä¸Šé¢çš„å®è·µå±•å¼€è®²ï¼Œæœ‰å¾ˆå¤šå®è·µçš„ç»†èŠ‚å¯ä»¥è¯´ã€‚å‡è®¾å„ä½è¯»è€…éƒ½æœ‰èƒ½åŠ›æ ¹æ®ç½—åˆ—å‡ºæ¥çš„ç‚¹å»æ­å»ºä¸€ä¸ªå¼€å‘æµç¨‹æ›´è§„èŒƒçš„å‰ç«¯è„šæ‰‹æ¶ï¼Œé‚£æˆ‘ä»¬åº”è¯¥åœ¨æ­å»ºè„šæ‰‹æ¶ä¹‹å¤–åšä»€ä¹ˆæ€è€ƒå‘¢ï¼Ÿ</p><ol><li>æ‰§è¡Œ</li><li>æ‰§è¡Œ</li><li>æ‰§è¡Œ</li></ol><p>è§„åˆ™éƒ½æ˜¯äººå®šå‡ºæ¥çš„ï¼Œç ´åè§„åˆ™çš„ä¹Ÿå¯ä»¥æ˜¯äººã€‚å¦‚æœå›¢é˜Ÿæˆå‘˜å†…å¿ƒä¸è®¤å¯è§„èŒƒåŒ–çš„ä»·å€¼ï¼Œé‚£ä¹ˆå·¥å…·æˆ–è€…æ–‡æ¡£å†™çš„å†å¥½ï¼Œéƒ½ä¸èƒ½èµ·åˆ°æ­£é¢çš„ä½œç”¨ã€‚æ‰€ä»¥è§„èŒƒåˆ¶å®šçš„è¿‡ç¨‹ä¸­ï¼Œå°½å¯èƒ½å‚è€ƒä¸šç•Œè§„èŒƒï¼Œå¹¶åœ¨å›¢é˜Ÿå†…éƒ¨è¾¾ï¼ˆæ‰“ï¼‰æˆå…±è¯†ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ€è¿‘åœ¨å·¥ä½œä¸­æœ‰åšå‰ç«¯å·¥ç¨‹åŒ–çš„ä¸€äº›å®è·µï¼Œç°åœ¨æˆ‘å°±æŠŠå…¶ä¸­çš„æ€æƒ³å’Œå®è·µæ€»ç»“å‡ºæ¥ï¼Œä¾›æ—¥åå‚è€ƒã€‚&lt;/p&gt;
&lt;h2 id=&quot;ä¸ºä»€ä¹ˆéœ€è¦è§„èŒƒåŒ–&quot;&gt;&lt;a href=&quot;#ä¸ºä»€ä¹ˆéœ€è¦è§„èŒƒåŒ–&quot; class=&quot;headerlink&quot; title=&quot;ä¸ºä»€ä¹ˆéœ€è¦è§„èŒƒåŒ–&quot;&gt;&lt;/a&gt;ä¸ºä»€ä¹ˆéœ€è¦è§„èŒƒåŒ–&lt;/h2&gt;&lt;p&gt;é¢å¯¹è¿™ä¸ªé—®é¢˜ï¼Œå¯èƒ½æœ‰äº›åŒå­¦è„‘å­é‡Œæµ®ç°çš„æ˜¯eslintçš„å„ç§æŠ¥é”™ï¼Œå¯èƒ½æ˜¯git commitå‰eslintæ£€æŸ¥ä¸é€šè¿‡å¯¼è‡´å¤±è´¥ã€‚&lt;/p&gt;
&lt;p&gt;å¤§å®¶åœ¨å¼€å‘è¿‡ç¨‹ä¸­å»è§£å†³è¿™äº›é—®é¢˜ï¼Œä¼šä¸ä¼šè§‰å¾—å¾ˆæ¼ç«å‘¢ï¼Ÿæˆ‘å¾ˆæ¼ç«ï¼Œè‡³å°‘å½“æˆ‘åœ¨æƒ³æ˜ç™½è¿™ä¸ªé—®é¢˜ä¹‹å‰ï¼Œå³ï¼Œä¸ºä»€ä¹ˆéœ€è¦è§„èŒƒåŒ–ã€‚&lt;/p&gt;
&lt;p&gt;å·¥ä½œå’Œç”Ÿæ´»ä¸­ï¼Œå¾ˆå¤šäº‹æƒ…éƒ½æ˜¯trade offçš„ç»“æœï¼Œå½“å¤§å®¶éƒ½å¿å—ç€éº»çƒ¦åŠªåŠ›åšä¸€ä»¶äº‹æƒ…çš„æ—¶å€™ï¼Œå¾ˆå¤§å¯èƒ½å°±æ˜¯ï¼Œä¸åšè¿™äº›ï¼Œä¼šæ›´ç³Ÿç³•ã€‚&lt;/p&gt;
&lt;p&gt;ç®€è¨€ä¹‹ï¼Œä¸ªäººè§‰å¾—å‰ç«¯å¼€å‘è§„èŒƒåŒ–çš„æœ€é‡è¦åŸå› å°±æ˜¯&lt;strong&gt;æé«˜å›¢é˜Ÿæ•´ä½“å¼€å‘æ•ˆç‡&lt;/strong&gt;ã€‚å¾€ç»†è¯´ï¼Œå¯ä»¥ç®€å•åˆ†ä¸‰ç‚¹ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é™ä½çŠ¯é”™çš„æ¦‚ç‡&lt;/li&gt;
&lt;li&gt;æé«˜å›¢é˜Ÿä»£ç è´¨é‡&lt;/li&gt;
&lt;li&gt;æé«˜é¡¹ç›®å¯ç»´æŠ¤æ€§&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æé«˜å›¢é˜Ÿæ•´ä½“å¼€å‘æ•ˆç‡è¿™ä¸€ä»¶äº‹ï¼Œå€¼å¾—æˆ‘ä»¬å»åˆ¶å®šè§„èŒƒï¼Œè½åœ°è§„èŒƒï¼Œé…å¥—å·¥å…·æé«˜è§„èŒƒå®è·µæ•ˆç‡ï¼Œå¹¶ä¸ºä¹‹è§£å†³å·¥å…·æœ¬èº«å¸¦æ¥çš„æ–°é—®é¢˜ã€‚å› æ­¤æˆ‘ä»¬ä¸èƒ½åªæ˜¯çœ‹åˆ°è§„èŒƒåŒ–ç»™å¼€å‘å¸¦æ¥çš„å›°æ‰°ï¼Œæ›´è¦çœ‹åˆ°å…¶æœ¬è´¨ä½œç”¨ã€‚&lt;/p&gt;
    
    </summary>
    
    
    
      <category term="å‰ç«¯å·¥ç¨‹åŒ–" scheme="http://yoursite.com/tags/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/"/>
    
      <category term="æ ‡å‡†" scheme="http://yoursite.com/tags/%E6%A0%87%E5%87%86/"/>
    
  </entry>
  
</feed>
